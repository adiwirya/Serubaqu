{"version":3,"sources":["webpack:///node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-storage.js","webpack:///node_modules/@capacitor/core/dist/esm/core-plugin-definitions.js","webpack:///node_modules/@capacitor/core/dist/esm/global.js","webpack:///node_modules/@capacitor/core/dist/esm/index.js","webpack:///node_modules/@capacitor/core/dist/esm/util.js","webpack:///node_modules/@capacitor/core/dist/esm/web-plugins.js","webpack:///node_modules/@capacitor/core/dist/esm/web-runtime.js","webpack:///node_modules/@capacitor/core/dist/esm/web/accessibility.js","webpack:///node_modules/@capacitor/core/dist/esm/web/app.js","webpack:///node_modules/@capacitor/core/dist/esm/web/browser.js","webpack:///node_modules/@capacitor/core/dist/esm/web/camera.js","webpack:///node_modules/@capacitor/core/dist/esm/web/clipboard.js","webpack:///node_modules/@capacitor/core/dist/esm/web/device.js","webpack:///node_modules/@capacitor/core/dist/esm/web/filesystem.js","webpack:///node_modules/@capacitor/core/dist/esm/web/geolocation.js","webpack:///node_modules/@capacitor/core/dist/esm/web/index.js","webpack:///node_modules/@capacitor/core/dist/esm/web/local-notifications.js","webpack:///node_modules/@capacitor/core/dist/esm/web/modals.js","webpack:///node_modules/@capacitor/core/dist/esm/web/motion.js","webpack:///node_modules/@capacitor/core/dist/esm/web/network.js","webpack:///node_modules/@capacitor/core/dist/esm/web/permissions.js","webpack:///node_modules/@capacitor/core/dist/esm/web/share.js","webpack:///node_modules/@capacitor/core/dist/esm/web/splash-screen.js","webpack:///node_modules/@capacitor/core/dist/esm/web/storage.js","webpack:///node_modules/@capacitor/core/dist/esm/web/toast.js","webpack:///node_modules/@firebase/storage/dist/index.esm.js","webpack:///node_modules/firebase/storage/dist/index.esm.js","webpack:///src/app/profile/profile.page.html","webpack:///src/app/profile/profile-routing.module.ts","webpack:///src/app/profile/profile.module.ts","webpack:///src/app/profile/profile.page.scss","webpack:///src/app/profile/profile.page.ts"],"names":["fromTask","task","subscriber","progress","snap","next","error","e","complete","on","snapshot","cancel","AngularFireUploadTask","createUploadTask","inner$","then","bind","pause","resume","snapshotChanges","percentageChanges","pipe","s","bytesTransferred","totalBytes","AngularFireStorageReference","createStorageRef","ref","schedulers","keepUnstableUntilFirst","getDownloadURL","undefined","outsideAngular","getMetadata","child","path","updateMetadata","meta","put","data","metadata","putString","format","listAll","BUCKET","MAX_UPLOAD_RETRY_TIME","MAX_OPERATION_RETRY_TIME","AngularFireStorage","options","nameOrConfig","storageBucket","platformId","zone","maxUploadRetryTime","maxOperationRetryTime","app","storage","name","runOutsideAngular","setMaxUploadRetryTime","setMaxOperationRetryTime","refFromURL","storageRef","ɵfac","AngularFireStorage_Factory","t","ctorParameters","type","decorators","args","Object","ɵprov","factory","token","providedIn","GetDownloadURLPipe","cdr","asyncPipe","downloadUrl$","transform","ngOnDestroy","GetDownloadURLPipe_Factory","ɵpipe","pure","GetDownloadURLPipeModule","ɵmod","ɵinj","GetDownloadURLPipeModule_Factory","ngJitMode","declarations","exports","AngularFireStorageModule","AngularFireStorageModule_Factory","providers","imports","CameraSource","CameraDirection","CameraResultType","FilesystemDirectory","FilesystemEncoding","HapticsImpactStyle","HapticsNotificationType","KeyboardStyle","KeyboardResize","ActionSheetOptionStyle","PermissionType","PhotosAlbumType","StatusBarStyle","StatusBarAnimation","Capacitor","globalThis","self","window","global","Plugins","extend","target","objs","_i","arguments","length","forEach","o","k","hasOwnProperty","uuid4","replace","c","r","Math","random","v","toString","registerWebPlugin","plugin","CapacitorWeb","_this","platform","isNative","Proxy","get","prop","thisRef_1","_target","_prop","pluginMethodNoop","prototype","pluginName","Promise","reject","getPlatform","isPluginAvailable","convertFileSrc","filePath","handleError","console","AccessibilityPluginWeb","_super","call","platforms","isScreenReaderEnabled","Error","speak","utterance","SpeechSynthesisUtterance","value","language","lang","speechSynthesis","resolve","Accessibility","AppPluginWeb","document","addEventListener","handleVisibilityChange","exitApp","canOpenUrl","_options","openUrl","completed","getLaunchUrl","url","getState","isActive","hidden","notifyListeners","App","BrowserPluginWeb","open","_a","_lastWindow","windowName","prefetch","close","Browser","CameraPluginWeb","getPhoto","cameraModal_1","e_1","label","webUseInput","fileInputExperience","customElements","createElement","body","appendChild","trys","push","componentOnReady","sent","photo","_b","detail","message","_getCameraPhoto","apply","dismiss","removeChild","present","input","querySelector","cleanup","parentNode","id","accept","capture","source","Photos","Prompt","removeAttribute","direction","Front","Rear","_e","file","files","resultType","DataUrl","Base64","reader_1","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","click","reader","Uri","onloadend","onerror","Camera","ClipboardPluginWeb","write","blob","clipboardItemInput","err_1","navigator","clipboard","string","writeText","image","fetch","ClipboardItem","read","clipboardItems","clipboardBlob","err_2","readText","types","getType","_getBlobData","text","includes","readAsText","Clipboard","DevicePluginWeb","getInfo","ua","uaFields","userAgent","parseUa","model","appVersion","appBuild","appId","appName","operatingSystem","osVersion","manufacturer","vendor","isVirtual","uuid","getUid","getBatteryInfo","battery","getBattery","batteryLevel","level","isCharging","charging","getLanguageCode","_ua","start","indexOf","end","fields","substring","pop","oscpu","lastParts","test","MSStream","uid","localStorage","getItem","setItem","Device","FilesystemPluginWeb","DEFAULT_DIRECTORY","Data","DB_VERSION","DB_NAME","_writeCmds","initDb","_db","request","indexedDB","onupgradeneeded","doUpgrade","onsuccess","onblocked","warn","event","eventTarget","db","oldVersion","objectStoreNames","contains","deleteObjectStore","store","createObjectStore","keyPath","createIndex","dbRequest","cmd","readFlag","conn","tx","transaction","objectStore","req","dbIndexRequest","indexName","index","getPath","directory","uriPath","cleanedUriPath","fsPath","clear","readFile","entry","content","writeFile","doRecursive","occupiedEntry","encoding","parentPath","parentEntry","subDirIndex","parentArgPath","now","pathObj","recursive","substr","lastIndexOf","mkdir","Date","folder","size","ctime","mtime","uri","appendFile","deleteFile","entries","IDBKeyRange","only","depth","match","rmdir","fullPath","readDirResult","entry_1","entryPath","entryObj","readdir","stat","names","map","getUri","rename","_copy","copy","doRename","to","from","fromDirectory","toDirectory","fromPath","toPath","toObj","toPathComponents","toPath_1","toParentDirectory","fromObj","updateTime","e_2","contents","contents_1","filename","startsWith","join","_debug","Filesystem","GeolocationPluginWeb","getCurrentPosition","requestPermissions","_result","geolocation","pos","err","enableHighAccuracy","timeout","maximumAge","watchPosition","callback","clearWatch","parseInt","Geolocation","WebPluginRegistry","plugins","loadedPlugins","addPlugin","config","getPlugin","loadPlugin","load","getPlugins","p","name_1","WebPlugins","WebPlugin","pluginRegistry","loaded","listeners","windowListeners","addWindowListener","handle","windowEventName","handler","registered","removeWindowListener","removeEventListener","addListener","eventName","listenerFunc","windowListener","remove","removeListener","splice","removeAllListeners","listener","hasListeners","registerWindowListener","pluginEventName","nativePromise","results","shouldMergeWebPlugin","mergeWebPlugins","knownPlugins","plugins_1","mergeWebPlugin","LocalNotificationsPluginWeb","pending","createChannel","channel","deleteChannel","listChannels","sendPending","toRemove","localNotification","schedule","at","buildNotification","log","filter","find","ln","sendNotification","l","diff","setTimeout","Notification","title","notifications","notification","getPending","registerActionTypes","areEnabled","permission","requestPermission","granted","LocalNotifications","ModalsPluginWeb","alert","prompt","val","inputText","cancelled","confirm","showActions","_reject","actionSheet","header","cancelable","selection","Modals","MotionPluginWeb","Motion","NetworkPluginWeb","listenerFunction","getStatus","connected","onLine","connection","mozConnection","webkitConnection","connectionType","effectiveType","thisRef","onlineBindFunc","offlineBindFunc","localeCompare","Network","PermissionsPluginWeb","query","ret","permissions","state","Permissions","SharePluginWeb","share","Share","SplashScreenPluginWeb","show","_callback","hide","SplashScreen","StoragePluginWeb","KEY_PREFIX","makeKey","key","set","removeItem","keys","isKey","getKey","Storage","ToastPluginWeb","duration","toast","Toast","DEFAULT_HOST","CONFIG_STORAGE_BUCKET_KEY","DEFAULT_MAX_OPERATION_RETRY_TIME","DEFAULT_MAX_UPLOAD_RETRY_TIME","FirebaseStorageError","code","prependCode","customData","serverResponse","setPrototypeOf","codeEquals","defineProperty","enumerable","configurable","Code","UNKNOWN","OBJECT_NOT_FOUND","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","QUOTA_EXCEEDED","UNAUTHENTICATED","UNAUTHORIZED","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","CANCELED","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","CANNOT_SLICE_BLOB","SERVER_FILE_WRONG_SIZE","NO_DOWNLOAD_URL","INVALID_ARGUMENT","INVALID_ARGUMENT_COUNT","APP_DELETED","INVALID_ROOT_OPERATION","INVALID_FORMAT","INTERNAL_ERROR","UNSUPPORTED_ENVIRONMENT","unknown","objectNotFound","quotaExceeded","bucket","unauthenticated","unauthorized","retryLimitExceeded","canceled","invalidUrl","invalidDefaultBucket","noDefaultBucket","cannotSliceBlob","serverFileWrongSize","noDownloadURL","invalidArgument","appDeleted","invalidRootOperation","invalidFormat","internalError","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","StringData","contentType","dataFromString","stringData","utf8Bytes_","base64Bytes_","dataURLBytes_","dataURLContentType_","b","i","charCodeAt","valid","hi","lo","Uint8Array","percentEncodedBytes_","decoded","decodeURIComponent","hasMinus","hasUnder","invalidChar","hasPlus","hasSlash","bytes","atob","array","DataURLParts","dataURL","base64","matches","middle","endsWith","rest","parts","longEnough","TaskEvent","STATE_CHANGED","InternalTaskState","RUNNING","PAUSING","PAUSED","SUCCESS","CANCELING","ERROR","TaskState","taskStateFromInternalTaskState","ErrorCode","NetworkXhrIo","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","ABORT","NETWORK_ERROR","send","method","headers","setRequestHeader","getErrorCode","status","getResponseText","responseText","abort","getResponseHeader","addUploadProgressListener","upload","removeUploadProgressListener","XhrIoPool","createXhrIo","isJustDef","isFunction","isNonArrayObject","Array","isArray","isString","String","isNativeBlob","isNativeBlobDefined","Blob","validateNumber","argument","minValue","maxValue","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","getBlob","bb","append","sliceBlob","webkitSlice","mozSlice","slice","FbsBlob","elideCopy","blobType","data_","ArrayBuffer","byteLength","size_","type_","startByte","endByte","realBlob","sliced","buffer","blobby","uint8Arrays","finalLength_1","merged_1","index_1","uploadData","Location","path_","fullServerUrl","encode","encodeURIComponent","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","location","bucketDomain","gsModify","loc","charAt","gsPath","gsRegex","RegExp","gsIndices","httpModify","version","firebaseStorageHost","firebaseStoragePath","firebaseStorageRegExp","firebaseStorageIndices","cloudStorageHost","cloudStoragePath","cloudStorageRegExp","cloudStorageIndices","groups","regex","indices","postModify","group","captures","exec","bucketValue","pathValue","jsonObjectOrNull","obj","JSON","parse","parent","newPath","childPath","canonicalChildPath","component","lastComponent","makeUrl","urlPart","makeQueryString","params","queryPart","nextPart","noXform_","Mapping","server","local","writable","xform","mappings_","xformPath","getMappings","mappings","mappingsXformPath","_metadata","nameMapping","xformSize","Number","sizeMapping","addRef","service","generateRef","makeStorageReference","fromResource","resource","len","mapping","fromResourceString","resourceString","downloadUrlFromResourceString","tokens","tokensList","urls","base","queryString","alt","toResourceString","stringify","PREFIXES_KEY","ITEMS_KEY","fromBackendResponse","listResult","prefixes","items","nextPageToken","pathWithoutTrailingSlash","reference","_c","item","fromResponseString","RequestInfo","urlParams","errorHandler","progressCallback","successCodes","additionalRetryCodes","handlerCheck","cndn","metadataHandler","xhr","listHandler","downloadUrlHandler","sharedErrorHandler","newErr","objectErrorHandler","shared","requestInfo","list","delimiter","pageToken","maxResults","isRoot","getDownloadUrl","deleteObject","_xhr","_text","determineContentType_","metadataForUpload_","metadataClone","assign","multipartUpload","genBoundary","str","boundary","metadata_","metadataString","preBlobPart","postBlobPart","ResumableUploadStatus","current","total","finalized","checkResumeHeader_","allowed","allowedStatus","createResumableUpload","metadataForUpload","getResumableUploadStatus","sizeString","isNaN","resumableUploadChunkSize","continueResumableUpload","chunkSize","status_","bytesLeft","bytesToUpload","min","uploadCommand","uploadStatus","newCurrent","Observer","nextOrObserver","asFunctions","observer","UploadTaskSnapshot","async","f","argsToForward","UploadTask","_transferred","_needToFetchStatus","_needToFetchMetadata","_observers","_error","_uploadUrl","_request","_chunkMultiplier","_resolve","_ref","_blob","_mappings","_resumable","_shouldDoResumable","_state","_errorHandler","completeTransitions_","_transition","_metadataErrorHandler","_promise","_start","_makeProgressCallback","sizeBefore","_updateProgress","_createResumable","_fetchStatus","_fetchMetadata","_continueUpload","_oneShotUpload","_resolveToken","getAuthToken","authToken","_location","createRequest","makeRequest","getPromise","statusRequest","uploadRequest","newStatus","_increaseMultiplier","currentSize","metadataRequest","multipartRequest","transferred","old","_notifyObservers","wasPaused","externalState","_addObserver","_removeObserver","onFulfilled","onRejected","_notifyObserver","_finishPromise","observers","triggered","toCall","Reference","_service","newRef","_throwIfRoot","uploadBytesResumable","uploadString","accumulator","listAllHelper","opt","nextPage","list$1","op","getMetadata$1","updateMetadata$1","deleteObject$1","getChild","UploadTaskSnapshotCompat","_delegate","UploadTaskCompat","_snapshot","wrappedNextOrObserver","taskSnapshot","ListResultCompat","ReferenceCompat","root","FailRequest","promise_","_appDelete","waitSeconds","timeoutId","hitTimeout","cancelState","triggeredCallback","triggerCallback","callWithDelay","millis","success","mustStop","waitMillis","stopped","stop","wasTimeout","clearTimeout","NetworkRequest","errorCallback","pool","pendingXhr_","backoffId_","canceled_","appDelete_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","pool_","resolve_","reject_","start_","doTheRequest","backoffCallback","RequestEndStatus","progressListener","progressEvent","lengthComputable","hitServer","isRetryStatusCode_","wasCanceled","successCode","backoffDone","requestWentThrough","wasSuccessCode","appDelete","isFiveHundredCode","extraRetryCodes","isExtraRetryCode","isRequestSpecificRetryCode","addAuthHeader_","addVersionHeader_","SDK_VERSION","addGmpidHeader_","isUrl","refFromPath","StorageService","_bucket","serviceOrRef","pathOrUrl","extractBucket","_authProvider","_pool","_url","_appId","_deleted","_maxOperationRetryTime","_maxUploadRetryTime","_requests","Set","time","POSITIVE_INFINITY","auth","tokenData","getImmediate","optional","getToken","accessToken","_delete","request_1","add","StorageServiceCompat","INTERNAL","STORAGE_TYPE","container","getProvider","authProvider","storageServiceCompat","registerStorage","instance","namespaceExports","registerComponent","setServiceProps","setMultipleInstances","registerVersion","routes","ProfilePageRoutingModule","forChild","ProfilePageModule","ProfilePage","ngroute","firebaseAuthService","firebaseDB","alertCtrl","toastCtrl","actionSheetCtrl","loadingCtrl","router","sanitizer","locId","userLocations","isCamera","is","isDesktop","userDetails","subscribe","res","getUserData","signOut","navigate","doc","valueChanges","userData","profilePic","imageUrl","filePickerRef","nativeElement","quality","width","height","allowEditing","bypassSecurityTrustResourceUrl","base64Image","uploadImage","pattern","imageFile","onload","create","animated","mode","buttons","icon","getPicture","loading","onDidDismiss","role","tm","cm","color","presentLoading","n","fileRef","downloadURL","refPath","update","msg","clr","presentToast","profileWidth","getElementById","offsetWidth","style","selector","template"],"mappings":"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A;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAA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","file":"profile-profile-module-es5.js","sourcesContent":["import { Observable, of, from } from 'rxjs';\r\nimport { map, observeOn, switchMap } from 'rxjs/operators';\r\nimport { InjectionToken, Injectable, Inject, Optional, PLATFORM_ID, NgZone, ɵɵdefineInjectable, ɵɵinject, Pipe, ChangeDetectorRef, NgModule } from '@angular/core';\r\nimport { ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory, ɵfirebaseAppFactory, ɵfetchInstance, FIREBASE_OPTIONS, FIREBASE_APP_NAME } from '@angular/fire';\r\nimport 'firebase/storage';\r\nimport { AsyncPipe } from '@angular/common';\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: observable/fromTask.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @param {?} task\r\n * @return {?}\r\n */\r\nimport * as ɵngcc0 from '@angular/core';\r\nfunction fromTask(task) {\r\n    return new Observable((/**\r\n     * @param {?} subscriber\r\n     * @return {?}\r\n     */\r\n    subscriber => {\r\n        /** @type {?} */\r\n        const progress = (/**\r\n         * @param {?} snap\r\n         * @return {?}\r\n         */\r\n        (snap) => subscriber.next(snap));\r\n        /** @type {?} */\r\n        const error = (/**\r\n         * @param {?} e\r\n         * @return {?}\r\n         */\r\n        e => subscriber.error(e));\r\n        /** @type {?} */\r\n        const complete = (/**\r\n         * @return {?}\r\n         */\r\n        () => subscriber.complete());\r\n        task.on('state_changed', progress, (/**\r\n         * @param {?} e\r\n         * @return {?}\r\n         */\r\n        (e) => {\r\n            progress(task.snapshot);\r\n            error(e);\r\n        }), (/**\r\n         * @return {?}\r\n         */\r\n        () => {\r\n            progress(task.snapshot);\r\n            complete();\r\n        }));\r\n        return (/**\r\n         * @return {?}\r\n         */\r\n        () => task.cancel());\r\n    }));\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: task.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction AngularFireUploadTask() { }\r\nif (false) {\r\n    /** @type {?} */\r\n    AngularFireUploadTask.prototype.task;\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.snapshotChanges = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.percentageChanges = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.pause = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.cancel = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.resume = function () { };\r\n    /**\r\n     * @param {?=} onFulfilled\r\n     * @param {?=} onRejected\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.then = function (onFulfilled, onRejected) { };\r\n    /**\r\n     * @param {?} onRejected\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.catch = function (onRejected) { };\r\n}\r\n/**\r\n * Create an AngularFireUploadTask from a regular UploadTask from the Storage SDK.\r\n * This method creates an observable of the upload and returns on object that provides\r\n * multiple methods for controlling and monitoring the file upload.\r\n * @param {?} task\r\n * @return {?}\r\n */\r\nfunction createUploadTask(task) {\r\n    /** @type {?} */\r\n    const inner$ = fromTask(task);\r\n    return {\r\n        task,\r\n        then: task.then.bind(task),\r\n        catch: task.catch.bind(task),\r\n        pause: task.pause.bind(task),\r\n        cancel: task.cancel.bind(task),\r\n        resume: task.resume.bind(task),\r\n        snapshotChanges: (/**\r\n         * @return {?}\r\n         */\r\n        () => inner$),\r\n        percentageChanges: (/**\r\n         * @return {?}\r\n         */\r\n        () => inner$.pipe(map((/**\r\n         * @param {?} s\r\n         * @return {?}\r\n         */\r\n        s => s.bytesTransferred / s.totalBytes * 100))))\r\n    };\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: ref.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction AngularFireStorageReference() { }\r\nif (false) {\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.getDownloadURL = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.getMetadata = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.delete = function () { };\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.child = function (path) { };\r\n    /**\r\n     * @param {?} meta\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.updateMetadata = function (meta) { };\r\n    /**\r\n     * @param {?} data\r\n     * @param {?=} metadata\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.put = function (data, metadata) { };\r\n    /**\r\n     * @param {?} data\r\n     * @param {?=} format\r\n     * @param {?=} metadata\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.putString = function (data, format, metadata) { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.listAll = function () { };\r\n}\r\n/**\r\n * Create an AngularFire wrapped Storage Reference. This object\r\n * creates observable methods from promise based methods.\r\n * @param {?} ref\r\n * @param {?} schedulers\r\n * @param {?} keepUnstableUntilFirst\r\n * @return {?}\r\n */\r\nfunction createStorageRef(ref, schedulers, keepUnstableUntilFirst) {\r\n    return {\r\n        getDownloadURL: (/**\r\n         * @return {?}\r\n         */\r\n        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**\r\n         * @return {?}\r\n         */\r\n        () => ref.getDownloadURL())), keepUnstableUntilFirst)),\r\n        getMetadata: (/**\r\n         * @return {?}\r\n         */\r\n        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**\r\n         * @return {?}\r\n         */\r\n        () => ref.getMetadata())), keepUnstableUntilFirst)),\r\n        delete: (/**\r\n         * @return {?}\r\n         */\r\n        () => from(ref.delete())),\r\n        child: (/**\r\n         * @param {?} path\r\n         * @return {?}\r\n         */\r\n        (path) => createStorageRef(ref.child(path), schedulers, keepUnstableUntilFirst)),\r\n        updateMetadata: (/**\r\n         * @param {?} meta\r\n         * @return {?}\r\n         */\r\n        (meta) => from(ref.updateMetadata(meta))),\r\n        put: (/**\r\n         * @param {?} data\r\n         * @param {?=} metadata\r\n         * @return {?}\r\n         */\r\n        (data, metadata) => {\r\n            /** @type {?} */\r\n            const task = ref.put(data, metadata);\r\n            return createUploadTask(task);\r\n        }),\r\n        putString: (/**\r\n         * @param {?} data\r\n         * @param {?=} format\r\n         * @param {?=} metadata\r\n         * @return {?}\r\n         */\r\n        (data, format, metadata) => {\r\n            /** @type {?} */\r\n            const task = ref.putString(data, format, metadata);\r\n            return createUploadTask(task);\r\n        }),\r\n        listAll: (/**\r\n         * @return {?}\r\n         */\r\n        () => from(ref.listAll()))\r\n    };\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: storage.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nconst BUCKET = new InjectionToken('angularfire2.storageBucket');\r\n/** @type {?} */\r\nconst MAX_UPLOAD_RETRY_TIME = new InjectionToken('angularfire2.storage.maxUploadRetryTime');\r\n/** @type {?} */\r\nconst MAX_OPERATION_RETRY_TIME = new InjectionToken('angularfire2.storage.maxOperationRetryTime');\r\n/**\r\n * AngularFireStorage Service\r\n *\r\n * This service is the main entry point for this feature module. It provides\r\n * an API for uploading and downloading binary files from Cloud Storage for\r\n * Firebase.\r\n */\r\nclass AngularFireStorage {\r\n    /**\r\n     * @param {?} options\r\n     * @param {?} nameOrConfig\r\n     * @param {?} storageBucket\r\n     * @param {?} platformId\r\n     * @param {?} zone\r\n     * @param {?} maxUploadRetryTime\r\n     * @param {?} maxOperationRetryTime\r\n     */\r\n    constructor(options, nameOrConfig, storageBucket, \r\n    // tslint:disable-next-line:ban-types\r\n    platformId, zone, maxUploadRetryTime, maxOperationRetryTime) {\r\n        this.schedulers = new ɵAngularFireSchedulers(zone);\r\n        this.keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(this.schedulers);\r\n        /** @type {?} */\r\n        const app = ɵfirebaseAppFactory(options, zone, nameOrConfig);\r\n        this.storage = ɵfetchInstance(`${app.name}.storage.${storageBucket}`, 'AngularFireStorage', app, (/**\r\n         * @return {?}\r\n         */\r\n        () => {\r\n            /** @type {?} */\r\n            const storage = zone.runOutsideAngular((/**\r\n             * @return {?}\r\n             */\r\n            () => app.storage(storageBucket || undefined)));\r\n            if (maxUploadRetryTime) {\r\n                storage.setMaxUploadRetryTime(maxUploadRetryTime);\r\n            }\r\n            if (maxOperationRetryTime) {\r\n                storage.setMaxOperationRetryTime(maxOperationRetryTime);\r\n            }\r\n            return storage;\r\n        }), [maxUploadRetryTime, maxOperationRetryTime]);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    ref(path) {\r\n        return createStorageRef(this.storage.ref(path), this.schedulers, this.keepUnstableUntilFirst);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    refFromURL(path) {\r\n        return createStorageRef(this.storage.refFromURL(path), this.schedulers, this.keepUnstableUntilFirst);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @param {?} data\r\n     * @param {?=} metadata\r\n     * @return {?}\r\n     */\r\n    upload(path, data, metadata) {\r\n        /** @type {?} */\r\n        const storageRef = this.storage.ref(path);\r\n        /** @type {?} */\r\n        const ref = createStorageRef(storageRef, this.schedulers, this.keepUnstableUntilFirst);\r\n        return ref.put(data, metadata);\r\n    }\r\n}\r\nAngularFireStorage.ɵfac = function AngularFireStorage_Factory(t) { return new (t || AngularFireStorage)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(BUCKET, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(MAX_UPLOAD_RETRY_TIME, 8), ɵngcc0.ɵɵinject(MAX_OPERATION_RETRY_TIME, 8)); };\r\n/** @nocollapse */\r\nAngularFireStorage.ctorParameters = () => [\r\n    { type: undefined, decorators: [{ type: Inject, args: [FIREBASE_OPTIONS,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [FIREBASE_APP_NAME,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [BUCKET,] }] },\r\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\r\n    { type: NgZone },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAX_UPLOAD_RETRY_TIME,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAX_OPERATION_RETRY_TIME,] }] }\r\n];\r\n/** @nocollapse */ AngularFireStorage.ɵprov = ɵɵdefineInjectable({ factory: function AngularFireStorage_Factory() { return new AngularFireStorage(ɵɵinject(FIREBASE_OPTIONS), ɵɵinject(FIREBASE_APP_NAME, 8), ɵɵinject(BUCKET, 8), ɵɵinject(PLATFORM_ID), ɵɵinject(NgZone), ɵɵinject(MAX_UPLOAD_RETRY_TIME, 8), ɵɵinject(MAX_OPERATION_RETRY_TIME, 8)); }, token: AngularFireStorage, providedIn: \"any\" });\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorage, [{\r\n        type: Injectable,\r\n        args: [{\r\n                providedIn: 'any'\r\n            }]\r\n    }], function () { return [{ type: undefined, decorators: [{\r\n                type: Inject,\r\n                args: [FIREBASE_OPTIONS]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [FIREBASE_APP_NAME]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [BUCKET]\r\n            }] }, { type: Object, decorators: [{\r\n                type: Inject,\r\n                args: [PLATFORM_ID]\r\n            }] }, { type: ɵngcc0.NgZone }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [MAX_UPLOAD_RETRY_TIME]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [MAX_OPERATION_RETRY_TIME]\r\n            }] }]; }, null); })();\r\nif (false) {\r\n    /** @type {?} */\r\n    AngularFireStorage.prototype.storage;\r\n    /** @type {?} */\r\n    AngularFireStorage.prototype.keepUnstableUntilFirst;\r\n    /** @type {?} */\r\n    AngularFireStorage.prototype.schedulers;\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: pipes/storageUrl.pipe.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * to be used with in combination with | async\r\n */\r\nclass GetDownloadURLPipe {\r\n    /**\r\n     * @param {?} storage\r\n     * @param {?} cdr\r\n     */\r\n    constructor(storage, cdr) {\r\n        this.storage = storage;\r\n        this.asyncPipe = new AsyncPipe(cdr);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    transform(path) {\r\n        if (path !== this.path) {\r\n            this.path = path;\r\n            this.downloadUrl$ = this.storage.ref(path).getDownloadURL();\r\n        }\r\n        return this.asyncPipe.transform(this.downloadUrl$);\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnDestroy() {\r\n        this.asyncPipe.ngOnDestroy();\r\n    }\r\n}\r\nGetDownloadURLPipe.ɵfac = function GetDownloadURLPipe_Factory(t) { return new (t || GetDownloadURLPipe)(ɵngcc0.ɵɵdirectiveInject(AngularFireStorage), ɵngcc0.ɵɵinjectPipeChangeDetectorRef()); };\r\nGetDownloadURLPipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"getDownloadURL\", type: GetDownloadURLPipe, pure: false });\r\n/** @nocollapse */\r\nGetDownloadURLPipe.ctorParameters = () => [\r\n    { type: AngularFireStorage },\r\n    { type: ChangeDetectorRef }\r\n];\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GetDownloadURLPipe, [{\r\n        type: Pipe,\r\n        args: [{\r\n                name: 'getDownloadURL',\r\n                pure: false\r\n            }]\r\n    }], function () { return [{ type: AngularFireStorage }, { type: ɵngcc0.ChangeDetectorRef }]; }, null); })();\r\nif (false) {\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.asyncPipe;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.path;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.downloadUrl$;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.storage;\r\n}\r\nclass GetDownloadURLPipeModule {\r\n}\r\nGetDownloadURLPipeModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: GetDownloadURLPipeModule });\r\nGetDownloadURLPipeModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function GetDownloadURLPipeModule_Factory(t) { return new (t || GetDownloadURLPipeModule)(); } });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(GetDownloadURLPipeModule, { declarations: [GetDownloadURLPipe], exports: [GetDownloadURLPipe] }); })();\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GetDownloadURLPipeModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                declarations: [GetDownloadURLPipe],\r\n                exports: [GetDownloadURLPipe]\r\n            }]\r\n    }], null, null); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: storage.module.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nclass AngularFireStorageModule {\r\n}\r\nAngularFireStorageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireStorageModule });\r\nAngularFireStorageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireStorageModule_Factory(t) { return new (t || AngularFireStorageModule)(); }, providers: [AngularFireStorage], imports: [GetDownloadURLPipeModule] });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AngularFireStorageModule, { exports: [GetDownloadURLPipeModule] }); })();\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorageModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                exports: [GetDownloadURLPipeModule],\r\n                providers: [AngularFireStorage]\r\n            }]\r\n    }], null, null); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: public_api.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: angular-fire-storage.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n\r\nexport { AngularFireStorage, AngularFireStorageModule, BUCKET, GetDownloadURLPipe, GetDownloadURLPipeModule, MAX_OPERATION_RETRY_TIME, MAX_UPLOAD_RETRY_TIME, createStorageRef, createUploadTask, fromTask };\r\n\r\n//# sourceMappingURL=angular-fire-storage.js.map","export var CameraSource;\r\n(function (CameraSource) {\r\n    CameraSource[\"Prompt\"] = \"PROMPT\";\r\n    CameraSource[\"Camera\"] = \"CAMERA\";\r\n    CameraSource[\"Photos\"] = \"PHOTOS\";\r\n})(CameraSource || (CameraSource = {}));\r\nexport var CameraDirection;\r\n(function (CameraDirection) {\r\n    CameraDirection[\"Rear\"] = \"REAR\";\r\n    CameraDirection[\"Front\"] = \"FRONT\";\r\n})(CameraDirection || (CameraDirection = {}));\r\nexport var CameraResultType;\r\n(function (CameraResultType) {\r\n    CameraResultType[\"Uri\"] = \"uri\";\r\n    CameraResultType[\"Base64\"] = \"base64\";\r\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\r\n})(CameraResultType || (CameraResultType = {}));\r\nexport var FilesystemDirectory;\r\n(function (FilesystemDirectory) {\r\n    /**\r\n     * The Documents directory\r\n     * On iOS it's the app's documents directory.\r\n     * Use this directory to store user-generated content.\r\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\r\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\r\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\r\n     * in the `AndroidManifest.xml`\r\n     */\r\n    FilesystemDirectory[\"Documents\"] = \"DOCUMENTS\";\r\n    /**\r\n     * The Data directory\r\n     * On iOS it will use the Documents directory\r\n     * On Android it's the directory holding application files.\r\n     * Files will be deleted when the application is uninstalled.\r\n     */\r\n    FilesystemDirectory[\"Data\"] = \"DATA\";\r\n    /**\r\n     * The Cache directory\r\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files\r\n     * that your app can re-create easily.\r\n     */\r\n    FilesystemDirectory[\"Cache\"] = \"CACHE\";\r\n    /**\r\n     * The external directory\r\n     * On iOS it will use the Documents directory\r\n     * On Android it's the directory on the primary shared/external\r\n     * storage device where the application can place persistent files it owns.\r\n     * These files are internal to the applications, and not typically visible\r\n     * to the user as media.\r\n     * Files will be deleted when the application is uninstalled.\r\n     */\r\n    FilesystemDirectory[\"External\"] = \"EXTERNAL\";\r\n    /**\r\n     * The external storage directory\r\n     * On iOS it will use the Documents directory\r\n     * On Android it's the primary shared/external storage directory.\r\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\r\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\r\n     * in the `AndroidManifest.xml`\r\n     */\r\n    FilesystemDirectory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\r\n})(FilesystemDirectory || (FilesystemDirectory = {}));\r\nexport var FilesystemEncoding;\r\n(function (FilesystemEncoding) {\r\n    FilesystemEncoding[\"UTF8\"] = \"utf8\";\r\n    FilesystemEncoding[\"ASCII\"] = \"ascii\";\r\n    FilesystemEncoding[\"UTF16\"] = \"utf16\";\r\n})(FilesystemEncoding || (FilesystemEncoding = {}));\r\nexport var HapticsImpactStyle;\r\n(function (HapticsImpactStyle) {\r\n    HapticsImpactStyle[\"Heavy\"] = \"HEAVY\";\r\n    HapticsImpactStyle[\"Medium\"] = \"MEDIUM\";\r\n    HapticsImpactStyle[\"Light\"] = \"LIGHT\";\r\n})(HapticsImpactStyle || (HapticsImpactStyle = {}));\r\nexport var HapticsNotificationType;\r\n(function (HapticsNotificationType) {\r\n    HapticsNotificationType[\"SUCCESS\"] = \"SUCCESS\";\r\n    HapticsNotificationType[\"WARNING\"] = \"WARNING\";\r\n    HapticsNotificationType[\"ERROR\"] = \"ERROR\";\r\n})(HapticsNotificationType || (HapticsNotificationType = {}));\r\nexport var KeyboardStyle;\r\n(function (KeyboardStyle) {\r\n    KeyboardStyle[\"Dark\"] = \"DARK\";\r\n    KeyboardStyle[\"Light\"] = \"LIGHT\";\r\n})(KeyboardStyle || (KeyboardStyle = {}));\r\nexport var KeyboardResize;\r\n(function (KeyboardResize) {\r\n    KeyboardResize[\"Body\"] = \"body\";\r\n    KeyboardResize[\"Ionic\"] = \"ionic\";\r\n    KeyboardResize[\"Native\"] = \"native\";\r\n    KeyboardResize[\"None\"] = \"none\";\r\n})(KeyboardResize || (KeyboardResize = {}));\r\nexport var ActionSheetOptionStyle;\r\n(function (ActionSheetOptionStyle) {\r\n    ActionSheetOptionStyle[\"Default\"] = \"DEFAULT\";\r\n    ActionSheetOptionStyle[\"Destructive\"] = \"DESTRUCTIVE\";\r\n    ActionSheetOptionStyle[\"Cancel\"] = \"CANCEL\";\r\n})(ActionSheetOptionStyle || (ActionSheetOptionStyle = {}));\r\n//\r\nexport var PermissionType;\r\n(function (PermissionType) {\r\n    PermissionType[\"Camera\"] = \"camera\";\r\n    PermissionType[\"Photos\"] = \"photos\";\r\n    PermissionType[\"Geolocation\"] = \"geolocation\";\r\n    PermissionType[\"Notifications\"] = \"notifications\";\r\n    PermissionType[\"ClipboardRead\"] = \"clipboard-read\";\r\n    PermissionType[\"ClipboardWrite\"] = \"clipboard-write\";\r\n    PermissionType[\"Microphone\"] = \"microphone\";\r\n})(PermissionType || (PermissionType = {}));\r\nexport var PhotosAlbumType;\r\n(function (PhotosAlbumType) {\r\n    /**\r\n     * Album is a \"smart\" album (such as Favorites or Recently Added)\r\n     */\r\n    PhotosAlbumType[\"Smart\"] = \"smart\";\r\n    /**\r\n     * Album is a cloud-shared album\r\n     */\r\n    PhotosAlbumType[\"Shared\"] = \"shared\";\r\n    /**\r\n     * Album is a user-created album\r\n     */\r\n    PhotosAlbumType[\"User\"] = \"user\";\r\n})(PhotosAlbumType || (PhotosAlbumType = {}));\r\nexport var StatusBarStyle;\r\n(function (StatusBarStyle) {\r\n    /**\r\n     * Light text for dark backgrounds.\r\n     */\r\n    StatusBarStyle[\"Dark\"] = \"DARK\";\r\n    /**\r\n     * Dark text for light backgrounds.\r\n     */\r\n    StatusBarStyle[\"Light\"] = \"LIGHT\";\r\n})(StatusBarStyle || (StatusBarStyle = {}));\r\nexport var StatusBarAnimation;\r\n(function (StatusBarAnimation) {\r\n    /**\r\n     * No animation during show/hide.\r\n     */\r\n    StatusBarAnimation[\"None\"] = \"NONE\";\r\n    /**\r\n     * Slide animation during show/hide.\r\n     */\r\n    StatusBarAnimation[\"Slide\"] = \"SLIDE\";\r\n    /**\r\n     * Fade animation during show/hide.\r\n     */\r\n    StatusBarAnimation[\"Fade\"] = \"FADE\";\r\n})(StatusBarAnimation || (StatusBarAnimation = {}));\r\n//# sourceMappingURL=core-plugin-definitions.js.map","import { CapacitorWeb } from './web-runtime';\r\n// Create our default Capacitor instance, which will be\r\n// overridden on native platforms\r\nvar Capacitor = (function (globalThis) {\r\n    // Create a new CapacitorWeb instance if one doesn't already exist on globalThis\r\n    // Ensure the global is assigned the same Capacitor instance,\r\n    // then export Capacitor so it can be imported in other modules\r\n    return globalThis.Capacitor = (globalThis.Capacitor || new CapacitorWeb());\r\n})(\r\n// figure out the current globalThis, such as \"window\", \"self\" or \"global\"\r\n// ensure errors are not thrown in an node SSR environment or web worker\r\ntypeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {});\r\nvar Plugins = Capacitor.Plugins;\r\nexport { Capacitor, Plugins };\r\n//# sourceMappingURL=global.js.map","export * from './core-plugin-definitions';\r\nexport * from './global';\r\nexport * from './web-plugins';\r\nexport * from './web/index';\r\n//# sourceMappingURL=index.js.map","export var extend = function (target) {\r\n    var objs = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        objs[_i - 1] = arguments[_i];\r\n    }\r\n    objs.forEach(function (o) {\r\n        if (o && typeof (o) === 'object') {\r\n            for (var k in o) {\r\n                if (o.hasOwnProperty(k)) {\r\n                    target[k] = o[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return target;\r\n};\r\nexport var uuid4 = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n};\r\n//# sourceMappingURL=util.js.map","import { Plugins } from './global';\r\nimport { mergeWebPlugins, mergeWebPlugin } from './web/index';\r\nexport * from './web/accessibility';\r\nexport * from './web/app';\r\nexport * from './web/browser';\r\nexport * from './web/camera';\r\nexport * from './web/clipboard';\r\nexport * from './web/filesystem';\r\nexport * from './web/geolocation';\r\nexport * from './web/device';\r\nexport * from './web/local-notifications';\r\nexport * from './web/share';\r\nexport * from './web/modals';\r\nexport * from './web/motion';\r\nexport * from './web/network';\r\nexport * from './web/permissions';\r\nexport * from './web/splash-screen';\r\nexport * from './web/storage';\r\nexport * from './web/toast';\r\nmergeWebPlugins(Plugins);\r\nexport var registerWebPlugin = function (plugin) {\r\n    mergeWebPlugin(Plugins, plugin);\r\n};\r\n//# sourceMappingURL=web-plugins.js.map","var CapacitorWeb = /** @class */ (function () {\r\n    function CapacitorWeb() {\r\n        var _this = this;\r\n        this.platform = 'web';\r\n        this.isNative = false;\r\n        // Need to assign here to avoid having to define every plugin but still\r\n        // get the typed benefits of the provided plugins in PluginRegistry\r\n        this.Plugins = {};\r\n        // Gracefully degrade in non-Proxy supporting engines, e.g. IE11. This\r\n        // effectively means that trying to access an unavailable plugin will\r\n        // locally throw, but this is still better than throwing a syntax error.\r\n        if (typeof Proxy !== 'undefined') {\r\n            // Build a proxy for the Plugins object that returns the \"Noop Plugin\"\r\n            // if a plugin isn't available\r\n            this.Plugins = new Proxy(this.Plugins, {\r\n                get: function (target, prop) {\r\n                    if (typeof target[prop] === 'undefined') {\r\n                        var thisRef_1 = _this;\r\n                        return new Proxy({}, {\r\n                            get: function (_target, _prop) {\r\n                                if (typeof _target[_prop] === 'undefined') {\r\n                                    return thisRef_1.pluginMethodNoop.bind(thisRef_1, _target, _prop, prop);\r\n                                }\r\n                                else {\r\n                                    return _target[_prop];\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        return target[prop];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    CapacitorWeb.prototype.pluginMethodNoop = function (_target, _prop, pluginName) {\r\n        return Promise.reject(pluginName + \" does not have web implementation.\");\r\n    };\r\n    CapacitorWeb.prototype.getPlatform = function () {\r\n        return this.platform;\r\n    };\r\n    CapacitorWeb.prototype.isPluginAvailable = function (name) {\r\n        return this.Plugins.hasOwnProperty(name);\r\n    };\r\n    CapacitorWeb.prototype.convertFileSrc = function (filePath) {\r\n        return filePath;\r\n    };\r\n    CapacitorWeb.prototype.handleError = function (e) {\r\n        console.error(e);\r\n    };\r\n    return CapacitorWeb;\r\n}());\r\nexport { CapacitorWeb };\r\n//# sourceMappingURL=web-runtime.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar AccessibilityPluginWeb = /** @class */ (function (_super) {\r\n    __extends(AccessibilityPluginWeb, _super);\r\n    function AccessibilityPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Accessibility',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    AccessibilityPluginWeb.prototype.isScreenReaderEnabled = function () {\r\n        throw new Error('Feature not available in the browser');\r\n    };\r\n    AccessibilityPluginWeb.prototype.speak = function (options) {\r\n        if (!('speechSynthesis' in window)) {\r\n            return Promise.reject('Browser does not support the Speech Synthesis API');\r\n        }\r\n        var utterance = new SpeechSynthesisUtterance(options.value);\r\n        if (options.language) {\r\n            utterance.lang = options.language;\r\n        }\r\n        window.speechSynthesis.speak(utterance);\r\n        return Promise.resolve();\r\n    };\r\n    return AccessibilityPluginWeb;\r\n}(WebPlugin));\r\nexport { AccessibilityPluginWeb };\r\nvar Accessibility = new AccessibilityPluginWeb();\r\nexport { Accessibility };\r\n//# sourceMappingURL=accessibility.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar AppPluginWeb = /** @class */ (function (_super) {\r\n    __extends(AppPluginWeb, _super);\r\n    function AppPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'App',\r\n            platforms: ['web']\r\n        }) || this;\r\n        if (typeof document !== 'undefined') {\r\n            document.addEventListener('visibilitychange', _this.handleVisibilityChange.bind(_this), false);\r\n        }\r\n        return _this;\r\n    }\r\n    AppPluginWeb.prototype.exitApp = function () {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    AppPluginWeb.prototype.canOpenUrl = function (_options) {\r\n        return Promise.resolve({ value: true });\r\n    };\r\n    AppPluginWeb.prototype.openUrl = function (_options) {\r\n        return Promise.resolve({ completed: true });\r\n    };\r\n    AppPluginWeb.prototype.getLaunchUrl = function () {\r\n        return Promise.resolve({ url: '' });\r\n    };\r\n    AppPluginWeb.prototype.getState = function () {\r\n        return Promise.resolve({ isActive: document.hidden !== true });\r\n    };\r\n    AppPluginWeb.prototype.handleVisibilityChange = function () {\r\n        var data = {\r\n            isActive: document.hidden !== true\r\n        };\r\n        this.notifyListeners('appStateChange', data);\r\n    };\r\n    return AppPluginWeb;\r\n}(WebPlugin));\r\nexport { AppPluginWeb };\r\nvar App = new AppPluginWeb();\r\nexport { App };\r\n//# sourceMappingURL=app.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar BrowserPluginWeb = /** @class */ (function (_super) {\r\n    __extends(BrowserPluginWeb, _super);\r\n    function BrowserPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Browser',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    BrowserPluginWeb.prototype.open = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._lastWindow = window.open(options.url, options.windowName || '_blank');\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    BrowserPluginWeb.prototype.prefetch = function (_options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                // Does nothing\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    BrowserPluginWeb.prototype.close = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._lastWindow && this._lastWindow.close();\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    return BrowserPluginWeb;\r\n}(WebPlugin));\r\nexport { BrowserPluginWeb };\r\nvar Browser = new BrowserPluginWeb();\r\nexport { Browser };\r\n//# sourceMappingURL=browser.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { CameraResultType, CameraDirection, CameraSource } from '../core-plugin-definitions';\r\nvar CameraPluginWeb = /** @class */ (function (_super) {\r\n    __extends(CameraPluginWeb, _super);\r\n    function CameraPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Camera',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    CameraPluginWeb.prototype.getPhoto = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var cameraModal_1, e_1;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    if (!options.webUseInput) return [3 /*break*/, 1];\r\n                                    this.fileInputExperience(options, resolve);\r\n                                    return [3 /*break*/, 7];\r\n                                case 1:\r\n                                    if (!customElements.get('pwa-camera-modal')) return [3 /*break*/, 6];\r\n                                    cameraModal_1 = document.createElement('pwa-camera-modal');\r\n                                    document.body.appendChild(cameraModal_1);\r\n                                    _a.label = 2;\r\n                                case 2:\r\n                                    _a.trys.push([2, 4, , 5]);\r\n                                    return [4 /*yield*/, cameraModal_1.componentOnReady()];\r\n                                case 3:\r\n                                    _a.sent();\r\n                                    cameraModal_1.addEventListener('onPhoto', function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n                                        var photo, _a;\r\n                                        return __generator(this, function (_b) {\r\n                                            switch (_b.label) {\r\n                                                case 0:\r\n                                                    photo = e.detail;\r\n                                                    if (!(photo === null)) return [3 /*break*/, 1];\r\n                                                    reject('User cancelled photos app');\r\n                                                    return [3 /*break*/, 4];\r\n                                                case 1:\r\n                                                    if (!(photo instanceof Error)) return [3 /*break*/, 2];\r\n                                                    reject(photo.message);\r\n                                                    return [3 /*break*/, 4];\r\n                                                case 2:\r\n                                                    _a = resolve;\r\n                                                    return [4 /*yield*/, this._getCameraPhoto(photo, options)];\r\n                                                case 3:\r\n                                                    _a.apply(void 0, [_b.sent()]);\r\n                                                    _b.label = 4;\r\n                                                case 4:\r\n                                                    cameraModal_1.dismiss();\r\n                                                    document.body.removeChild(cameraModal_1);\r\n                                                    return [2 /*return*/];\r\n                                            }\r\n                                        });\r\n                                    }); });\r\n                                    cameraModal_1.present();\r\n                                    return [3 /*break*/, 5];\r\n                                case 4:\r\n                                    e_1 = _a.sent();\r\n                                    this.fileInputExperience(options, resolve);\r\n                                    return [3 /*break*/, 5];\r\n                                case 5: return [3 /*break*/, 7];\r\n                                case 6:\r\n                                    console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.\");\r\n                                    this.fileInputExperience(options, resolve);\r\n                                    _a.label = 7;\r\n                                case 7: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    CameraPluginWeb.prototype.fileInputExperience = function (options, resolve) {\r\n        var input = document.querySelector('#_capacitor-camera-input');\r\n        var cleanup = function () {\r\n            input.parentNode && input.parentNode.removeChild(input);\r\n        };\r\n        if (!input) {\r\n            input = document.createElement('input');\r\n            input.id = '_capacitor-camera-input';\r\n            input.type = 'file';\r\n            document.body.appendChild(input);\r\n        }\r\n        input.accept = 'image/*';\r\n        input.capture = true;\r\n        if (options.source === CameraSource.Photos || options.source === CameraSource.Prompt) {\r\n            input.removeAttribute('capture');\r\n        }\r\n        else if (options.direction === CameraDirection.Front) {\r\n            input.capture = 'user';\r\n        }\r\n        else if (options.direction === CameraDirection.Rear) {\r\n            input.capture = 'environment';\r\n        }\r\n        input.addEventListener('change', function (_e) {\r\n            var file = input.files[0];\r\n            var format = 'jpeg';\r\n            if (file.type === 'image/png') {\r\n                format = 'png';\r\n            }\r\n            else if (file.type === 'image/gif') {\r\n                format = 'gif';\r\n            }\r\n            if (options.resultType === CameraResultType.DataUrl || options.resultType === CameraResultType.Base64) {\r\n                var reader_1 = new FileReader();\r\n                reader_1.addEventListener('load', function () {\r\n                    if (options.resultType === CameraResultType.DataUrl) {\r\n                        resolve({\r\n                            dataUrl: reader_1.result,\r\n                            format: format\r\n                        });\r\n                    }\r\n                    else if (options.resultType === CameraResultType.Base64) {\r\n                        var b64 = reader_1.result.split(',')[1];\r\n                        resolve({\r\n                            base64String: b64,\r\n                            format: format\r\n                        });\r\n                    }\r\n                    cleanup();\r\n                });\r\n                reader_1.readAsDataURL(file);\r\n            }\r\n            else {\r\n                resolve({\r\n                    webPath: URL.createObjectURL(file),\r\n                    format: format\r\n                });\r\n                cleanup();\r\n            }\r\n        });\r\n        input.click();\r\n    };\r\n    CameraPluginWeb.prototype._getCameraPhoto = function (photo, options) {\r\n        return new Promise(function (resolve, reject) {\r\n            var reader = new FileReader();\r\n            var format = photo.type.split('/')[1];\r\n            if (options.resultType === CameraResultType.Uri) {\r\n                resolve({\r\n                    webPath: URL.createObjectURL(photo),\r\n                    format: format\r\n                });\r\n            }\r\n            else {\r\n                reader.readAsDataURL(photo);\r\n                reader.onloadend = function () {\r\n                    var r = reader.result;\r\n                    if (options.resultType === CameraResultType.DataUrl) {\r\n                        resolve({\r\n                            dataUrl: r,\r\n                            format: format\r\n                        });\r\n                    }\r\n                    else {\r\n                        resolve({\r\n                            base64String: r.split(',')[1],\r\n                            format: format\r\n                        });\r\n                    }\r\n                };\r\n                reader.onerror = function (e) {\r\n                    reject(e);\r\n                };\r\n            }\r\n        });\r\n    };\r\n    return CameraPluginWeb;\r\n}(WebPlugin));\r\nexport { CameraPluginWeb };\r\nvar Camera = new CameraPluginWeb();\r\nexport { Camera };\r\n//# sourceMappingURL=camera.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar ClipboardPluginWeb = /** @class */ (function (_super) {\r\n    __extends(ClipboardPluginWeb, _super);\r\n    function ClipboardPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Clipboard',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    ClipboardPluginWeb.prototype.write = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blob, clipboardItemInput, err_1;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!navigator.clipboard) {\r\n                            return [2 /*return*/, Promise.reject('Clipboard API not available in this browser')];\r\n                        }\r\n                        if (!(options.string !== undefined || options.url)) return [3 /*break*/, 2];\r\n                        if (!navigator.clipboard.writeText) {\r\n                            return [2 /*return*/, Promise.reject('Writting to clipboard not supported in this browser')];\r\n                        }\r\n                        return [4 /*yield*/, navigator.clipboard.writeText(options.string !== undefined ? options.string : options.url)];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 10];\r\n                    case 2:\r\n                        if (!options.image) return [3 /*break*/, 9];\r\n                        if (!navigator.clipboard.write) {\r\n                            return [2 /*return*/, Promise.reject('Setting images not supported in this browser')];\r\n                        }\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _b.trys.push([3, 7, , 8]);\r\n                        return [4 /*yield*/, fetch(options.image)];\r\n                    case 4: return [4 /*yield*/, (_b.sent()).blob()];\r\n                    case 5:\r\n                        blob = _b.sent();\r\n                        clipboardItemInput = new ClipboardItem((_a = {}, _a[blob.type] = blob, _a));\r\n                        return [4 /*yield*/, navigator.clipboard.write([clipboardItemInput])];\r\n                    case 6:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        err_1 = _b.sent();\r\n                        return [2 /*return*/, Promise.reject('Failed to write image')];\r\n                    case 8: return [3 /*break*/, 10];\r\n                    case 9: return [2 /*return*/, Promise.reject('Nothing to write')];\r\n                    case 10: return [2 /*return*/, Promise.resolve()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ClipboardPluginWeb.prototype.read = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var clipboardItems, type, clipboardBlob, data, err_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!navigator.clipboard) {\r\n                            return [2 /*return*/, Promise.reject('Clipboard API not available in this browser')];\r\n                        }\r\n                        if (!!navigator.clipboard.read) return [3 /*break*/, 1];\r\n                        if (!navigator.clipboard.readText) {\r\n                            return [2 /*return*/, Promise.reject('Reading from clipboard not supported in this browser')];\r\n                        }\r\n                        return [2 /*return*/, this.readText()];\r\n                    case 1:\r\n                        _a.trys.push([1, 5, , 6]);\r\n                        return [4 /*yield*/, navigator.clipboard.read()];\r\n                    case 2:\r\n                        clipboardItems = _a.sent();\r\n                        type = clipboardItems[0].types[0];\r\n                        return [4 /*yield*/, clipboardItems[0].getType(type)];\r\n                    case 3:\r\n                        clipboardBlob = _a.sent();\r\n                        return [4 /*yield*/, this._getBlobData(clipboardBlob, type)];\r\n                    case 4:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, Promise.resolve({ value: data, type: type })];\r\n                    case 5:\r\n                        err_2 = _a.sent();\r\n                        return [2 /*return*/, this.readText()];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ClipboardPluginWeb.prototype.readText = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var text;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, navigator.clipboard.readText()];\r\n                    case 1:\r\n                        text = _a.sent();\r\n                        return [2 /*return*/, Promise.resolve({ value: text, type: 'text/plain' })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ClipboardPluginWeb.prototype._getBlobData = function (clipboardBlob, type) {\r\n        return new Promise(function (resolve, reject) {\r\n            var reader = new FileReader();\r\n            if (type.includes('image')) {\r\n                reader.readAsDataURL(clipboardBlob);\r\n            }\r\n            else {\r\n                reader.readAsText(clipboardBlob);\r\n            }\r\n            reader.onloadend = function () {\r\n                var r = reader.result;\r\n                resolve(r);\r\n            };\r\n            reader.onerror = function (e) {\r\n                reject(e);\r\n            };\r\n        });\r\n    };\r\n    return ClipboardPluginWeb;\r\n}(WebPlugin));\r\nexport { ClipboardPluginWeb };\r\nvar Clipboard = new ClipboardPluginWeb();\r\nexport { Clipboard };\r\n//# sourceMappingURL=clipboard.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { uuid4 } from '../util';\r\nvar DevicePluginWeb = /** @class */ (function (_super) {\r\n    __extends(DevicePluginWeb, _super);\r\n    function DevicePluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Device',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    DevicePluginWeb.prototype.getInfo = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ua, uaFields;\r\n            return __generator(this, function (_a) {\r\n                ua = navigator.userAgent;\r\n                uaFields = this.parseUa(ua);\r\n                return [2 /*return*/, Promise.resolve({\r\n                        model: uaFields.model,\r\n                        platform: 'web',\r\n                        appVersion: '',\r\n                        appBuild: '',\r\n                        appId: '',\r\n                        appName: '',\r\n                        operatingSystem: uaFields.operatingSystem,\r\n                        osVersion: uaFields.osVersion,\r\n                        manufacturer: navigator.vendor,\r\n                        isVirtual: false,\r\n                        uuid: this.getUid()\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    DevicePluginWeb.prototype.getBatteryInfo = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var battery, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        battery = {};\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, navigator.getBattery()];\r\n                    case 2:\r\n                        battery = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/, Promise.resolve({\r\n                            batteryLevel: battery.level,\r\n                            isCharging: battery.charging\r\n                        })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DevicePluginWeb.prototype.getLanguageCode = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, {\r\n                        value: navigator.language\r\n                    }];\r\n            });\r\n        });\r\n    };\r\n    DevicePluginWeb.prototype.parseUa = function (_ua) {\r\n        var uaFields = {};\r\n        var start = _ua.indexOf('(') + 1;\r\n        var end = _ua.indexOf(') AppleWebKit');\r\n        if (_ua.indexOf(') Gecko') !== -1) {\r\n            end = _ua.indexOf(') Gecko');\r\n        }\r\n        var fields = _ua.substring(start, end);\r\n        if (_ua.indexOf('Android') !== -1) {\r\n            uaFields.model = fields.replace('; wv', '').split('; ').pop().split(' Build')[0];\r\n            uaFields.osVersion = fields.split('; ')[1];\r\n        }\r\n        else {\r\n            uaFields.model = fields.split('; ')[0];\r\n            if (navigator.oscpu) {\r\n                uaFields.osVersion = navigator.oscpu;\r\n            }\r\n            else {\r\n                if (_ua.indexOf('Windows') !== -1) {\r\n                    uaFields.osVersion = fields;\r\n                }\r\n                else {\r\n                    var lastParts = fields.split('; ').pop().replace(' like Mac OS X', '').split(' ');\r\n                    uaFields.osVersion = lastParts[lastParts.length - 1].replace(/_/g, '.');\r\n                }\r\n            }\r\n        }\r\n        if (/android/i.test(_ua)) {\r\n            uaFields.operatingSystem = 'android';\r\n        }\r\n        else if (/iPad|iPhone|iPod/.test(_ua) && !window.MSStream) {\r\n            uaFields.operatingSystem = 'ios';\r\n        }\r\n        else if (/Win/.test(_ua)) {\r\n            uaFields.operatingSystem = 'windows';\r\n        }\r\n        else if (/Mac/i.test(_ua)) {\r\n            uaFields.operatingSystem = 'mac';\r\n        }\r\n        else {\r\n            uaFields.operatingSystem = 'unknown';\r\n        }\r\n        return uaFields;\r\n    };\r\n    DevicePluginWeb.prototype.getUid = function () {\r\n        var uid = window.localStorage.getItem('_capuid');\r\n        if (uid) {\r\n            return uid;\r\n        }\r\n        uid = uuid4();\r\n        window.localStorage.setItem('_capuid', uid);\r\n        return uid;\r\n    };\r\n    return DevicePluginWeb;\r\n}(WebPlugin));\r\nexport { DevicePluginWeb };\r\nvar Device = new DevicePluginWeb();\r\nexport { Device };\r\n//# sourceMappingURL=device.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { FilesystemDirectory } from '../core-plugin-definitions';\r\nvar FilesystemPluginWeb = /** @class */ (function (_super) {\r\n    __extends(FilesystemPluginWeb, _super);\r\n    function FilesystemPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Filesystem',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.DEFAULT_DIRECTORY = FilesystemDirectory.Data;\r\n        _this.DB_VERSION = 1;\r\n        _this.DB_NAME = 'Disc';\r\n        _this._writeCmds = ['add', 'put', 'delete'];\r\n        return _this;\r\n    }\r\n    FilesystemPluginWeb.prototype.initDb = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this._db !== undefined) {\r\n                    return [2 /*return*/, this._db];\r\n                }\r\n                if (!('indexedDB' in window)) {\r\n                    throw new Error('This browser doesn\\'t support IndexedDB');\r\n                }\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        var request = indexedDB.open(_this.DB_NAME, _this.DB_VERSION);\r\n                        request.onupgradeneeded = FilesystemPluginWeb.doUpgrade;\r\n                        request.onsuccess = function () {\r\n                            _this._db = request.result;\r\n                            resolve(request.result);\r\n                        };\r\n                        request.onerror = function () { return reject(request.error); };\r\n                        request.onblocked = function () {\r\n                            console.warn('db blocked');\r\n                        };\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb.doUpgrade = function (event) {\r\n        var eventTarget = event.target;\r\n        var db = eventTarget.result;\r\n        switch (event.oldVersion) {\r\n            case 0:\r\n            case 1:\r\n            default:\r\n                if (db.objectStoreNames.contains('FileStorage')) {\r\n                    db.deleteObjectStore('FileStorage');\r\n                }\r\n                var store = db.createObjectStore('FileStorage', { keyPath: 'path' });\r\n                store.createIndex('by_folder', 'folder');\r\n        }\r\n    };\r\n    FilesystemPluginWeb.prototype.dbRequest = function (cmd, args) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var readFlag;\r\n            return __generator(this, function (_a) {\r\n                readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\r\n                return [2 /*return*/, this.initDb()\r\n                        .then(function (conn) {\r\n                        return new Promise(function (resolve, reject) {\r\n                            var tx = conn.transaction(['FileStorage'], readFlag);\r\n                            var store = tx.objectStore('FileStorage');\r\n                            var req = store[cmd].apply(store, args);\r\n                            req.onsuccess = function () { return resolve(req.result); };\r\n                            req.onerror = function () { return reject(req.error); };\r\n                        });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb.prototype.dbIndexRequest = function (indexName, cmd, args) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var readFlag;\r\n            return __generator(this, function (_a) {\r\n                readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\r\n                return [2 /*return*/, this.initDb()\r\n                        .then(function (conn) {\r\n                        return new Promise(function (resolve, reject) {\r\n                            var tx = conn.transaction(['FileStorage'], readFlag);\r\n                            var store = tx.objectStore('FileStorage');\r\n                            var index = store.index(indexName);\r\n                            var req = index[cmd].apply(index, args);\r\n                            req.onsuccess = function () { return resolve(req.result); };\r\n                            req.onerror = function () { return reject(req.error); };\r\n                        });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb.prototype.getPath = function (directory, uriPath) {\r\n        directory = directory || this.DEFAULT_DIRECTORY;\r\n        var cleanedUriPath = uriPath !== undefined ? uriPath.replace(/^[/]+|[/]+$/g, '') : '';\r\n        var fsPath = '/' + directory;\r\n        if (uriPath !== '')\r\n            fsPath += '/' + cleanedUriPath;\r\n        return fsPath;\r\n    };\r\n    FilesystemPluginWeb.prototype.clear = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var conn, tx, store;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.initDb()];\r\n                    case 1:\r\n                        conn = _a.sent();\r\n                        tx = conn.transaction(['FileStorage'], 'readwrite');\r\n                        store = tx.objectStore('FileStorage');\r\n                        store.clear();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Read a file from disk\r\n     * @param options options for the file read\r\n     * @return a promise that resolves with the read file data result\r\n     */\r\n    FilesystemPluginWeb.prototype.readFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (entry === undefined)\r\n                            throw Error('File does not exist.');\r\n                        return [2 /*return*/, { data: entry.content }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Write a file to disk in the specified location on device\r\n     * @param options options for the file write\r\n     * @return a promise that resolves with the file write result\r\n     */\r\n    FilesystemPluginWeb.prototype.writeFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, data, doRecursive, occupiedEntry, encoding, parentPath, parentEntry, subDirIndex, parentArgPath, now, pathObj;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        data = options.data;\r\n                        doRecursive = options.recursive;\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        occupiedEntry = _a.sent();\r\n                        if (occupiedEntry && occupiedEntry.type === 'directory')\r\n                            throw ('The supplied path is a directory.');\r\n                        encoding = options.encoding;\r\n                        parentPath = path.substr(0, path.lastIndexOf('/'));\r\n                        return [4 /*yield*/, this.dbRequest('get', [parentPath])];\r\n                    case 2:\r\n                        parentEntry = _a.sent();\r\n                        if (!(parentEntry === undefined)) return [3 /*break*/, 4];\r\n                        subDirIndex = parentPath.indexOf('/', 1);\r\n                        if (!(subDirIndex !== -1)) return [3 /*break*/, 4];\r\n                        parentArgPath = parentPath.substr(subDirIndex);\r\n                        return [4 /*yield*/, this.mkdir({ path: parentArgPath, directory: options.directory, recursive: doRecursive })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        now = Date.now();\r\n                        pathObj = {\r\n                            path: path,\r\n                            folder: parentPath,\r\n                            type: 'file',\r\n                            size: data.length,\r\n                            ctime: now,\r\n                            mtime: now,\r\n                            content: !encoding && data.indexOf(',') >= 0 ? data.split(',')[1] : data,\r\n                        };\r\n                        return [4 /*yield*/, this.dbRequest('put', [pathObj])];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {\r\n                                uri: pathObj.path\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Append to a file on disk in the specified location on device\r\n     * @param options options for the file append\r\n     * @return a promise that resolves with the file write result\r\n     */\r\n    FilesystemPluginWeb.prototype.appendFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, data, parentPath, now, ctime, occupiedEntry, parentEntry, subDirIndex, parentArgPath, pathObj;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        data = options.data;\r\n                        parentPath = path.substr(0, path.lastIndexOf('/'));\r\n                        now = Date.now();\r\n                        ctime = now;\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        occupiedEntry = _a.sent();\r\n                        if (occupiedEntry && occupiedEntry.type === 'directory')\r\n                            throw ('The supplied path is a directory.');\r\n                        return [4 /*yield*/, this.dbRequest('get', [parentPath])];\r\n                    case 2:\r\n                        parentEntry = _a.sent();\r\n                        if (!(parentEntry === undefined)) return [3 /*break*/, 4];\r\n                        subDirIndex = parentPath.indexOf('/', 1);\r\n                        if (!(subDirIndex !== -1)) return [3 /*break*/, 4];\r\n                        parentArgPath = parentPath.substr(subDirIndex);\r\n                        return [4 /*yield*/, this.mkdir({ path: parentArgPath, directory: options.directory, recursive: true })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        if (occupiedEntry !== undefined) {\r\n                            data = occupiedEntry.content + data;\r\n                            ctime = occupiedEntry.ctime;\r\n                        }\r\n                        pathObj = {\r\n                            path: path,\r\n                            folder: parentPath,\r\n                            type: 'file',\r\n                            size: data.length,\r\n                            ctime: ctime,\r\n                            mtime: now,\r\n                            content: data\r\n                        };\r\n                        return [4 /*yield*/, this.dbRequest('put', [pathObj])];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Delete a file from disk\r\n     * @param options options for the file delete\r\n     * @return a promise that resolves with the deleted file data result\r\n     */\r\n    FilesystemPluginWeb.prototype.deleteFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry, entries;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (entry === undefined)\r\n                            throw Error('File does not exist.');\r\n                        return [4 /*yield*/, this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)])];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (entries.length !== 0)\r\n                            throw Error('Folder is not empty.');\r\n                        return [4 /*yield*/, this.dbRequest('delete', [path])];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Create a directory.\r\n     * @param options options for the mkdir\r\n     * @return a promise that resolves with the mkdir result\r\n     */\r\n    FilesystemPluginWeb.prototype.mkdir = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, doRecursive, parentPath, depth, parentEntry, occupiedEntry, parentArgPath, now, pathObj;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        doRecursive = options.recursive;\r\n                        parentPath = path.substr(0, path.lastIndexOf('/'));\r\n                        depth = (path.match(/\\//g) || []).length;\r\n                        return [4 /*yield*/, this.dbRequest('get', [parentPath])];\r\n                    case 1:\r\n                        parentEntry = _a.sent();\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 2:\r\n                        occupiedEntry = _a.sent();\r\n                        if (depth === 1)\r\n                            throw Error('Cannot create Root directory');\r\n                        if (occupiedEntry !== undefined)\r\n                            throw Error('Current directory does already exist.');\r\n                        if (!doRecursive && depth !== 2 && parentEntry === undefined)\r\n                            throw Error('Parent directory must exist');\r\n                        if (!(doRecursive && depth !== 2 && parentEntry === undefined)) return [3 /*break*/, 4];\r\n                        parentArgPath = parentPath.substr(parentPath.indexOf('/', 1));\r\n                        return [4 /*yield*/, this.mkdir({\r\n                                path: parentArgPath,\r\n                                directory: options.directory,\r\n                                recursive: doRecursive\r\n                            })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        now = Date.now();\r\n                        pathObj = { path: path, folder: parentPath, type: 'directory', size: 0, ctime: now, mtime: now };\r\n                        return [4 /*yield*/, this.dbRequest('put', [pathObj])];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Remove a directory\r\n     * @param options the options for the directory remove\r\n     */\r\n    FilesystemPluginWeb.prototype.rmdir = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, directory, recursive, fullPath, entry, readDirResult, _i, _a, entry_1, entryPath, entryObj;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        path = options.path, directory = options.directory, recursive = options.recursive;\r\n                        fullPath = this.getPath(directory, path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [fullPath])];\r\n                    case 1:\r\n                        entry = _b.sent();\r\n                        if (entry === undefined)\r\n                            throw Error('Folder does not exist.');\r\n                        if (entry.type !== 'directory')\r\n                            throw Error('Requested path is not a directory');\r\n                        return [4 /*yield*/, this.readdir({ path: path, directory: directory })];\r\n                    case 2:\r\n                        readDirResult = _b.sent();\r\n                        if (readDirResult.files.length !== 0 && !recursive)\r\n                            throw Error('Folder is not empty');\r\n                        _i = 0, _a = readDirResult.files;\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        if (!(_i < _a.length)) return [3 /*break*/, 9];\r\n                        entry_1 = _a[_i];\r\n                        entryPath = path + \"/\" + entry_1;\r\n                        return [4 /*yield*/, this.stat({ path: entryPath, directory: directory })];\r\n                    case 4:\r\n                        entryObj = _b.sent();\r\n                        if (!(entryObj.type === 'file')) return [3 /*break*/, 6];\r\n                        return [4 /*yield*/, this.deleteFile({ path: entryPath, directory: directory })];\r\n                    case 5:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 6: return [4 /*yield*/, this.rmdir({ path: entryPath, directory: directory, recursive: recursive })];\r\n                    case 7:\r\n                        _b.sent();\r\n                        _b.label = 8;\r\n                    case 8:\r\n                        _i++;\r\n                        return [3 /*break*/, 3];\r\n                    case 9: return [4 /*yield*/, this.dbRequest('delete', [fullPath])];\r\n                    case 10:\r\n                        _b.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Return a list of files from the directory (not recursive)\r\n     * @param options the options for the readdir operation\r\n     * @return a promise that resolves with the readdir directory listing result\r\n     */\r\n    FilesystemPluginWeb.prototype.readdir = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry, entries, names;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (options.path !== '' && entry === undefined)\r\n                            throw Error('Folder does not exist.');\r\n                        return [4 /*yield*/, this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)])];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        names = entries.map(function (e) {\r\n                            return e.substring(path.length + 1);\r\n                        });\r\n                        return [2 /*return*/, { files: names }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Return full File URI for a path and directory\r\n     * @param options the options for the stat operation\r\n     * @return a promise that resolves with the file stat result\r\n     */\r\n    FilesystemPluginWeb.prototype.getUri = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (!(entry === undefined)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.dbRequest('get', [path + '/'])];\r\n                    case 2:\r\n                        entry = (_a.sent());\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        if (entry === undefined)\r\n                            throw Error('Entry does not exist.');\r\n                        return [2 /*return*/, {\r\n                                uri: entry.path\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Return data about a file\r\n     * @param options the options for the stat operation\r\n     * @return a promise that resolves with the file stat result\r\n     */\r\n    FilesystemPluginWeb.prototype.stat = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (!(entry === undefined)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.dbRequest('get', [path + '/'])];\r\n                    case 2:\r\n                        entry = (_a.sent());\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        if (entry === undefined)\r\n                            throw Error('Entry does not exist.');\r\n                        return [2 /*return*/, {\r\n                                type: entry.type,\r\n                                size: entry.size,\r\n                                ctime: entry.ctime,\r\n                                mtime: entry.mtime,\r\n                                uri: entry.path\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Rename a file or directory\r\n     * @param options the options for the rename operation\r\n     * @return a promise that resolves with the rename result\r\n     */\r\n    FilesystemPluginWeb.prototype.rename = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._copy(options, true)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Copy a file or directory\r\n     * @param options the options for the copy operation\r\n     * @return a promise that resolves with the copy result\r\n     */\r\n    FilesystemPluginWeb.prototype.copy = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._copy(options, false)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Function that can perform a copy or a rename\r\n     * @param options the options for the rename operation\r\n     * @param doRename whether to perform a rename or copy operation\r\n     * @return a promise that resolves with the result\r\n     */\r\n    FilesystemPluginWeb.prototype._copy = function (options, doRename) {\r\n        if (doRename === void 0) { doRename = false; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var to, from, fromDirectory, toDirectory, fromPath, toPath, toObj, e_1, toPathComponents, toPath_1, toParentDirectory, fromObj, updateTime, _a, file, e_2, contents, _i, contents_1, filename;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        to = options.to, from = options.from, fromDirectory = options.directory, toDirectory = options.toDirectory;\r\n                        if (!to || !from) {\r\n                            throw Error('Both to and from must be provided');\r\n                        }\r\n                        // If no \"to\" directory is provided, use the \"from\" directory\r\n                        if (!toDirectory) {\r\n                            toDirectory = fromDirectory;\r\n                        }\r\n                        fromPath = this.getPath(fromDirectory, from);\r\n                        toPath = this.getPath(toDirectory, to);\r\n                        // Test that the \"to\" and \"from\" locations are different\r\n                        if (fromPath === toPath) {\r\n                            return [2 /*return*/, {}];\r\n                        }\r\n                        if (toPath.startsWith(fromPath)) {\r\n                            throw Error('To path cannot contain the from path');\r\n                        }\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 6]);\r\n                        return [4 /*yield*/, this.stat({\r\n                                path: to,\r\n                                directory: toDirectory\r\n                            })];\r\n                    case 2:\r\n                        toObj = _b.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 3:\r\n                        e_1 = _b.sent();\r\n                        toPathComponents = to.split('/');\r\n                        toPathComponents.pop();\r\n                        toPath_1 = toPathComponents.join('/');\r\n                        if (!(toPathComponents.length > 0)) return [3 /*break*/, 5];\r\n                        return [4 /*yield*/, this.stat({\r\n                                path: toPath_1,\r\n                                directory: toDirectory,\r\n                            })];\r\n                    case 4:\r\n                        toParentDirectory = _b.sent();\r\n                        if (toParentDirectory.type !== 'directory') {\r\n                            throw new Error('Parent directory of the to path is a file');\r\n                        }\r\n                        _b.label = 5;\r\n                    case 5: return [3 /*break*/, 6];\r\n                    case 6:\r\n                        // Cannot overwrite a directory\r\n                        if (toObj && toObj.type === 'directory') {\r\n                            throw new Error('Cannot overwrite a directory with a file');\r\n                        }\r\n                        return [4 /*yield*/, this.stat({\r\n                                path: from,\r\n                                directory: fromDirectory,\r\n                            })];\r\n                    case 7:\r\n                        fromObj = _b.sent();\r\n                        updateTime = function (path, ctime, mtime) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var fullPath, entry;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        fullPath = this.getPath(toDirectory, path);\r\n                                        return [4 /*yield*/, this.dbRequest('get', [fullPath])];\r\n                                    case 1:\r\n                                        entry = _a.sent();\r\n                                        entry.ctime = ctime;\r\n                                        entry.mtime = mtime;\r\n                                        return [4 /*yield*/, this.dbRequest('put', [entry])];\r\n                                    case 2:\r\n                                        _a.sent();\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        }); };\r\n                        _a = fromObj.type;\r\n                        switch (_a) {\r\n                            case 'file': return [3 /*break*/, 8];\r\n                            case 'directory': return [3 /*break*/, 15];\r\n                        }\r\n                        return [3 /*break*/, 28];\r\n                    case 8: return [4 /*yield*/, this.readFile({\r\n                            path: from,\r\n                            directory: fromDirectory\r\n                        })];\r\n                    case 9:\r\n                        file = _b.sent();\r\n                        if (!doRename) return [3 /*break*/, 11];\r\n                        return [4 /*yield*/, this.deleteFile({\r\n                                path: from,\r\n                                directory: fromDirectory\r\n                            })];\r\n                    case 10:\r\n                        _b.sent();\r\n                        _b.label = 11;\r\n                    case 11: \r\n                    // Write the file to the new location\r\n                    return [4 /*yield*/, this.writeFile({\r\n                            path: to,\r\n                            directory: toDirectory,\r\n                            data: file.data\r\n                        })];\r\n                    case 12:\r\n                        // Write the file to the new location\r\n                        _b.sent();\r\n                        if (!doRename) return [3 /*break*/, 14];\r\n                        return [4 /*yield*/, updateTime(to, fromObj.ctime, fromObj.mtime)];\r\n                    case 13:\r\n                        _b.sent();\r\n                        _b.label = 14;\r\n                    case 14: \r\n                    // Resolve promise\r\n                    return [2 /*return*/, {}];\r\n                    case 15:\r\n                        if (toObj) {\r\n                            throw Error('Cannot move a directory over an existing object');\r\n                        }\r\n                        _b.label = 16;\r\n                    case 16:\r\n                        _b.trys.push([16, 20, , 21]);\r\n                        // Create the to directory\r\n                        return [4 /*yield*/, this.mkdir({\r\n                                path: to,\r\n                                directory: toDirectory,\r\n                                recursive: false,\r\n                            })];\r\n                    case 17:\r\n                        // Create the to directory\r\n                        _b.sent();\r\n                        if (!doRename) return [3 /*break*/, 19];\r\n                        return [4 /*yield*/, updateTime(to, fromObj.ctime, fromObj.mtime)];\r\n                    case 18:\r\n                        _b.sent();\r\n                        _b.label = 19;\r\n                    case 19: return [3 /*break*/, 21];\r\n                    case 20:\r\n                        e_2 = _b.sent();\r\n                        return [3 /*break*/, 21];\r\n                    case 21: return [4 /*yield*/, this.readdir({\r\n                            path: from,\r\n                            directory: fromDirectory,\r\n                        })];\r\n                    case 22:\r\n                        contents = (_b.sent()).files;\r\n                        _i = 0, contents_1 = contents;\r\n                        _b.label = 23;\r\n                    case 23:\r\n                        if (!(_i < contents_1.length)) return [3 /*break*/, 26];\r\n                        filename = contents_1[_i];\r\n                        // Move item from the from directory to the to directory\r\n                        return [4 /*yield*/, this._copy({\r\n                                from: from + \"/\" + filename,\r\n                                to: to + \"/\" + filename,\r\n                                directory: fromDirectory,\r\n                                toDirectory: toDirectory,\r\n                            }, doRename)];\r\n                    case 24:\r\n                        // Move item from the from directory to the to directory\r\n                        _b.sent();\r\n                        _b.label = 25;\r\n                    case 25:\r\n                        _i++;\r\n                        return [3 /*break*/, 23];\r\n                    case 26:\r\n                        if (!doRename) return [3 /*break*/, 28];\r\n                        return [4 /*yield*/, this.rmdir({\r\n                                path: from,\r\n                                directory: fromDirectory\r\n                            })];\r\n                    case 27:\r\n                        _b.sent();\r\n                        _b.label = 28;\r\n                    case 28: return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb._debug = true;\r\n    return FilesystemPluginWeb;\r\n}(WebPlugin));\r\nexport { FilesystemPluginWeb };\r\nvar Filesystem = new FilesystemPluginWeb();\r\nexport { Filesystem };\r\n//# sourceMappingURL=filesystem.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { extend } from '../util';\r\nvar GeolocationPluginWeb = /** @class */ (function (_super) {\r\n    __extends(GeolocationPluginWeb, _super);\r\n    function GeolocationPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Geolocation',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    GeolocationPluginWeb.prototype.getCurrentPosition = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            return _this.requestPermissions().then(function (_result) {\r\n                window.navigator.geolocation.getCurrentPosition(function (pos) {\r\n                    resolve(pos);\r\n                }, function (err) {\r\n                    reject(err);\r\n                }, extend({\r\n                    enableHighAccuracy: true,\r\n                    timeout: 10000,\r\n                    maximumAge: 0\r\n                }, options));\r\n            });\r\n        });\r\n    };\r\n    GeolocationPluginWeb.prototype.watchPosition = function (options, callback) {\r\n        var id = window.navigator.geolocation.watchPosition(function (pos) {\r\n            callback(pos);\r\n        }, function (err) {\r\n            callback(null, err);\r\n        }, extend({\r\n            enableHighAccuracy: true,\r\n            timeout: 10000,\r\n            maximumAge: 0\r\n        }, options));\r\n        return \"\" + id;\r\n    };\r\n    GeolocationPluginWeb.prototype.clearWatch = function (options) {\r\n        window.navigator.geolocation.clearWatch(parseInt(options.id, 10));\r\n        return Promise.resolve();\r\n    };\r\n    return GeolocationPluginWeb;\r\n}(WebPlugin));\r\nexport { GeolocationPluginWeb };\r\nvar Geolocation = new GeolocationPluginWeb();\r\nexport { Geolocation };\r\n//# sourceMappingURL=geolocation.js.map","var WebPluginRegistry = /** @class */ (function () {\r\n    function WebPluginRegistry() {\r\n        this.plugins = {};\r\n        this.loadedPlugins = {};\r\n    }\r\n    WebPluginRegistry.prototype.addPlugin = function (plugin) {\r\n        this.plugins[plugin.config.name] = plugin;\r\n    };\r\n    WebPluginRegistry.prototype.getPlugin = function (name) {\r\n        return this.plugins[name];\r\n    };\r\n    WebPluginRegistry.prototype.loadPlugin = function (name) {\r\n        var plugin = this.getPlugin(name);\r\n        if (!plugin) {\r\n            console.error(\"Unable to load web plugin \" + name + \", no such plugin found.\");\r\n            return;\r\n        }\r\n        plugin.load();\r\n    };\r\n    WebPluginRegistry.prototype.getPlugins = function () {\r\n        var p = [];\r\n        for (var name_1 in this.plugins) {\r\n            p.push(this.plugins[name_1]);\r\n        }\r\n        return p;\r\n    };\r\n    return WebPluginRegistry;\r\n}());\r\nexport { WebPluginRegistry };\r\nvar WebPlugins = new WebPluginRegistry();\r\nexport { WebPlugins };\r\nvar WebPlugin = /** @class */ (function () {\r\n    function WebPlugin(config, pluginRegistry) {\r\n        this.config = config;\r\n        this.loaded = false;\r\n        this.listeners = {};\r\n        this.windowListeners = {};\r\n        if (!pluginRegistry) {\r\n            WebPlugins.addPlugin(this);\r\n        }\r\n        else {\r\n            pluginRegistry.addPlugin(this);\r\n        }\r\n    }\r\n    WebPlugin.prototype.addWindowListener = function (handle) {\r\n        window.addEventListener(handle.windowEventName, handle.handler);\r\n        handle.registered = true;\r\n    };\r\n    WebPlugin.prototype.removeWindowListener = function (handle) {\r\n        if (!handle) {\r\n            return;\r\n        }\r\n        window.removeEventListener(handle.windowEventName, handle.handler);\r\n        handle.registered = false;\r\n    };\r\n    WebPlugin.prototype.addListener = function (eventName, listenerFunc) {\r\n        var _this = this;\r\n        var listeners = this.listeners[eventName];\r\n        if (!listeners) {\r\n            this.listeners[eventName] = [];\r\n        }\r\n        this.listeners[eventName].push(listenerFunc);\r\n        // If we haven't added a window listener for this event and it requires one,\r\n        // go ahead and add it\r\n        var windowListener = this.windowListeners[eventName];\r\n        if (windowListener && !windowListener.registered) {\r\n            this.addWindowListener(windowListener);\r\n        }\r\n        return {\r\n            remove: function () {\r\n                _this.removeListener(eventName, listenerFunc);\r\n            }\r\n        };\r\n    };\r\n    WebPlugin.prototype.removeListener = function (eventName, listenerFunc) {\r\n        var listeners = this.listeners[eventName];\r\n        if (!listeners) {\r\n            return;\r\n        }\r\n        var index = listeners.indexOf(listenerFunc);\r\n        this.listeners[eventName].splice(index, 1);\r\n        // If there are no more listeners for this type of event,\r\n        // remove the window listener\r\n        if (!this.listeners[eventName].length) {\r\n            this.removeWindowListener(this.windowListeners[eventName]);\r\n        }\r\n    };\r\n    WebPlugin.prototype.removeAllListeners = function () {\r\n        this.listeners = {};\r\n        for (var listener in this.windowListeners) {\r\n            this.removeWindowListener(this.windowListeners[listener]);\r\n        }\r\n        this.windowListeners = {};\r\n    };\r\n    WebPlugin.prototype.notifyListeners = function (eventName, data) {\r\n        var listeners = this.listeners[eventName];\r\n        if (listeners) {\r\n            listeners.forEach(function (listener) { return listener(data); });\r\n        }\r\n    };\r\n    WebPlugin.prototype.hasListeners = function (eventName) {\r\n        return !!this.listeners[eventName].length;\r\n    };\r\n    WebPlugin.prototype.registerWindowListener = function (windowEventName, pluginEventName) {\r\n        var _this = this;\r\n        this.windowListeners[pluginEventName] = {\r\n            registered: false,\r\n            windowEventName: windowEventName,\r\n            pluginEventName: pluginEventName,\r\n            handler: function (event) {\r\n                _this.notifyListeners(pluginEventName, event);\r\n            }\r\n        };\r\n    };\r\n    WebPlugin.prototype.requestPermissions = function () {\r\n        if (Capacitor.isNative) {\r\n            return Capacitor.nativePromise(this.config.name, 'requestPermissions', {});\r\n        }\r\n        else {\r\n            return Promise.resolve({ results: [] });\r\n        }\r\n    };\r\n    WebPlugin.prototype.load = function () {\r\n        this.loaded = true;\r\n    };\r\n    return WebPlugin;\r\n}());\r\nexport { WebPlugin };\r\nvar shouldMergeWebPlugin = function (plugin) {\r\n    return plugin.config.platforms && plugin.config.platforms.indexOf(Capacitor.platform) >= 0;\r\n};\r\n/**\r\n * For all our known web plugins, merge them into the global plugins\r\n * registry if they aren't already existing. If they don't exist, that\r\n * means there's no existing native implementation for it.\r\n * @param knownPlugins the Capacitor.Plugins global registry.\r\n */\r\nexport var mergeWebPlugins = function (knownPlugins) {\r\n    var plugins = WebPlugins.getPlugins();\r\n    for (var _i = 0, plugins_1 = plugins; _i < plugins_1.length; _i++) {\r\n        var plugin = plugins_1[_i];\r\n        mergeWebPlugin(knownPlugins, plugin);\r\n    }\r\n};\r\nexport var mergeWebPlugin = function (knownPlugins, plugin) {\r\n    // If we already have a plugin registered (meaning it was defined in the native layer),\r\n    // then we should only overwrite it if the corresponding web plugin activates on\r\n    // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\r\n    if (knownPlugins.hasOwnProperty(plugin.config.name) && !shouldMergeWebPlugin(plugin)) {\r\n        return;\r\n    }\r\n    knownPlugins[plugin.config.name] = plugin;\r\n};\r\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar LocalNotificationsPluginWeb = /** @class */ (function (_super) {\r\n    __extends(LocalNotificationsPluginWeb, _super);\r\n    function LocalNotificationsPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'LocalNotifications',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.pending = [];\r\n        return _this;\r\n    }\r\n    LocalNotificationsPluginWeb.prototype.createChannel = function (channel) {\r\n        throw new Error('Feature not available in the browser. ' + channel.id);\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.deleteChannel = function (channel) {\r\n        throw new Error('Feature not available in the browser. ' + channel.id);\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.listChannels = function () {\r\n        throw new Error('Feature not available in the browser');\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.sendPending = function () {\r\n        var _this = this;\r\n        var toRemove = [];\r\n        var now = +new Date;\r\n        this.pending.forEach(function (localNotification) {\r\n            if (localNotification.schedule && localNotification.schedule.at) {\r\n                if (+localNotification.schedule.at <= now) {\r\n                    _this.buildNotification(localNotification);\r\n                    toRemove.push(localNotification);\r\n                }\r\n            }\r\n        });\r\n        console.log('Sent pending, removing', toRemove);\r\n        this.pending = this.pending.filter(function (localNotification) { return !toRemove.find(function (ln) { return ln === localNotification; }); });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.sendNotification = function (localNotification) {\r\n        var _this = this;\r\n        var l = localNotification;\r\n        if (localNotification.schedule && localNotification.schedule.at) {\r\n            var diff = +localNotification.schedule.at - +new Date;\r\n            this.pending.push(l);\r\n            setTimeout(function () {\r\n                _this.sendPending();\r\n            }, diff);\r\n            return;\r\n        }\r\n        this.buildNotification(localNotification);\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.buildNotification = function (localNotification) {\r\n        var l = localNotification;\r\n        return new Notification(l.title, {\r\n            body: l.body\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.schedule = function (options) {\r\n        var _this = this;\r\n        var notifications = [];\r\n        options.notifications.forEach(function (notification) {\r\n            notifications.push(_this.sendNotification(notification));\r\n        });\r\n        return Promise.resolve({\r\n            notifications: options.notifications.map(function (notification) { return { id: '' + notification.id }; })\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.getPending = function () {\r\n        return Promise.resolve({\r\n            notifications: this.pending.map(function (localNotification) {\r\n                return {\r\n                    id: '' + localNotification.id\r\n                };\r\n            })\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.registerActionTypes = function (_options) {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.cancel = function (pending) {\r\n        console.log('Cancel these', pending);\r\n        this.pending = this.pending.filter(function (localNotification) { return !pending.notifications.find(function (ln) { return ln.id === '' + localNotification.id; }); });\r\n        return Promise.resolve();\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.areEnabled = function () {\r\n        return Promise.resolve({\r\n            value: Notification.permission === 'granted'\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.requestPermission = function () {\r\n        return new Promise(function (resolve) {\r\n            Notification.requestPermission(function (result) {\r\n                var granted = true;\r\n                if (result === 'denied' || result === 'default') {\r\n                    granted = false;\r\n                }\r\n                resolve({ granted: granted });\r\n            });\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.requestPermissions = function () {\r\n        return new Promise(function (resolve, reject) {\r\n            Notification.requestPermission(function (result) {\r\n                if (result === 'denied' || result === 'default') {\r\n                    reject(result);\r\n                    return;\r\n                }\r\n                resolve({\r\n                    results: [result]\r\n                });\r\n            });\r\n        });\r\n    };\r\n    return LocalNotificationsPluginWeb;\r\n}(WebPlugin));\r\nexport { LocalNotificationsPluginWeb };\r\nvar LocalNotifications = new LocalNotificationsPluginWeb();\r\nexport { LocalNotifications };\r\n//# sourceMappingURL=local-notifications.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar ModalsPluginWeb = /** @class */ (function (_super) {\r\n    __extends(ModalsPluginWeb, _super);\r\n    function ModalsPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Modals',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    ModalsPluginWeb.prototype.alert = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                window.alert(options.message);\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    ModalsPluginWeb.prototype.prompt = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var val;\r\n            return __generator(this, function (_a) {\r\n                val = window.prompt(options.message, options.inputText || '');\r\n                return [2 /*return*/, Promise.resolve({\r\n                        value: val,\r\n                        cancelled: val === null\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    ModalsPluginWeb.prototype.confirm = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var val;\r\n            return __generator(this, function (_a) {\r\n                val = window.confirm(options.message);\r\n                return [2 /*return*/, Promise.resolve({\r\n                        value: val\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    ModalsPluginWeb.prototype.showActions = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, _reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var actionSheet;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            actionSheet = document.querySelector('pwa-action-sheet');\r\n                            if (!actionSheet) {\r\n                                actionSheet = document.createElement('pwa-action-sheet');\r\n                                document.body.appendChild(actionSheet);\r\n                            }\r\n                            actionSheet.header = options.title;\r\n                            actionSheet.cancelable = false;\r\n                            actionSheet.options = options.options;\r\n                            actionSheet.addEventListener('onSelection', function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var selection;\r\n                                return __generator(this, function (_a) {\r\n                                    selection = e.detail;\r\n                                    resolve({\r\n                                        index: selection\r\n                                    });\r\n                                    return [2 /*return*/];\r\n                                });\r\n                            }); });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    return ModalsPluginWeb;\r\n}(WebPlugin));\r\nexport { ModalsPluginWeb };\r\nvar Modals = new ModalsPluginWeb();\r\nexport { Modals };\r\n//# sourceMappingURL=modals.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar MotionPluginWeb = /** @class */ (function (_super) {\r\n    __extends(MotionPluginWeb, _super);\r\n    function MotionPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Motion'\r\n        }) || this;\r\n        _this.registerWindowListener('devicemotion', 'accel');\r\n        _this.registerWindowListener('deviceorientation', 'orientation');\r\n        return _this;\r\n    }\r\n    return MotionPluginWeb;\r\n}(WebPlugin));\r\nexport { MotionPluginWeb };\r\nvar Motion = new MotionPluginWeb();\r\nexport { Motion };\r\n//# sourceMappingURL=motion.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar NetworkPluginWeb = /** @class */ (function (_super) {\r\n    __extends(NetworkPluginWeb, _super);\r\n    function NetworkPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Network',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.listenerFunction = null;\r\n        return _this;\r\n    }\r\n    NetworkPluginWeb.prototype.getStatus = function () {\r\n        return new Promise(function (resolve, reject) {\r\n            if (!window.navigator) {\r\n                reject('Network info not available');\r\n                return;\r\n            }\r\n            var connected = window.navigator.onLine;\r\n            var connection = window.navigator.connection || window.navigator.mozConnection || window.navigator.webkitConnection;\r\n            var connectionType = connection ? (connection.type || connection.effectiveType) : 'wifi';\r\n            resolve({\r\n                connected: connected,\r\n                connectionType: connected ? connectionType : 'none'\r\n            });\r\n        });\r\n    };\r\n    NetworkPluginWeb.prototype.addListener = function (eventName, listenerFunc) {\r\n        var thisRef = this;\r\n        var connection = window.navigator.connection || window.navigator.mozConnection || window.navigator.webkitConnection;\r\n        var connectionType = connection ? (connection.type || connection.effectiveType) : 'wifi';\r\n        var onlineBindFunc = listenerFunc.bind(thisRef, { connected: true, connectionType: connectionType });\r\n        var offlineBindFunc = listenerFunc.bind(thisRef, { connected: false, connectionType: 'none' });\r\n        if (eventName.localeCompare('networkStatusChange') === 0) {\r\n            window.addEventListener('online', onlineBindFunc);\r\n            window.addEventListener('offline', offlineBindFunc);\r\n            return {\r\n                remove: function () {\r\n                    window.removeEventListener('online', onlineBindFunc);\r\n                    window.removeEventListener('offline', offlineBindFunc);\r\n                }\r\n            };\r\n        }\r\n    };\r\n    return NetworkPluginWeb;\r\n}(WebPlugin));\r\nexport { NetworkPluginWeb };\r\nvar Network = new NetworkPluginWeb();\r\nexport { Network };\r\n//# sourceMappingURL=network.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { PermissionType } from '../core-plugin-definitions';\r\nvar PermissionsPluginWeb = /** @class */ (function (_super) {\r\n    __extends(PermissionsPluginWeb, _super);\r\n    function PermissionsPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Permissions'\r\n        }) || this;\r\n    }\r\n    PermissionsPluginWeb.prototype.query = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var navigator, name, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        navigator = window.navigator;\r\n                        if (!navigator.permissions) {\r\n                            return [2 /*return*/, Promise.reject('This browser does not support the Permissions API')];\r\n                        }\r\n                        name = options.name === PermissionType.Photos ? 'camera' : options.name;\r\n                        return [4 /*yield*/, navigator.permissions.query({ name: name })];\r\n                    case 1:\r\n                        ret = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                state: ret.state\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return PermissionsPluginWeb;\r\n}(WebPlugin));\r\nexport { PermissionsPluginWeb };\r\nvar Permissions = new PermissionsPluginWeb();\r\nexport { Permissions };\r\n//# sourceMappingURL=permissions.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar SharePluginWeb = /** @class */ (function (_super) {\r\n    __extends(SharePluginWeb, _super);\r\n    function SharePluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Share',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    SharePluginWeb.prototype.share = function (options) {\r\n        if (!navigator.share) {\r\n            return Promise.reject('Web Share API not available');\r\n        }\r\n        return navigator.share({\r\n            title: options.title,\r\n            text: options.text,\r\n            url: options.url\r\n        });\r\n    };\r\n    return SharePluginWeb;\r\n}(WebPlugin));\r\nexport { SharePluginWeb };\r\nvar Share = new SharePluginWeb();\r\nexport { Share };\r\n//# sourceMappingURL=share.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar SplashScreenPluginWeb = /** @class */ (function (_super) {\r\n    __extends(SplashScreenPluginWeb, _super);\r\n    function SplashScreenPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'SplashScreen',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    SplashScreenPluginWeb.prototype.show = function (_options, _callback) {\r\n        return Promise.resolve();\r\n    };\r\n    SplashScreenPluginWeb.prototype.hide = function (_options, _callback) {\r\n        return Promise.resolve();\r\n    };\r\n    return SplashScreenPluginWeb;\r\n}(WebPlugin));\r\nexport { SplashScreenPluginWeb };\r\nvar SplashScreen = new SplashScreenPluginWeb();\r\nexport { SplashScreen };\r\n//# sourceMappingURL=splash-screen.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar StoragePluginWeb = /** @class */ (function (_super) {\r\n    __extends(StoragePluginWeb, _super);\r\n    function StoragePluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Storage',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.KEY_PREFIX = '_cap_';\r\n        return _this;\r\n    }\r\n    StoragePluginWeb.prototype.get = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            resolve({\r\n                value: window.localStorage.getItem(_this.makeKey(options.key))\r\n            });\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.set = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            window.localStorage.setItem(_this.makeKey(options.key), options.value);\r\n            resolve();\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.remove = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            window.localStorage.removeItem(_this.makeKey(options.key));\r\n            resolve();\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.keys = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            resolve({\r\n                keys: Object.keys(localStorage).filter(function (k) { return _this.isKey(k); }).map(function (k) { return _this.getKey(k); })\r\n            });\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.clear = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            Object.keys(localStorage)\r\n                .filter(function (k) { return _this.isKey(k); })\r\n                .forEach(function (k) { return window.localStorage.removeItem(k); });\r\n            resolve();\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.makeKey = function (key) {\r\n        return this.KEY_PREFIX + key;\r\n    };\r\n    StoragePluginWeb.prototype.isKey = function (key) {\r\n        return key.indexOf(this.KEY_PREFIX) === 0;\r\n    };\r\n    StoragePluginWeb.prototype.getKey = function (key) {\r\n        return key.substr(this.KEY_PREFIX.length);\r\n    };\r\n    return StoragePluginWeb;\r\n}(WebPlugin));\r\nexport { StoragePluginWeb };\r\nvar Storage = new StoragePluginWeb();\r\nexport { Storage };\r\n//# sourceMappingURL=storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar ToastPluginWeb = /** @class */ (function (_super) {\r\n    __extends(ToastPluginWeb, _super);\r\n    function ToastPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Toast',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    ToastPluginWeb.prototype.show = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var duration, toast;\r\n            return __generator(this, function (_a) {\r\n                duration = 2000;\r\n                if (options.duration) {\r\n                    duration = options.duration === 'long' ? 3500 : 2000;\r\n                }\r\n                toast = document.createElement('pwa-toast');\r\n                toast.duration = duration;\r\n                toast.message = options.text;\r\n                document.body.appendChild(toast);\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return ToastPluginWeb;\r\n}(WebPlugin));\r\nexport { ToastPluginWeb };\r\nvar Toast = new ToastPluginWeb();\r\nexport { Toast };\r\n//# sourceMappingURL=toast.js.map","import firebase from '@firebase/app';\r\nimport { __extends, __awaiter, __generator, __assign, __spreadArrays } from 'tslib';\r\nimport { FirebaseError } from '@firebase/util';\r\nimport { Component } from '@firebase/component';\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\r\n\r\nvar FirebaseStorageError = /** @class */ (function (_super) {\r\n    __extends(FirebaseStorageError, _super);\r\n    function FirebaseStorageError(code, message) {\r\n        var _this = _super.call(this, prependCode(code), \"Firebase Storage: \" + message + \" (\" + prependCode(code) + \")\") || this;\r\n        _this.customData = { serverResponse: null };\r\n        // Without this, `instanceof FirebaseStorageError`, in tests for example,\r\n        // returns false.\r\n        Object.setPrototypeOf(_this, FirebaseStorageError.prototype);\r\n        return _this;\r\n    }\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.code;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            if (this.customData.serverResponse) {\r\n                return this.message + \"\\n\" + this.customData.serverResponse;\r\n            }\r\n            else {\r\n                return this.message;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.customData.serverResponse;\r\n        },\r\n        set: function (serverResponse) {\r\n            this.customData.serverResponse = serverResponse;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}(FirebaseError));\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error',\r\n    UNSUPPORTED_ENVIRONMENT: 'unsupported-environment'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction noDefaultBucket() {\r\n    return new FirebaseStorageError(Code.NO_DEFAULT_BUCKET, 'No default bucket ' +\r\n        \"found. Did you set the '\" +\r\n        CONFIG_STORAGE_BUCKET_KEY +\r\n        \"' property when initializing the app?\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, message);\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name - The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format - The format that was not valid.\r\n * @param message - A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message - A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (headers !== undefined) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (body !== undefined) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (this.xhr_.upload != null) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (this.xhr_.upload != null) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return typeof p === 'object' && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\r\nfunction validateNumber(argument, minValue, maxValue, value) {\r\n    if (value < minValue) {\r\n        throw new FirebaseStorageError(Code.INVALID_ARGUMENT, \"Invalid value for '\" + argument + \"'. Expected \" + minValue + \" or greater.\");\r\n    }\r\n    if (value > maxValue) {\r\n        throw new FirebaseStorageError(Code.INVALID_ARGUMENT, \"Invalid value for '\" + argument + \"'. Expected \" + maxValue + \" or less.\");\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw new FirebaseStorageError(Code.UNSUPPORTED_ENVIRONMENT, \"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy - If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var firebaseStorageHost = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var firebaseStoragePath = '(/([^?#]*).*)?$';\r\n        var firebaseStorageRegExp = new RegExp(\"^https?://\" + firebaseStorageHost + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + firebaseStoragePath, 'i');\r\n        var firebaseStorageIndices = { bucket: 1, path: 3 };\r\n        var cloudStorageHost = '(?:storage.googleapis.com|storage.cloud.google.com)';\r\n        var cloudStoragePath = '([^?#]*)';\r\n        var cloudStorageRegExp = new RegExp(\"^https?://\" + cloudStorageHost + \"/\" + bucketDomain + \"/\" + cloudStoragePath, 'i');\r\n        var cloudStorageIndices = { bucket: 1, path: 2 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            {\r\n                regex: firebaseStorageRegExp,\r\n                indices: firebaseStorageIndices,\r\n                postModify: httpModify\r\n            },\r\n            {\r\n                regex: cloudStorageRegExp,\r\n                indices: cloudStorageIndices,\r\n                postModify: httpModify\r\n            }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (size !== undefined) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, service) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return service.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(service, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, service);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(service, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(service, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(service, bucket, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = service.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = service.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(service, bucket, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(service, bucket, resource);\r\n}\r\n\r\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(service, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(service, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(service, bucket) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(service, bucket, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(service, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(service, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.serverResponse = err.serverResponse;\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.serverResponse = err.serverResponse;\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(service, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(service, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, listHandler(service, location.bucket), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(service, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(service, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(service, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(service, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = service.maxOperationRetryTime;\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(service, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str = str + Math.random().toString().slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(service, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = service.maxUploadRetryTime;\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(service, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, service, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(service, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) || error != null || complete != null;\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error;\r\n            this.complete = complete;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next;\r\n            this.error = observer.error;\r\n            this.complete = observer.complete;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\r\n\r\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref - The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob - The blob to upload.\r\n     */\r\n    function UploadTask(ref, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        /**\r\n         * @internal\r\n         */\r\n        this._transferred = 0;\r\n        this._needToFetchStatus = false;\r\n        this._needToFetchMetadata = false;\r\n        this._observers = [];\r\n        this._error = undefined;\r\n        this._uploadUrl = undefined;\r\n        this._request = undefined;\r\n        this._chunkMultiplier = 1;\r\n        this._resolve = undefined;\r\n        this._reject = undefined;\r\n        this._ref = ref;\r\n        this._blob = blob;\r\n        this._metadata = metadata;\r\n        this._mappings = getMappings();\r\n        this._resumable = this._shouldDoResumable(this._blob);\r\n        this._state = InternalTaskState.RUNNING;\r\n        this._errorHandler = function (error) {\r\n            _this._request = undefined;\r\n            _this._chunkMultiplier = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this._needToFetchStatus = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this._error = error;\r\n                _this._transition(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this._metadataErrorHandler = function (error) {\r\n            _this._request = undefined;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this._error = error;\r\n                _this._transition(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this._promise = new Promise(function (resolve, reject) {\r\n            _this._resolve = resolve;\r\n            _this._reject = reject;\r\n            _this._start();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this._promise.then(null, function () { });\r\n    }\r\n    UploadTask.prototype._makeProgressCallback = function () {\r\n        var _this = this;\r\n        var sizeBefore = this._transferred;\r\n        return function (loaded) { return _this._updateProgress(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype._shouldDoResumable = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype._start = function () {\r\n        if (this._state !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this._request !== undefined) {\r\n            return;\r\n        }\r\n        if (this._resumable) {\r\n            if (this._uploadUrl === undefined) {\r\n                this._createResumable();\r\n            }\r\n            else {\r\n                if (this._needToFetchStatus) {\r\n                    this._fetchStatus();\r\n                }\r\n                else {\r\n                    if (this._needToFetchMetadata) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this._fetchMetadata();\r\n                    }\r\n                    else {\r\n                        this._continueUpload();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._oneShotUpload();\r\n        }\r\n    };\r\n    UploadTask.prototype._resolveToken = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this._ref.storage.getAuthToken().then(function (authToken) {\r\n            switch (_this._state) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this._transition(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this._transition(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype._createResumable = function () {\r\n        var _this = this;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this._ref.storage, _this._ref._location, _this._mappings, _this._blob, _this._metadata);\r\n            var createRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this._request = undefined;\r\n                _this._uploadUrl = url;\r\n                _this._needToFetchStatus = false;\r\n                _this.completeTransitions_();\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._fetchStatus = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this._uploadUrl;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this._ref.storage, _this._ref._location, url, _this._blob);\r\n            var statusRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this._request = undefined;\r\n                _this._updateProgress(status.current);\r\n                _this._needToFetchStatus = false;\r\n                if (status.finalized) {\r\n                    _this._needToFetchMetadata = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._continueUpload = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this._chunkMultiplier;\r\n        var status = new ResumableUploadStatus(this._transferred, this._blob.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this._uploadUrl;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this._ref._location, _this._ref.storage, url, _this._blob, chunkSize, _this._mappings, status, _this._makeProgressCallback());\r\n            }\r\n            catch (e) {\r\n                _this._error = e;\r\n                _this._transition(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this._increaseMultiplier();\r\n                _this._request = undefined;\r\n                _this._updateProgress(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this._metadata = newStatus.metadata;\r\n                    _this._transition(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._increaseMultiplier = function () {\r\n        var currentSize = resumableUploadChunkSize * this._chunkMultiplier;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this._chunkMultiplier *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype._fetchMetadata = function () {\r\n        var _this = this;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = getMetadata(_this._ref.storage, _this._ref._location, _this._mappings);\r\n            var metadataRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this._request = undefined;\r\n                _this._metadata = metadata;\r\n                _this._transition(InternalTaskState.SUCCESS);\r\n            }, _this._metadataErrorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._oneShotUpload = function () {\r\n        var _this = this;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = multipartUpload(_this._ref.storage, _this._ref._location, _this._mappings, _this._blob, _this._metadata);\r\n            var multipartRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this._request = undefined;\r\n                _this._metadata = metadata;\r\n                _this._updateProgress(_this._blob.size());\r\n                _this._transition(InternalTaskState.SUCCESS);\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._updateProgress = function (transferred) {\r\n        var old = this._transferred;\r\n        this._transferred = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this._transferred !== old) {\r\n            this._notifyObservers();\r\n        }\r\n    };\r\n    UploadTask.prototype._transition = function (state) {\r\n        if (this._state === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this._state = state;\r\n                if (this._request !== undefined) {\r\n                    this._request.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this._state = state;\r\n                if (this._request !== undefined) {\r\n                    this._request.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this._state === InternalTaskState.PAUSED;\r\n                this._state = state;\r\n                if (wasPaused) {\r\n                    this._notifyObservers();\r\n                    this._start();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this._error = canceled();\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this._state) {\r\n            case InternalTaskState.PAUSING:\r\n                this._transition(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this._transition(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this._start();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this._state);\r\n            return new UploadTaskSnapshot(this._transferred, this._blob.size(), externalState, this._metadata, this, this._ref);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type - The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        var _this = this;\r\n        var observer = new Observer(nextOrObserver, error, completed);\r\n        this._addObserver(observer);\r\n        return function () {\r\n            _this._removeObserver(observer);\r\n        };\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled - The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected - The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this._promise.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype._addObserver = function (observer) {\r\n        this._observers.push(observer);\r\n        this._notifyObserver(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype._removeObserver = function (observer) {\r\n        var i = this._observers.indexOf(observer);\r\n        if (i !== -1) {\r\n            this._observers.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype._notifyObservers = function () {\r\n        var _this = this;\r\n        this._finishPromise();\r\n        var observers = this._observers.slice();\r\n        observers.forEach(function (observer) {\r\n            _this._notifyObserver(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype._finishPromise = function () {\r\n        if (this._resolve !== undefined) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this._state)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this._resolve.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this._reject;\r\n                    async(toCall.bind(null, this._error))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this._resolve = undefined;\r\n                this._reject = undefined;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype._notifyObserver = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this._state);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this._error))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this._error))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @returns True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        var valid = this._state === InternalTaskState.PAUSED ||\r\n            this._state === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this._transition(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @returns True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        var valid = this._state === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this._transition(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @returns True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        var valid = this._state === InternalTaskState.RUNNING ||\r\n            this._state === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this._transition(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location - An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(_service, location) {\r\n        this._service = _service;\r\n        if (location instanceof Location) {\r\n            this._location = location;\r\n        }\r\n        else {\r\n            this._location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @returns The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        return 'gs://' + this._location.bucket + '/' + this._location.path;\r\n    };\r\n    Reference.prototype.newRef = function (service, location) {\r\n        return new Reference(service, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @returns An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this._location.bucket, '');\r\n            return this.newRef(this._service, location);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this._location.bucket;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this._location.path;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this._location.path);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this._service;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        get: function () {\r\n            var newPath = parent(this._location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this._location.bucket, newPath);\r\n            return new Reference(this._service, location);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Reference.prototype._throwIfRoot = function (name) {\r\n        if (this._location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\r\n/**\r\n * Uploads a blob to this object's location.\r\n * @public\r\n * @param ref - Storage Reference where data should be uploaded.\r\n * @param data - The data to upload.\r\n * @param metadata - Metadata for the newly uploaded string.\r\n * @returns An UploadTask that lets you control and\r\n *     observe the upload.\r\n */\r\nfunction uploadBytesResumable(ref, data, metadata) {\r\n    if (metadata === void 0) { metadata = null; }\r\n    ref._throwIfRoot('uploadBytesResumable');\r\n    return new UploadTask(ref, new FbsBlob(data), metadata);\r\n}\r\n/**\r\n * Uploads a string to this object's location.\r\n * @public\r\n * @param ref - Storage Reference where string should be uploaded.\r\n * @param value - The string to upload.\r\n * @param format - The format of the string to upload.\r\n * @param metadata - Metadata for the newly uploaded object.\r\n * @returns An UploadTask that lets you control and\r\n *     observe the upload.\r\n */\r\nfunction uploadString(ref, value, format, metadata) {\r\n    if (format === void 0) { format = StringFormat.RAW; }\r\n    ref._throwIfRoot('putString');\r\n    var data = dataFromString(format, value);\r\n    var metadataClone = __assign({}, metadata);\r\n    if (metadataClone['contentType'] == null && data.contentType != null) {\r\n        metadataClone['contentType'] = data.contentType;\r\n    }\r\n    return new UploadTask(ref, new FbsBlob(data.data, true), metadataClone);\r\n}\r\n/**\r\n * List all items (files) and prefixes (folders) under this storage reference.\r\n *\r\n * This is a helper method for calling list() repeatedly until there are\r\n * no more results. The default pagination size is 1000.\r\n *\r\n * Note: The results may not be consistent if objects are changed while this\r\n * operation is running.\r\n *\r\n * Warning: listAll may potentially consume too many resources if there are\r\n * too many results.\r\n * @public\r\n * @param ref - Storage Reference to get list from.\r\n *\r\n * @returns A Promise that resolves with all the items and prefixes under\r\n *      the current storage reference. `prefixes` contains references to\r\n *      sub-directories and `items` contains references to objects in this\r\n *      folder. `nextPageToken` is never returned.\r\n */\r\nfunction listAll(ref) {\r\n    var accumulator = {\r\n        prefixes: [],\r\n        items: []\r\n    };\r\n    return listAllHelper(ref, accumulator).then(function () { return accumulator; });\r\n}\r\n/**\r\n * Separated from listAll because async functions can't use \"arguments\".\r\n * @internal\r\n * @param ref\r\n * @param accumulator\r\n * @param pageToken\r\n */\r\nfunction listAllHelper(ref, accumulator, pageToken) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var opt, nextPage;\r\n        var _a, _b;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    opt = {\r\n                        // maxResults is 1000 by default.\r\n                        pageToken: pageToken\r\n                    };\r\n                    return [4 /*yield*/, list$1(ref, opt)];\r\n                case 1:\r\n                    nextPage = _c.sent();\r\n                    (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                    (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                    if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, listAllHelper(ref, accumulator, nextPage.nextPageToken)];\r\n                case 2:\r\n                    _c.sent();\r\n                    _c.label = 3;\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * List items (files) and prefixes (folders) under this storage reference.\r\n *\r\n * List API is only available for Firebase Rules Version 2.\r\n *\r\n * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n * delimited folder structure.\r\n * Refer to GCS's List API if you want to learn more.\r\n *\r\n * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n * support objects whose paths end with \"/\" or contain two consecutive\r\n * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n * list() may fail if there are too many unsupported objects in the bucket.\r\n * @public\r\n *\r\n * @param ref - Storage Reference to get list from.\r\n * @param options - See ListOptions for details.\r\n * @returns A Promise that resolves with the items and prefixes.\r\n *      `prefixes` contains references to sub-folders and `items`\r\n *      contains references to objects in this folder. `nextPageToken`\r\n *      can be used to get the rest of the results.\r\n */\r\nfunction list$1(ref, options) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, op, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (options != null) {\r\n                        if (typeof options.maxResults === 'number') {\r\n                            validateNumber('options.maxResults', \r\n                            /* minValue= */ 1, \r\n                            /* maxValue= */ 1000, options.maxResults);\r\n                        }\r\n                    }\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    op = options || {};\r\n                    requestInfo = list(ref.storage, ref._location, \r\n                    /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * A promise that resolves with the metadata for this object. If this\r\n * object doesn't exist or metadata cannot be retreived, the promise is\r\n * rejected.\r\n * @public\r\n * @param ref - Storage Reference to get metadata from.\r\n */\r\nfunction getMetadata$1(ref) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('getMetadata');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = getMetadata(ref.storage, ref._location, getMappings());\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Updates the metadata for this object.\r\n * @public\r\n * @param ref - Storage Reference to update metadata for.\r\n * @param metadata - The new metadata for the object.\r\n *     Only values that have been explicitly set will be changed. Explicitly\r\n *     setting a value to null will remove the metadata.\r\n * @returns A promise that resolves\r\n *     with the new metadata for this object.\r\n *     See `firebaseStorage.Reference.prototype.getMetadata`\r\n */\r\nfunction updateMetadata$1(ref, metadata) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('updateMetadata');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = updateMetadata(ref.storage, ref._location, metadata, getMappings());\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns the download URL for the given Reference.\r\n * @public\r\n * @returns A promise that resolves with the download\r\n *     URL for this object.\r\n */\r\nfunction getDownloadURL(ref) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('getDownloadURL');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = getDownloadUrl(ref.storage, ref._location, getMappings());\r\n                    return [2 /*return*/, ref.storage\r\n                            .makeRequest(requestInfo, authToken)\r\n                            .getPromise()\r\n                            .then(function (url) {\r\n                            if (url === null) {\r\n                                throw noDownloadURL();\r\n                            }\r\n                            return url;\r\n                        })];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Deletes the object at this location.\r\n * @public\r\n * @param ref - Storage Reference for object to delete.\r\n * @returns A promise that resolves if the deletion succeeds.\r\n */\r\nfunction deleteObject$1(ref) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('deleteObject');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = deleteObject(ref.storage, ref._location);\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns reference for object obtained by appending `childPath` to `ref`.\r\n * @internal\r\n *\r\n * @param ref - Storage Reference to get child of.\r\n * @param childPath - Child path from provided ref.\r\n * @returns A reference to the object obtained by\r\n * appending childPath, removing any duplicate, beginning, or trailing\r\n * slashes.\r\n */\r\nfunction getChild(ref, childPath) {\r\n    var newPath = child(ref._location.path, childPath);\r\n    var location = new Location(ref._location.bucket, newPath);\r\n    return new Reference(ref.storage, location);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar UploadTaskSnapshotCompat = /** @class */ (function () {\r\n    function UploadTaskSnapshotCompat(_delegate, task, ref) {\r\n        this._delegate = _delegate;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"bytesTransferred\", {\r\n        get: function () {\r\n            return this._delegate.bytesTransferred;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"metadata\", {\r\n        get: function () {\r\n            return this._delegate.metadata;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"state\", {\r\n        get: function () {\r\n            return this._delegate.state;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"totalBytes\", {\r\n        get: function () {\r\n            return this._delegate.totalBytes;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return UploadTaskSnapshotCompat;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar UploadTaskCompat = /** @class */ (function () {\r\n    function UploadTaskCompat(_delegate, _ref) {\r\n        this._delegate = _delegate;\r\n        this._ref = _ref;\r\n        this.cancel = this._delegate.cancel.bind(this._delegate);\r\n        this.catch = this._delegate.catch.bind(this._delegate);\r\n        this.pause = this._delegate.pause.bind(this._delegate);\r\n        this.resume = this._delegate.resume.bind(this._delegate);\r\n        this._snapshot = new UploadTaskSnapshotCompat(this._delegate.snapshot, this, this._ref);\r\n    }\r\n    Object.defineProperty(UploadTaskCompat.prototype, \"snapshot\", {\r\n        get: function () {\r\n            return this._snapshot;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    UploadTaskCompat.prototype.then = function (onFulfilled, onRejected) {\r\n        var _this = this;\r\n        return this._delegate.then(function (snapshot) {\r\n            if (onFulfilled) {\r\n                return onFulfilled(new UploadTaskSnapshotCompat(snapshot, _this, _this._ref));\r\n            }\r\n        }, onRejected);\r\n    };\r\n    UploadTaskCompat.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        var _this = this;\r\n        var wrappedNextOrObserver = undefined;\r\n        if (!!nextOrObserver) {\r\n            if (typeof nextOrObserver === 'function') {\r\n                wrappedNextOrObserver = function (taskSnapshot) {\r\n                    return nextOrObserver(new UploadTaskSnapshotCompat(taskSnapshot, _this, _this._ref));\r\n                };\r\n            }\r\n            else {\r\n                wrappedNextOrObserver = {\r\n                    next: !!nextOrObserver.next\r\n                        ? function (taskSnapshot) {\r\n                            return nextOrObserver.next(new UploadTaskSnapshotCompat(taskSnapshot, _this, _this._ref));\r\n                        }\r\n                        : undefined,\r\n                    complete: nextOrObserver.complete || undefined,\r\n                    error: nextOrObserver.error || undefined\r\n                };\r\n            }\r\n        }\r\n        return this._delegate.on(type, wrappedNextOrObserver, error || undefined, completed || undefined);\r\n    };\r\n    return UploadTaskCompat;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ListResultCompat = /** @class */ (function () {\r\n    function ListResultCompat(_delegate, _service) {\r\n        this._delegate = _delegate;\r\n        this._service = _service;\r\n    }\r\n    Object.defineProperty(ListResultCompat.prototype, \"prefixes\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this._delegate.prefixes.map(function (ref) { return new ReferenceCompat(ref, _this._service); });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListResultCompat.prototype, \"items\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this._delegate.items.map(function (ref) { return new ReferenceCompat(ref, _this._service); });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListResultCompat.prototype, \"nextPageToken\", {\r\n        get: function () {\r\n            return this._delegate.nextPageToken || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ListResultCompat;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *  http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ReferenceCompat = /** @class */ (function () {\r\n    function ReferenceCompat(_delegate, storage) {\r\n        this._delegate = _delegate;\r\n        this.storage = storage;\r\n    }\r\n    Object.defineProperty(ReferenceCompat.prototype, \"name\", {\r\n        get: function () {\r\n            return this._delegate.name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferenceCompat.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this._delegate.bucket;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferenceCompat.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this._delegate.fullPath;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ReferenceCompat.prototype.toString = function () {\r\n        return this._delegate.toString();\r\n    };\r\n    /**\r\n     * @returns A reference to the object obtained by\r\n     * appending childPath, removing any duplicate, beginning, or trailing\r\n     * slashes.\r\n     */\r\n    ReferenceCompat.prototype.child = function (childPath) {\r\n        var reference = getChild(this._delegate, childPath);\r\n        return new ReferenceCompat(reference, this.storage);\r\n    };\r\n    Object.defineProperty(ReferenceCompat.prototype, \"root\", {\r\n        get: function () {\r\n            return new ReferenceCompat(this._delegate.root, this.storage);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferenceCompat.prototype, \"parent\", {\r\n        /**\r\n         * @returns A reference to the parent of the\r\n         * current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var reference = this._delegate.parent;\r\n            if (reference == null) {\r\n                return null;\r\n            }\r\n            return new ReferenceCompat(reference, this.storage);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data - The blob to upload.\r\n     * @returns An UploadTask that lets you control and\r\n     * observe the upload.\r\n     */\r\n    ReferenceCompat.prototype.put = function (data, metadata) {\r\n        this._throwIfRoot('put');\r\n        return new UploadTaskCompat(uploadBytesResumable(this._delegate, data, metadata), this);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value - The string to upload.\r\n     * @param format - The format of the string to upload.\r\n     * @returns An UploadTask that lets you control and\r\n     * observe the upload.\r\n     */\r\n    ReferenceCompat.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        this._throwIfRoot('putString');\r\n        return new UploadTaskCompat(uploadString(this._delegate, value, format, metadata), this);\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @returns A Promise that resolves with all the items and prefixes under\r\n     *  the current storage reference. `prefixes` contains references to\r\n     *  sub-directories and `items` contains references to objects in this\r\n     *  folder. `nextPageToken` is never returned.\r\n     */\r\n    ReferenceCompat.prototype.listAll = function () {\r\n        var _this = this;\r\n        return listAll(this._delegate).then(function (r) { return new ListResultCompat(r, _this.storage); });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure. Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options - See ListOptions for details.\r\n     * @returns A Promise that resolves with the items and prefixes.\r\n     * `prefixes` contains references to sub-folders and `items`\r\n     * contains references to objects in this folder. `nextPageToken`\r\n     * can be used to get the rest of the results.\r\n     */\r\n    ReferenceCompat.prototype.list = function (options) {\r\n        var _this = this;\r\n        return list$1(this._delegate, options).then(function (r) { return new ListResultCompat(r, _this.storage); });\r\n    };\r\n    /**\r\n     * A promise that resolves with the metadata for this object. If this\r\n     * object doesn't exist or metadata cannot be retreived, the promise is\r\n     * rejected.\r\n     */\r\n    ReferenceCompat.prototype.getMetadata = function () {\r\n        return getMetadata$1(this._delegate);\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata - The new metadata for the object.\r\n     * Only values that have been explicitly set will be changed. Explicitly\r\n     * setting a value to null will remove the metadata.\r\n     * @returns A promise that resolves\r\n     * with the new metadata for this object.\r\n     * @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    ReferenceCompat.prototype.updateMetadata = function (metadata) {\r\n        return updateMetadata$1(this._delegate, metadata);\r\n    };\r\n    /**\r\n     * @returns A promise that resolves with the download\r\n     * URL for this object.\r\n     */\r\n    ReferenceCompat.prototype.getDownloadURL = function () {\r\n        return getDownloadURL(this._delegate);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @returns A promise that resolves if the deletion succeeds.\r\n     */\r\n    ReferenceCompat.prototype.delete = function () {\r\n        this._throwIfRoot('delete');\r\n        return deleteObject$1(this._delegate);\r\n    };\r\n    ReferenceCompat.prototype._throwIfRoot = function (name) {\r\n        if (this._delegate._location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return ReferenceCompat;\r\n}());\r\n\r\n/**\r\n * A request whose promise always fails.\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncallback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough - True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.serverResponse = xhr.getResponseText();\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled - Defaults to false.\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\nfunction addGmpidHeader_(headers, appId) {\r\n    if (appId) {\r\n        headers['X-Firebase-GMPID'] = appId;\r\n    }\r\n}\r\nfunction makeRequest(requestInfo, appId, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addGmpidHeader_(headers, appId);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isUrl(path) {\r\n    return /^[A-Za-z]+:\\/\\//.test(path);\r\n}\r\n/**\r\n * Returns a firebaseStorage.Reference for the given url.\r\n */\r\nfunction refFromURL(service, url) {\r\n    return new Reference(service, url);\r\n}\r\n/**\r\n * Returns a firebaseStorage.Reference for the given path in the default\r\n * bucket.\r\n */\r\nfunction refFromPath(ref, path) {\r\n    if (ref instanceof StorageService) {\r\n        var service = ref;\r\n        if (service._bucket == null) {\r\n            throw noDefaultBucket();\r\n        }\r\n        var reference = new Reference(service, service._bucket);\r\n        if (path != null) {\r\n            return refFromPath(reference, path);\r\n        }\r\n        else {\r\n            return reference;\r\n        }\r\n    }\r\n    else {\r\n        // ref is a Reference\r\n        if (path !== undefined) {\r\n            if (path.includes('..')) {\r\n                throw invalidArgument('`path` param cannot contain \"..\"');\r\n            }\r\n            return getChild(ref, path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    }\r\n}\r\nfunction ref(serviceOrRef, pathOrUrl) {\r\n    if (pathOrUrl && isUrl(pathOrUrl)) {\r\n        if (serviceOrRef instanceof StorageService) {\r\n            return refFromURL(serviceOrRef, pathOrUrl);\r\n        }\r\n        else {\r\n            throw invalidArgument('To use ref(service, url), the first argument must be a Storage instance.');\r\n        }\r\n    }\r\n    else {\r\n        return refFromPath(serviceOrRef, pathOrUrl);\r\n    }\r\n}\r\nfunction extractBucket(config) {\r\n    var bucketString = config === null || config === void 0 ? void 0 : config[CONFIG_STORAGE_BUCKET_KEY];\r\n    if (bucketString == null) {\r\n        return null;\r\n    }\r\n    return Location.makeFromBucketSpec(bucketString);\r\n}\r\n/**\r\n * A service that provides Firebase Storage Reference instances.\r\n * @param opt_url - gs:// url to a custom Storage Bucket\r\n */\r\nvar StorageService = /** @class */ (function () {\r\n    function StorageService(app, \r\n    /**\r\n     * @internal\r\n     */\r\n    _authProvider, \r\n    /**\r\n     * @internal\r\n     */\r\n    _pool, \r\n    /**\r\n     * @internal\r\n     */\r\n    _url) {\r\n        this.app = app;\r\n        this._authProvider = _authProvider;\r\n        this._pool = _pool;\r\n        this._url = _url;\r\n        /**\r\n         * @internal\r\n         */\r\n        this._bucket = null;\r\n        this._appId = null;\r\n        this._deleted = false;\r\n        this._maxOperationRetryTime = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this._maxUploadRetryTime = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this._requests = new Set();\r\n        if (_url != null) {\r\n            this._bucket = Location.makeFromBucketSpec(_url);\r\n        }\r\n        else {\r\n            this._bucket = extractBucket(this.app.options);\r\n        }\r\n    }\r\n    Object.defineProperty(StorageService.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this._maxUploadRetryTime;\r\n        },\r\n        set: function (time) {\r\n            validateNumber('time', \r\n            /* minValue=*/ 0, \r\n            /* maxValue= */ Number.POSITIVE_INFINITY, time);\r\n            this._maxUploadRetryTime = time;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StorageService.prototype, \"maxOperationRetryTime\", {\r\n        get: function () {\r\n            return this._maxOperationRetryTime;\r\n        },\r\n        set: function (time) {\r\n            validateNumber('time', \r\n            /* minValue=*/ 0, \r\n            /* maxValue= */ Number.POSITIVE_INFINITY, time);\r\n            this._maxOperationRetryTime = time;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StorageService.prototype.getAuthToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var auth, tokenData;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        auth = this._authProvider.getImmediate({ optional: true });\r\n                        if (!auth) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, auth.getToken()];\r\n                    case 1:\r\n                        tokenData = _a.sent();\r\n                        if (tokenData !== null) {\r\n                            return [2 /*return*/, tokenData.accessToken];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     * @internal\r\n     */\r\n    StorageService.prototype._delete = function () {\r\n        this._deleted = true;\r\n        this._requests.forEach(function (request) { return request.cancel(); });\r\n        this._requests.clear();\r\n        return Promise.resolve();\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this StorageService\r\n     * at the given Location.\r\n     */\r\n    StorageService.prototype.makeStorageReference = function (loc) {\r\n        return new Reference(this, loc);\r\n    };\r\n    /**\r\n     * @internal\r\n     * @param requestInfo - HTTP RequestInfo object\r\n     * @param authToken - Firebase auth token\r\n     */\r\n    StorageService.prototype.makeRequest = function (requestInfo, authToken) {\r\n        var _this = this;\r\n        if (!this._deleted) {\r\n            var request_1 = makeRequest(requestInfo, this._appId, authToken, this._pool);\r\n            this._requests.add(request_1);\r\n            // Request removes itself from set when complete.\r\n            request_1.getPromise().then(function () { return _this._requests.delete(request_1); }, function () { return _this._requests.delete(request_1); });\r\n            return request_1;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    return StorageService;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n */\r\nvar StorageServiceCompat = /** @class */ (function () {\r\n    function StorageServiceCompat(app, _delegate) {\r\n        var _this = this;\r\n        this.app = app;\r\n        this._delegate = _delegate;\r\n        this.INTERNAL = {\r\n            /**\r\n             * Called when the associated app is deleted.\r\n             */\r\n            delete: function () {\r\n                return _this._delegate._delete();\r\n            }\r\n        };\r\n    }\r\n    Object.defineProperty(StorageServiceCompat.prototype, \"maxOperationRetryTime\", {\r\n        get: function () {\r\n            return this._delegate.maxOperationRetryTime;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StorageServiceCompat.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this._delegate.maxUploadRetryTime;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    StorageServiceCompat.prototype.ref = function (path) {\r\n        if (isUrl(path)) {\r\n            throw invalidArgument('ref() expected a child path but got a URL, use refFromURL instead.');\r\n        }\r\n        return new ReferenceCompat(ref(this._delegate, path), this);\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    StorageServiceCompat.prototype.refFromURL = function (url) {\r\n        if (!isUrl(url)) {\r\n            throw invalidArgument('refFromURL() expected a full URL but got a child path, use ref() instead.');\r\n        }\r\n        try {\r\n            Location.makeFromUrl(url);\r\n        }\r\n        catch (e) {\r\n            throw invalidArgument('refFromUrl() expected a valid full URL but got an invalid one.');\r\n        }\r\n        return new ReferenceCompat(ref(this._delegate, url), this);\r\n    };\r\n    StorageServiceCompat.prototype.setMaxUploadRetryTime = function (time) {\r\n        this._delegate.maxUploadRetryTime = time;\r\n    };\r\n    StorageServiceCompat.prototype.setMaxOperationRetryTime = function (time) {\r\n        this._delegate.maxOperationRetryTime = time;\r\n    };\r\n    return StorageServiceCompat;\r\n}());\r\n\r\nvar name = \"@firebase/storage\";\r\nvar version = \"0.4.2\";\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(container, url) {\r\n    // Dependencies\r\n    // TODO: This should eventually be 'app-compat'\r\n    var app = container.getProvider('app').getImmediate();\r\n    var authProvider = container.getProvider('auth-internal');\r\n    // TODO: get StorageService instance from component framework instead\r\n    // of creating a new one.\r\n    var storageServiceCompat = new StorageServiceCompat(app, new StorageService(app, authProvider, new XhrIoPool(), url));\r\n    return storageServiceCompat;\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: StorageService,\r\n        Reference: ReferenceCompat\r\n    };\r\n    instance.INTERNAL.registerComponent(new Component(STORAGE_TYPE, factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterStorage(firebase);\r\n\r\nexport { registerStorage };\r\n//# sourceMappingURL=index.esm.js.map\r\n","import '@firebase/storage';\r\n//# sourceMappingURL=index.esm.js.map\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Profile</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-grid class=\\\"ion-margin-horizontal\\\" *ngIf=\\\"userData\\\">\\r\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n      <ion-col size=\\\"7\\\" size-sm=\\\"2\\\">\\r\\n        <ion-row class=\\\"ion-align-items-end ion-justify-content-end\\\">\\r\\n          <ion-fab-button color=\\\"primary\\\" style=\\\"position: absolute; z-index: 1\\\" (click)=\\\"presentImageActionSheet()\\\">\\r\\n            <ion-icon name=\\\"camera\\\"></ion-icon>\\r\\n          </ion-fab-button>\\r\\n          <input type=\\\"file\\\" *ngIf=\\\"isDesktop\\\" #filePicker (change)=\\\"onFileChoose($event)\\\"/>\\r\\n          <ion-img src=\\\"assets/images/avatar.png\\\" style=\\\"object-fit: contain; width: 100%;\\\" *ngIf=\\\"!imageUrl\\\"></ion-img>\\r\\n          <img id=\\\"profilePicture\\\" src=\\\"{{imageUrl}}\\\" class=\\\"circle-image\\\" *ngIf=\\\"imageUrl\\\" (load)=\\\"imageLoaded()\\\">\\r\\n        </ion-row>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\" size-sm=\\\"6\\\" offset-sm=\\\"3\\\">\\r\\n        <ion-text class=\\\"ion-text-center\\\">\\r\\n          <h2 class=\\\"text-bold ion-no-margin ion-margin-top\\\">\\r\\n            <b>{{userData.nama}}</b>\\r\\n          </h2>\\r\\n          <h4 class=\\\"ion-no-margin ion-padding-bottom\\\">\\r\\n            <b>{{userData.email}}</b>\\r\\n          </h4>\\r\\n        </ion-text>\\r\\n\\r\\n         <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n            <ion-col size=\\\"12\\\">\\r\\n              <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"doLogout()\\\">\\r\\n              Logout\\r\\n              </ion-button>\\r\\n            </ion-col>\\r\\n         </ion-row>\\r\\n\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProfilePage } from './profile.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfilePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProfilePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProfilePageRoutingModule } from './profile-routing.module';\r\n\r\nimport { ProfilePage } from './profile.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProfilePageRoutingModule\r\n  ],\r\n  declarations: [ProfilePage]\r\n})\r\nexport class ProfilePageModule {}\r\n","export default \".circle-image {\\n  border-radius: 50%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\ninput[type=file] {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGtCQUFBO0VBQ0Esb0JBQUE7S0FBQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7QUFBRjs7QUFHQTtFQUNFLGFBQUE7QUFBRiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgXHJcbi5jaXJjbGUtaW1hZ2V7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwiZmlsZVwiXXtcclxuICBkaXNwbGF5OiBub25lO1xyXG59Il19 */\";","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {AngularFireStorage} from '@angular/fire/storage';\r\nimport {Router} from '@angular/router';\r\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\r\nimport {ActionSheetController, AlertController, LoadingController, Platform, ToastController} from '@ionic/angular';\r\nimport {Camera, CameraResultType, CameraSource, Capacitor} from '@capacitor/core';\r\nimport {finalize} from 'rxjs/operators';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { AngularFirestore  } from \"@angular/fire/firestore\";\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.page.html',\r\n  styleUrls: ['./profile.page.scss'],\r\n})\r\nexport class ProfilePage implements OnInit {\r\n  private id: string;\r\n  private locId: any[] = [];\r\n  private userData: any;\r\n  private userLocations: any[] = [];\r\n  private isDesktop: boolean;\r\n  private downloadURL: any;\r\n  private imageFile: any;\r\n  private base64Image: any;\r\n  private isCamera: boolean = null;\r\n  private imageUrl: SafeResourceUrl;\r\n  @ViewChild('filePicker', { static: false }) filePickerRef: ElementRef<HTMLInputElement>;\r\n\r\n  constructor(public ngroute: Router,\r\n    private firebaseAuthService: AuthService,\r\n    private firebaseDB: AngularFirestore,\r\n      private alertCtrl: AlertController,\r\n      private toastCtrl: ToastController,\r\n      private actionSheetCtrl: ActionSheetController,\r\n      private loadingCtrl: LoadingController,\r\n      private router: Router,\r\n      private platform: Platform,\r\n      private sanitizer: DomSanitizer,\r\n      private storage: AngularFireStorage\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n      if ((this.platform.is('mobile') && this.platform.is('hybrid')) || this.platform.is('desktop')){\r\n        this.isDesktop = true;\r\n      }\r\n      this.firebaseAuthService.userDetails().subscribe(res => {\r\n        if (res !== null){\r\n          this.id = res.uid;\r\n          this.getUserData();\r\n          console.log(this.id);\r\n        }\r\n      }, err => {\r\n        console.log(err);\r\n      });\r\n    }\r\n\r\n  async doLogout(){\r\n    this.firebaseAuthService.signOut()\r\n    .then(res => {\r\n      console.log(res);\r\n      this.ngroute.navigate(['login']);\r\n    }).catch(error => {\r\n    console.log(error);\r\n    });\r\n  }\r\n\r\n\r\n  getUserData(){\r\n    this.firebaseDB.doc('Users/' + this.id).valueChanges().subscribe(data => {\r\n      this.userData = data;\r\n      console.log(this.userData);\r\n      if (this.userData.profilePic){\r\n        this.imageUrl = this.userData.profilePic;\r\n      }\r\n    });\r\n  }\r\n\r\n  async getPicture(type: string){\r\n    if (!Capacitor.isPluginAvailable('Camera') || (this.isDesktop && type === 'gallery')){\r\n      this.filePickerRef.nativeElement.click();\r\n      return;\r\n    }\r\n\r\n    const image = await Camera.getPhoto({\r\n      quality: 100,\r\n      width: 500,\r\n      height: 500,\r\n      allowEditing: false,\r\n      resultType: CameraResultType.Base64,\r\n      source: CameraSource.Prompt\r\n    });\r\n\r\n    this.imageUrl = this.sanitizer.bypassSecurityTrustResourceUrl(image && ('data:image/png;base64,' + image.base64String));\r\n    this.isCamera = true;\r\n    this.base64Image = image.base64String;\r\n\r\n    this.uploadImage();\r\n  }\r\n\r\n  onFileChoose(event){\r\n    const file = event.target.files[0];\r\n    const pattern = /image-*/;\r\n    const reader = new FileReader();\r\n\r\n    if (!file.type.match(pattern)){\r\n      console.log('File format not supported');\r\n      this.imageFile = null;\r\n      return;\r\n    }\r\n\r\n    reader.onload = () => {\r\n      this.imageUrl = reader.result.toString();\r\n    };\r\n    reader.readAsDataURL(file);\r\n    this.isCamera = false;\r\n    this.imageFile = file;\r\n\r\n    this.uploadImage();\r\n  }\r\n\r\n  async presentImageActionSheet(){\r\n    const actionSheet = await this.actionSheetCtrl.create({\r\n      animated: true,\r\n      mode: 'ios',\r\n      buttons: [\r\n        {\r\n          text: 'Camera',\r\n          icon: 'camera-outline',\r\n          handler: () => {\r\n            this.getPicture('camera');\r\n          }\r\n        },\r\n        {\r\n          text: 'Gallery',\r\n          icon: 'image-outline',\r\n          handler: () => {\r\n            this.getPicture('gallery');\r\n          }\r\n        }]\r\n    });\r\n\r\n    await actionSheet.present();\r\n  }\r\n\r\n  async presentLoading(){\r\n    const loading = await this.loadingCtrl.create({\r\n      message: 'Please wait...',\r\n      duration: 3000\r\n    });\r\n    await loading.present();\r\n\r\n    const {role, data} = await loading.onDidDismiss();\r\n    console.log('Loading dismissed!');\r\n  }\r\n\r\n  async presentToast(tm: string, cm: string) {\r\n    const toast = await this.toastCtrl.create({\r\n      message: tm,\r\n      duration: 3000,\r\n      color: cm,\r\n    });\r\n    await toast.present();\r\n  }\r\n\r\n  uploadImage(){\r\n    this.presentLoading().then(() => {\r\n      const n = Date.now();\r\n      const filePath = `Profil/${n}`;\r\n      const fileRef = this.storage.ref(filePath);\r\n      let task;\r\n      if (this.isCamera){\r\n        task = fileRef.putString(this.base64Image, 'base64', { contentType: 'image/png' });\r\n      }\r\n      else{\r\n        task = this.storage.upload(`Profil/${n}`, this.imageFile);\r\n      }\r\n      task.snapshotChanges()\r\n          .pipe(\r\n              finalize(() => {\r\n                fileRef.getDownloadURL().subscribe(url => {\r\n                  if (url) {\r\n                    this.downloadURL = url;\r\n                    this.userData.imageUrl = this.downloadURL;\r\n                    const refPath = 'Users/' + this.id;\r\n                    this.firebaseDB.doc(refPath).update({\r\n                      profilePic: this.userData.imageUrl,\r\n                    });\r\n                  }\r\n                });\r\n              })\r\n          ).subscribe();\r\n      this.getUserData();\r\n      const msg = 'Image have been uploaded';\r\n      const clr = 'success';\r\n      this.presentToast(msg, clr);\r\n    });\r\n  }\r\n\r\n  imageLoaded(){\r\n    setTimeout(() => {\r\n      const profileWidth = document.getElementById('profilePicture').offsetWidth;\r\n      document.getElementById('profilePicture').style.height = profileWidth + 'px';\r\n    }, 10);\r\n  }\r\n\r\n}\r\n"]}