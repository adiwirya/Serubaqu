{"version":3,"sources":["./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-storage.js","./node_modules/@capacitor/core/dist/esm/core-plugin-definitions.js","./node_modules/@capacitor/core/dist/esm/global.js","./node_modules/@capacitor/core/dist/esm/index.js","./node_modules/@capacitor/core/dist/esm/util.js","./node_modules/@capacitor/core/dist/esm/web-plugins.js","./node_modules/@capacitor/core/dist/esm/web-runtime.js","./node_modules/@capacitor/core/dist/esm/web/accessibility.js","./node_modules/@capacitor/core/dist/esm/web/app.js","./node_modules/@capacitor/core/dist/esm/web/browser.js","./node_modules/@capacitor/core/dist/esm/web/camera.js","./node_modules/@capacitor/core/dist/esm/web/clipboard.js","./node_modules/@capacitor/core/dist/esm/web/device.js","./node_modules/@capacitor/core/dist/esm/web/filesystem.js","./node_modules/@capacitor/core/dist/esm/web/geolocation.js","./node_modules/@capacitor/core/dist/esm/web/index.js","./node_modules/@capacitor/core/dist/esm/web/local-notifications.js","./node_modules/@capacitor/core/dist/esm/web/modals.js","./node_modules/@capacitor/core/dist/esm/web/motion.js","./node_modules/@capacitor/core/dist/esm/web/network.js","./node_modules/@capacitor/core/dist/esm/web/permissions.js","./node_modules/@capacitor/core/dist/esm/web/share.js","./node_modules/@capacitor/core/dist/esm/web/splash-screen.js","./node_modules/@capacitor/core/dist/esm/web/storage.js","./node_modules/@capacitor/core/dist/esm/web/toast.js","./node_modules/@firebase/storage/dist/index.esm.js","./node_modules/firebase/storage/dist/index.esm.js","./src/app/profile/profile.page.html","./src/app/profile/profile-routing.module.ts","./src/app/profile/profile.module.ts","./src/app/profile/profile.page.scss","./src/app/profile/profile.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4C;AACe;AACwG;AACF;AACvI;AACkB;;AAE5C;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;AACA;AACA,WAAW,EAAE;AACb,YAAY;AACZ;AACwC;AACxC;AACA,eAAe,+CAAU;AACzB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,oBAAoB;AACpB;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA;AACA;AACA,SAAS;AACT,oBAAoB;AACpB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,oBAAoB;AACpB;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;AACA;AACA;AACA;AACA,kCAAkC;AAClC,WAAW,EAkCV;AACD;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA,0BAA0B,0DAAG;AAC7B,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;AACA;AACA;AACA;AACA,wCAAwC;AACxC,WAAW,EAwCV;AACD;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,+CAAE,iBAAiB,gEAAS,6BAA6B,gEAAS;AAChF,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,+CAAE,iBAAiB,gEAAS,6BAA6B,gEAAS;AAChF,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,iDAAI;AAClB;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA,kBAAkB,iDAAI;AACtB;AACA,mBAAmB,EAAE;AACrB,mBAAmB,GAAG;AACtB,oBAAoB;AACpB;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA,SAAS;AACT;AACA,mBAAmB,EAAE;AACrB,mBAAmB,GAAG;AACtB,mBAAmB,GAAG;AACtB,oBAAoB;AACpB;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA,SAAS;AACT;AACA,oBAAoB;AACpB;AACA,cAAc,iDAAI;AAClB;AACA;;AAEA;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;AACA,WAAW,EAAE;AACb,mBAAmB,4DAAc;AACjC,WAAW,EAAE;AACb,kCAAkC,4DAAc;AAChD,WAAW,EAAE;AACb,qCAAqC,4DAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA,8BAA8B,oEAAsB;AACpD,sCAAsC,oFAA8B;AACpE,mBAAmB,EAAE;AACrB,oBAAoB,yEAAmB;AACvC,uBAAuB,oEAAc,IAAI,SAAS,WAAW,cAAc;AAC3E,oBAAoB;AACpB;AACA;AACA,uBAAuB,EAAE;AACzB;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,GAAG;AAClB,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA,kEAAkE,sCAAsC,sDAAe,CAAC,8DAAgB,GAAG,sDAAe,CAAC,+DAAiB,MAAM,sDAAe,aAAa,sDAAe,CAAC,yDAAW,GAAG,sDAAe,CAAC,oDAAa,GAAG,sDAAe,4BAA4B,sDAAe,+BAA+B;AACrW;AACA;AACA,KAAK,gCAAgC,OAAO,oDAAM,SAAS,8DAAgB,IAAI,GAAG;AAClF,KAAK,gCAAgC,OAAO,sDAAQ,EAAE,GAAG,OAAO,oDAAM,SAAS,+DAAiB,IAAI,GAAG;AACvG,KAAK,gCAAgC,OAAO,sDAAQ,EAAE,GAAG,OAAO,oDAAM,mBAAmB,GAAG;AAC5F,KAAK,6BAA6B,OAAO,oDAAM,SAAS,yDAAW,IAAI,GAAG;AAC1E,KAAK,OAAO,oDAAM,EAAE;AACpB,KAAK,gCAAgC,OAAO,sDAAQ,EAAE,GAAG,OAAO,oDAAM,kCAAkC,GAAG;AAC3G,KAAK,gCAAgC,OAAO,sDAAQ,EAAE,GAAG,OAAO,oDAAM,qCAAqC;AAC3G;AACA,8CAA8C,wEAAkB,EAAE,iDAAiD,+BAA+B,8DAAQ,CAAC,8DAAgB,GAAG,8DAAQ,CAAC,+DAAiB,MAAM,8DAAQ,aAAa,8DAAQ,CAAC,yDAAW,GAAG,8DAAQ,CAAC,oDAAM,GAAG,8DAAQ,4BAA4B,8DAAQ,+BAA+B,EAAE,gDAAgD;AACzY,4BAA4B,CAAC,+DAAwB;AACrD,cAAc,wDAAU;AACxB;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,UAAU;AAC/B,sBAAsB,oDAAM;AAC5B,uBAAuB,8DAAgB;AACvC,aAAa,GAAG,GAAG;AACnB,sBAAsB,sDAAQ;AAC9B,aAAa;AACb,sBAAsB,oDAAM;AAC5B,uBAAuB,+DAAiB;AACxC,aAAa,GAAG,GAAG;AACnB,sBAAsB,sDAAQ;AAC9B,aAAa;AACb,sBAAsB,oDAAM;AAC5B;AACA,aAAa,GAAG,GAAG;AACnB,sBAAsB,oDAAM;AAC5B,uBAAuB,yDAAW;AAClC,aAAa,GAAG,GAAG,OAAO,oDAAa,EAAE,GAAG;AAC5C,sBAAsB,sDAAQ;AAC9B,aAAa;AACb,sBAAsB,oDAAM;AAC5B;AACA,aAAa,GAAG,GAAG;AACnB,sBAAsB,sDAAQ;AAC9B,aAAa;AACb,sBAAsB,oDAAM;AAC5B;AACA,aAAa,GAAG,EAAE,EAAE,QAAQ,EAAE;AAC9B,WAAW,EAOV;;AAED;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA,6BAA6B,yDAAS;AACtC;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,kEAAkE,sCAAsC,+DAAwB,sBAAsB,2EAAoC,IAAI;AAC9L,2BAA2B,0DAAmB,EAAE,gEAAgE;AAChH;AACA;AACA,KAAK,2BAA2B;AAChC,KAAK,OAAO,+DAAiB;AAC7B;AACA,4BAA4B,CAAC,+DAAwB;AACrD,cAAc,kDAAI;AAClB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,UAAU,2BAA2B,GAAG,OAAO,+DAAwB,EAAE,EAAE,EAAE,QAAQ,EAAE;AAC5G,WAAW,EAqBV;AACD;AACA;AACA,gCAAgC,8DAAuB,EAAE,iCAAiC;AAC1F,gCAAgC,8DAAuB,EAAE,wDAAwD,8CAA8C,EAAE,EAAE;AACnK,cAAc,oDAAoD,gEAAyB,4BAA4B,oEAAoE,EAAE,EAAE;AAC/L,4BAA4B,CAAC,+DAAwB;AACrD,cAAc,sDAAQ;AACtB;AACA;AACA;AACA,aAAa;AACb,KAAK,eAAe,EAAE;;AAEtB;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;AACA;AACA;AACA,gCAAgC,8DAAuB,EAAE,iCAAiC;AAC1F,gCAAgC,8DAAuB,EAAE,wDAAwD,8CAA8C,EAAE,wEAAwE;AACzO,cAAc,oDAAoD,gEAAyB,4BAA4B,sCAAsC,EAAE,EAAE;AACjK,4BAA4B,CAAC,+DAAwB;AACrD,cAAc,sDAAQ;AACtB;AACA;AACA;AACA,aAAa;AACb,KAAK,eAAe,EAAE;;AAEtB;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;;AAEA;AACA;AACA;AACA,cAAc,uHAAuH;AACrI;;AAE6M;;AAE7M,gD;;;;;;;;;;;;ACvfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA,CAAC,oCAAoC;AAC9B;AACP;AACA;AACA;AACA,CAAC,0CAA0C;AACpC;AACP;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD;AAC5C;AACP;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AAC1C;AACP;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AAC1C;AACP;AACA;AACA;AACA;AACA,CAAC,0DAA0D;AACpD;AACP;AACA;AACA;AACA,CAAC,sCAAsC;AAChC;AACP;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AAClC;AACP;AACA;AACA;AACA;AACA,CAAC,wDAAwD;AACzD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AAClC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AACpC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AAClC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AACjD,mD;;;;;;;;;;;;ACtJA;AAAA;AAAA;AAAA;AAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,yDAAY;AAC3E,CAAC;AACD;AACA;AACA,yHAAyH;AACzH;AAC8B;AAC9B,kC;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACjB;AACK;AACF;AAC5B,iC;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAO;AACP;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA,gC;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmC;AAC2B;AAC1B;AACV;AACI;AACD;AACG;AACC;AACC;AACL;AACa;AACd;AACC;AACA;AACC;AACI;AACE;AACN;AACF;AAC5B,kEAAe,CAAC,+CAAO;AAChB;AACP,IAAI,iEAAc,CAAC,+CAAO;AAC1B;AACA,uC;;;;;;;;;;;;ACvBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACuB;AACxB,uC;;;;;;;;;;;;ACtDA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACuB;AAClC;AACyB;AACzB,yC;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA;AACA,gCAAgC,qCAAqC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACa;AACxB;AACe;AACf,+B;;;;;;;;;;;;ACxCA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACiB;AAC5B;AACmB;AACnB,mC;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACyD;AAC7F;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B,8EAA8E,QAAQ,uDAAS;AAC/F;AACA;AACA,+BAA+B,yDAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,QAAQ,uDAAS;AAC7G;AACA,+CAA+C,yDAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qCAAqC,EAAE,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB,EAAE,EAAE;AACzB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qEAAY,8BAA8B,qEAAY;AACrF;AACA;AACA,uCAAuC,wEAAe;AACtD;AACA;AACA,uCAAuC,wEAAe;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,yEAAgB,mCAAmC,yEAAgB;AAC1G;AACA;AACA,+CAA+C,yEAAgB;AAC/D;AACA;AACA;AACA,yBAAyB;AACzB;AACA,oDAAoD,yEAAgB;AACpE;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,yEAAgB;AACvD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,+CAA+C,yEAAgB;AAC/D;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACgB;AAC3B;AACkB;AAClB,kC;;;;;;;;;;;;ACjLA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,0BAA0B;AACzF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC;AACjG;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACmB;AAC9B;AACqB;AACrB,qC;;;;;;;;;;;;AC9HA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACJ;AAChC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB;AAChE,gDAAgD;AAChD;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mDAAK;AACnB;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACgB;AAC3B;AACkB;AAClB,kC;;;;;;;;;;;;AC7HA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AAC6B;AACjE;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT,kCAAkC,4EAAmB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,8BAA8B;AACrF;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,kBAAkB;AACnF;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B;AACrF,uDAAuD,0BAA0B;AACjF,yBAAyB;AACzB,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B;AACrF,uDAAuD,0BAA0B;AACjF,yBAAyB;AACzB,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,sBAAsB;AACrE;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4EAA4E;AACrI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,qEAAqE;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,gDAAgD;AAChD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,mCAAmC;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,wCAAwC;AAChG;AACA;AACA;AACA,8DAA8D,wCAAwC;AACtG;AACA;AACA;AACA,6DAA6D,8DAA8D;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,+CAA+C,eAAe;AAC9D;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD,eAAe,uDAAS;AACxB;AACA;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,oEAAoE,QAAQ,uDAAS;AACrF;AACA,mCAAmC,yDAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qDAAqD;AACrD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACoB;AAC/B;AACsB;AACtB,sC;;;;;;;;;;;;AC/qBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACH;AACjC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB,EAAE,oDAAM;AACzB;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS,EAAE,oDAAM;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACqB;AAChC;AACuB;AACvB,uC;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC4B;AAC7B;AACsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,uBAAuB,EAAE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF;AACrF;AACA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACoB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,yCAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;;;;;;ACzJA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yEAAyE,sCAAsC,iCAAiC,EAAE,EAAE,EAAE;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,8EAA8E,SAAS,4BAA4B,EAAE;AACrH,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,mDAAmD,4CAA4C,EAAE,EAAE,EAAE;AAC9K;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AAC4B;AACvC;AAC8B;AAC9B,+C;;;;;;;;;;;;ACpHA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB,mBAAmB,yDAAW;AAC9B;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B,+EAA+E,QAAQ,uDAAS;AAChG;AACA;AACA,+BAA+B,yDAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,QAAQ,uDAAS;AACvG;AACA,uCAAuC,yDAAW;AAClD;AACA;AACA;AACA,qCAAqC;AACrC;AACA,iCAAiC;AACjC,6BAA6B,EAAE,EAAE;AACjC;AACA,yBAAyB;AACzB,qBAAqB,EAAE,EAAE;AACzB,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACgB;AAC3B;AACkB;AAClB,kC;;;;;;;;;;;;AC9EA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACgB;AAC3B;AACkB;AAClB,kC;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yDAAyD,kDAAkD;AAC3G,0DAA0D,2CAA2C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACiB;AAC5B;AACmB;AACnB,mC;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACwB;AAC5D;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,uEAAc;AAC9D,0EAA0E,aAAa;AACvF;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACqB;AAChC;AACuB;AACvB,uC;;;;;;;;;;;;ACpCA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACe;AAC1B;AACiB;AACjB,iC;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACsB;AACjC;AACwB;AACxB,yC;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qEAAqE,uBAAuB,EAAE,oBAAoB,wBAAwB,EAAE;AAC5I,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sCAAsC,uBAAuB,EAAE;AAC/D,uCAAuC,0CAA0C,EAAE;AACnF;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gDAAS;AACiB;AAC5B;AACmB;AACnB,mC;;;;;;;;;;;;ACjEA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACtB;AACpC;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC,CAAC,gDAAS;AACe;AAC1B;AACiB;AACjB,iC;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqC;AAC+C;AACrC;AACC;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,uDAAS;AACb;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC,CAAC,4DAAa;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F;AAC/F;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,mCAAmC;AACnC;AACA,aAAa,2DAA2D;AACxE;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,6BAA6B,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,gBAAgB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,4CAA4C,uCAAuC,EAAE;AACrF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8CAA8C,EAAE;AAChD;AACA;AACA;AACA;AACA,kCAAkC,mDAAmD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2BAA2B;AACvD;AACA;AACA,wBAAwB,sDAAQ,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,oBAAoB,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAS;AACpB;AACA;AACA,eAAe,yDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAS;AACpB;AACA,eAAe,yDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAS;AACpB;AACA,eAAe,yDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAS;AACpB;AACA,eAAe,yDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAS;AACpB;AACA,eAAe,yDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAS;AACpB;AACA,eAAe,yDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,iDAAiD,EAAE;AAClH,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,4DAA4D,iDAAiD,EAAE;AAC/G,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,+CAA+C,EAAE;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,+CAA+C,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,4DAAc;AACtE;AACA;AACA;AACA;AACA,wDAAwD,4DAAc;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,qDAAQ,mBAAmB,qDAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,eAAe,uDAAS;AACxB;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA,gEAAgE,iBAAiB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,yBAAyB,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0CAA0C,EAAE,eAAe,0CAA0C,EAAE;AAC5J;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6DAAS;AACrD;AACA;AACA;AACA;AACA,gBAAgB,qDAAQ;;AAEG;AAC3B;;;;;;;;;;;;;AChjHA;AAAA;AAA2B;AAC3B;;;;;;;;;;;;;ACDA;AAAe,0fAA2b,kUAAkU,aAAa,kFAAkF,UAAU,4VAA4V,eAAe,yGAAyG,gBAAgB,uaAAua,E;;;;;;;;;;;;;;;;;;;ACAvtD;AACc;AAEV;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,yDAAW;KACvB;CACF,CAAC;IAMW,wBAAwB,SAAxB,wBAAwB;CAAG;AAA3B,wBAAwB;IAJpC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,wBAAwB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AChBI;AACM;AACF;AAEA;AAEuB;AAEvB;IAWhC,iBAAiB,SAAjB,iBAAiB;CAAG;AAApB,iBAAiB;IAT7B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,gFAAwB;SACzB;QACD,YAAY,EAAE,CAAC,yDAAW,CAAC;KAC5B,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;ACnB9B;AAAe,+EAAgB,uBAAuB,yBAAyB,yBAAyB,uBAAuB,qBAAqB,GAAG,sBAAsB,kBAAkB,GAAG,6CAA6C,mjBAAmjB,E;;;;;;;;;;;;;;;;;;;;;;;;;ACA3tB;AACd;AAClB;AACiC;AAC4C;AAClC;AAC1C;AACe;AACK;IAO/C,WAAW,SAAX,WAAW;IAatB,YAAmB,OAAe,EACxB,mBAAgC,EAChC,UAA4B,EAC1B,SAA0B,EAC1B,SAA0B,EAC1B,eAAsC,EACtC,WAA8B,EAC9B,MAAc,EACd,QAAkB,EAClB,SAAuB,EACvB,OAA2B;QAVpB,YAAO,GAAP,OAAO,CAAQ;QACxB,wBAAmB,GAAnB,mBAAmB,CAAa;QAChC,eAAU,GAAV,UAAU,CAAkB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAuB;QACtC,gBAAW,GAAX,WAAW,CAAmB;QAC9B,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAU;QAClB,cAAS,GAAT,SAAS,CAAc;QACvB,YAAO,GAAP,OAAO,CAAoB;QArB/B,UAAK,GAAU,EAAE,CAAC;QAElB,kBAAa,GAAU,EAAE,CAAC;QAK1B,aAAQ,GAAY,IAAI,CAAC;IAe3B,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,EAAC;YAC5F,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;QACD,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;YACrD,IAAI,GAAG,KAAK,IAAI,EAAC;gBACf,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC;gBAClB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aACtB;QACH,CAAC,EAAE,GAAG,CAAC,EAAE;YACP,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAEG,QAAQ;;YACZ,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE;iBACjC,IAAI,CAAC,GAAG,CAAC,EAAE;gBACV,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACnC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBACjB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAGD,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,YAAY,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACtE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC3B,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAC;gBAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;aAC1C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,UAAU,CAAC,IAAY;;YAC3B,IAAI,CAAC,yDAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,KAAK,SAAS,CAAC,EAAC;gBACnF,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;gBACzC,OAAO;aACR;YAED,MAAM,KAAK,GAAG,MAAM,sDAAM,CAAC,QAAQ,CAAC;gBAClC,OAAO,EAAE,GAAG;gBACZ,KAAK,EAAE,GAAG;gBACV,MAAM,EAAE,GAAG;gBACX,YAAY,EAAE,KAAK;gBACnB,UAAU,EAAE,gEAAgB,CAAC,MAAM;gBACnC,MAAM,EAAE,4DAAY,CAAC,MAAM;aAC5B,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,8BAA8B,CAAC,KAAK,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;YACxH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,YAAY,CAAC;YAEtC,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;KAAA;IAED,YAAY,CAAC,KAAK;QAChB,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACnC,MAAM,OAAO,GAAG,SAAS,CAAC;QAC1B,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAEhC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC;YAC5B,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;YACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,OAAO;SACR;QAED,MAAM,CAAC,MAAM,GAAG,GAAG,EAAE;YACnB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC3C,CAAC,CAAC;QACF,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAEK,uBAAuB;;YAC3B,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBACpD,QAAQ,EAAE,IAAI;gBACd,IAAI,EAAE,KAAK;gBACX,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,QAAQ;wBACd,IAAI,EAAE,gBAAgB;wBACtB,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;wBAC5B,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,SAAS;wBACf,IAAI,EAAE,eAAe;wBACrB,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;wBAC7B,CAAC;qBACF;iBAAC;aACL,CAAC,CAAC;YAEH,MAAM,WAAW,CAAC,OAAO,EAAE,CAAC;QAC9B,CAAC;KAAA;IAEK,cAAc;;YAClB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBAC5C,OAAO,EAAE,gBAAgB;gBACzB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACH,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;YAExB,MAAM,EAAC,IAAI,EAAE,IAAI,EAAC,GAAG,MAAM,OAAO,CAAC,YAAY,EAAE,CAAC;YAClD,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;QACpC,CAAC;KAAA;IAEK,YAAY,CAAC,EAAU,EAAE,EAAU;;YACvC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,OAAO,EAAE,EAAE;gBACX,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAE,EAAE;aACV,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;IAED,WAAW;QACT,IAAI,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YAC9B,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YACrB,MAAM,QAAQ,GAAG,UAAU,CAAC,EAAE,CAAC;YAC/B,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC3C,IAAI,IAAI,CAAC;YACT,IAAI,IAAI,CAAC,QAAQ,EAAC;gBAChB,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,EAAE,QAAQ,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC,CAAC;aACpF;iBACG;gBACF,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;aAC3D;YACD,IAAI,CAAC,eAAe,EAAE;iBACjB,IAAI,CACD,+DAAQ,CAAC,GAAG,EAAE;gBACZ,OAAO,CAAC,cAAc,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;oBACvC,IAAI,GAAG,EAAE;wBACP,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;wBACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;wBAC1C,MAAM,OAAO,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC;wBACnC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;4BAClC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ;yBACnC,CAAC,CAAC;qBACJ;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CACL,CAAC,SAAS,EAAE,CAAC;YAClB,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,MAAM,GAAG,GAAG,0BAA0B,CAAC;YACvC,MAAM,GAAG,GAAG,SAAS,CAAC;YACtB,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,UAAU,CAAC,GAAG,EAAE;YACd,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,WAAW,CAAC;YAC3E,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC;QAC/E,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;CAEF;;YA3MO,sDAAM;YAKL,kEAAW;YACX,wEAAgB;YAJM,8DAAe;YAA+B,8DAAe;YAApF,oEAAqB;YAAmB,gEAAiB;YAFzD,sDAAM;YAEqD,uDAAQ;YADnE,sEAAY;YAFZ,wEAAkB;;;4BAyBvB,uDAAS,SAAC,YAAY,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;;AAX/B,WAAW;IALvB,+DAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,uNAAkC;;KAEnC,CAAC;GACW,WAAW,CA8LvB;AA9LuB","file":"profile-profile-module-es2015.js","sourcesContent":["import { Observable, of, from } from 'rxjs';\r\nimport { map, observeOn, switchMap } from 'rxjs/operators';\r\nimport { InjectionToken, Injectable, Inject, Optional, PLATFORM_ID, NgZone, ɵɵdefineInjectable, ɵɵinject, Pipe, ChangeDetectorRef, NgModule } from '@angular/core';\r\nimport { ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory, ɵfirebaseAppFactory, ɵfetchInstance, FIREBASE_OPTIONS, FIREBASE_APP_NAME } from '@angular/fire';\r\nimport 'firebase/storage';\r\nimport { AsyncPipe } from '@angular/common';\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: observable/fromTask.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @param {?} task\r\n * @return {?}\r\n */\r\nimport * as ɵngcc0 from '@angular/core';\r\nfunction fromTask(task) {\r\n    return new Observable((/**\r\n     * @param {?} subscriber\r\n     * @return {?}\r\n     */\r\n    subscriber => {\r\n        /** @type {?} */\r\n        const progress = (/**\r\n         * @param {?} snap\r\n         * @return {?}\r\n         */\r\n        (snap) => subscriber.next(snap));\r\n        /** @type {?} */\r\n        const error = (/**\r\n         * @param {?} e\r\n         * @return {?}\r\n         */\r\n        e => subscriber.error(e));\r\n        /** @type {?} */\r\n        const complete = (/**\r\n         * @return {?}\r\n         */\r\n        () => subscriber.complete());\r\n        task.on('state_changed', progress, (/**\r\n         * @param {?} e\r\n         * @return {?}\r\n         */\r\n        (e) => {\r\n            progress(task.snapshot);\r\n            error(e);\r\n        }), (/**\r\n         * @return {?}\r\n         */\r\n        () => {\r\n            progress(task.snapshot);\r\n            complete();\r\n        }));\r\n        return (/**\r\n         * @return {?}\r\n         */\r\n        () => task.cancel());\r\n    }));\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: task.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction AngularFireUploadTask() { }\r\nif (false) {\r\n    /** @type {?} */\r\n    AngularFireUploadTask.prototype.task;\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.snapshotChanges = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.percentageChanges = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.pause = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.cancel = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.resume = function () { };\r\n    /**\r\n     * @param {?=} onFulfilled\r\n     * @param {?=} onRejected\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.then = function (onFulfilled, onRejected) { };\r\n    /**\r\n     * @param {?} onRejected\r\n     * @return {?}\r\n     */\r\n    AngularFireUploadTask.prototype.catch = function (onRejected) { };\r\n}\r\n/**\r\n * Create an AngularFireUploadTask from a regular UploadTask from the Storage SDK.\r\n * This method creates an observable of the upload and returns on object that provides\r\n * multiple methods for controlling and monitoring the file upload.\r\n * @param {?} task\r\n * @return {?}\r\n */\r\nfunction createUploadTask(task) {\r\n    /** @type {?} */\r\n    const inner$ = fromTask(task);\r\n    return {\r\n        task,\r\n        then: task.then.bind(task),\r\n        catch: task.catch.bind(task),\r\n        pause: task.pause.bind(task),\r\n        cancel: task.cancel.bind(task),\r\n        resume: task.resume.bind(task),\r\n        snapshotChanges: (/**\r\n         * @return {?}\r\n         */\r\n        () => inner$),\r\n        percentageChanges: (/**\r\n         * @return {?}\r\n         */\r\n        () => inner$.pipe(map((/**\r\n         * @param {?} s\r\n         * @return {?}\r\n         */\r\n        s => s.bytesTransferred / s.totalBytes * 100))))\r\n    };\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: ref.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction AngularFireStorageReference() { }\r\nif (false) {\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.getDownloadURL = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.getMetadata = function () { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.delete = function () { };\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.child = function (path) { };\r\n    /**\r\n     * @param {?} meta\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.updateMetadata = function (meta) { };\r\n    /**\r\n     * @param {?} data\r\n     * @param {?=} metadata\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.put = function (data, metadata) { };\r\n    /**\r\n     * @param {?} data\r\n     * @param {?=} format\r\n     * @param {?=} metadata\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.putString = function (data, format, metadata) { };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    AngularFireStorageReference.prototype.listAll = function () { };\r\n}\r\n/**\r\n * Create an AngularFire wrapped Storage Reference. This object\r\n * creates observable methods from promise based methods.\r\n * @param {?} ref\r\n * @param {?} schedulers\r\n * @param {?} keepUnstableUntilFirst\r\n * @return {?}\r\n */\r\nfunction createStorageRef(ref, schedulers, keepUnstableUntilFirst) {\r\n    return {\r\n        getDownloadURL: (/**\r\n         * @return {?}\r\n         */\r\n        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**\r\n         * @return {?}\r\n         */\r\n        () => ref.getDownloadURL())), keepUnstableUntilFirst)),\r\n        getMetadata: (/**\r\n         * @return {?}\r\n         */\r\n        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**\r\n         * @return {?}\r\n         */\r\n        () => ref.getMetadata())), keepUnstableUntilFirst)),\r\n        delete: (/**\r\n         * @return {?}\r\n         */\r\n        () => from(ref.delete())),\r\n        child: (/**\r\n         * @param {?} path\r\n         * @return {?}\r\n         */\r\n        (path) => createStorageRef(ref.child(path), schedulers, keepUnstableUntilFirst)),\r\n        updateMetadata: (/**\r\n         * @param {?} meta\r\n         * @return {?}\r\n         */\r\n        (meta) => from(ref.updateMetadata(meta))),\r\n        put: (/**\r\n         * @param {?} data\r\n         * @param {?=} metadata\r\n         * @return {?}\r\n         */\r\n        (data, metadata) => {\r\n            /** @type {?} */\r\n            const task = ref.put(data, metadata);\r\n            return createUploadTask(task);\r\n        }),\r\n        putString: (/**\r\n         * @param {?} data\r\n         * @param {?=} format\r\n         * @param {?=} metadata\r\n         * @return {?}\r\n         */\r\n        (data, format, metadata) => {\r\n            /** @type {?} */\r\n            const task = ref.putString(data, format, metadata);\r\n            return createUploadTask(task);\r\n        }),\r\n        listAll: (/**\r\n         * @return {?}\r\n         */\r\n        () => from(ref.listAll()))\r\n    };\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: storage.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nconst BUCKET = new InjectionToken('angularfire2.storageBucket');\r\n/** @type {?} */\r\nconst MAX_UPLOAD_RETRY_TIME = new InjectionToken('angularfire2.storage.maxUploadRetryTime');\r\n/** @type {?} */\r\nconst MAX_OPERATION_RETRY_TIME = new InjectionToken('angularfire2.storage.maxOperationRetryTime');\r\n/**\r\n * AngularFireStorage Service\r\n *\r\n * This service is the main entry point for this feature module. It provides\r\n * an API for uploading and downloading binary files from Cloud Storage for\r\n * Firebase.\r\n */\r\nclass AngularFireStorage {\r\n    /**\r\n     * @param {?} options\r\n     * @param {?} nameOrConfig\r\n     * @param {?} storageBucket\r\n     * @param {?} platformId\r\n     * @param {?} zone\r\n     * @param {?} maxUploadRetryTime\r\n     * @param {?} maxOperationRetryTime\r\n     */\r\n    constructor(options, nameOrConfig, storageBucket, \r\n    // tslint:disable-next-line:ban-types\r\n    platformId, zone, maxUploadRetryTime, maxOperationRetryTime) {\r\n        this.schedulers = new ɵAngularFireSchedulers(zone);\r\n        this.keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(this.schedulers);\r\n        /** @type {?} */\r\n        const app = ɵfirebaseAppFactory(options, zone, nameOrConfig);\r\n        this.storage = ɵfetchInstance(`${app.name}.storage.${storageBucket}`, 'AngularFireStorage', app, (/**\r\n         * @return {?}\r\n         */\r\n        () => {\r\n            /** @type {?} */\r\n            const storage = zone.runOutsideAngular((/**\r\n             * @return {?}\r\n             */\r\n            () => app.storage(storageBucket || undefined)));\r\n            if (maxUploadRetryTime) {\r\n                storage.setMaxUploadRetryTime(maxUploadRetryTime);\r\n            }\r\n            if (maxOperationRetryTime) {\r\n                storage.setMaxOperationRetryTime(maxOperationRetryTime);\r\n            }\r\n            return storage;\r\n        }), [maxUploadRetryTime, maxOperationRetryTime]);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    ref(path) {\r\n        return createStorageRef(this.storage.ref(path), this.schedulers, this.keepUnstableUntilFirst);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    refFromURL(path) {\r\n        return createStorageRef(this.storage.refFromURL(path), this.schedulers, this.keepUnstableUntilFirst);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @param {?} data\r\n     * @param {?=} metadata\r\n     * @return {?}\r\n     */\r\n    upload(path, data, metadata) {\r\n        /** @type {?} */\r\n        const storageRef = this.storage.ref(path);\r\n        /** @type {?} */\r\n        const ref = createStorageRef(storageRef, this.schedulers, this.keepUnstableUntilFirst);\r\n        return ref.put(data, metadata);\r\n    }\r\n}\r\nAngularFireStorage.ɵfac = function AngularFireStorage_Factory(t) { return new (t || AngularFireStorage)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(BUCKET, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(MAX_UPLOAD_RETRY_TIME, 8), ɵngcc0.ɵɵinject(MAX_OPERATION_RETRY_TIME, 8)); };\r\n/** @nocollapse */\r\nAngularFireStorage.ctorParameters = () => [\r\n    { type: undefined, decorators: [{ type: Inject, args: [FIREBASE_OPTIONS,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [FIREBASE_APP_NAME,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [BUCKET,] }] },\r\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\r\n    { type: NgZone },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAX_UPLOAD_RETRY_TIME,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAX_OPERATION_RETRY_TIME,] }] }\r\n];\r\n/** @nocollapse */ AngularFireStorage.ɵprov = ɵɵdefineInjectable({ factory: function AngularFireStorage_Factory() { return new AngularFireStorage(ɵɵinject(FIREBASE_OPTIONS), ɵɵinject(FIREBASE_APP_NAME, 8), ɵɵinject(BUCKET, 8), ɵɵinject(PLATFORM_ID), ɵɵinject(NgZone), ɵɵinject(MAX_UPLOAD_RETRY_TIME, 8), ɵɵinject(MAX_OPERATION_RETRY_TIME, 8)); }, token: AngularFireStorage, providedIn: \"any\" });\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorage, [{\r\n        type: Injectable,\r\n        args: [{\r\n                providedIn: 'any'\r\n            }]\r\n    }], function () { return [{ type: undefined, decorators: [{\r\n                type: Inject,\r\n                args: [FIREBASE_OPTIONS]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [FIREBASE_APP_NAME]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [BUCKET]\r\n            }] }, { type: Object, decorators: [{\r\n                type: Inject,\r\n                args: [PLATFORM_ID]\r\n            }] }, { type: ɵngcc0.NgZone }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [MAX_UPLOAD_RETRY_TIME]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [MAX_OPERATION_RETRY_TIME]\r\n            }] }]; }, null); })();\r\nif (false) {\r\n    /** @type {?} */\r\n    AngularFireStorage.prototype.storage;\r\n    /** @type {?} */\r\n    AngularFireStorage.prototype.keepUnstableUntilFirst;\r\n    /** @type {?} */\r\n    AngularFireStorage.prototype.schedulers;\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: pipes/storageUrl.pipe.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * to be used with in combination with | async\r\n */\r\nclass GetDownloadURLPipe {\r\n    /**\r\n     * @param {?} storage\r\n     * @param {?} cdr\r\n     */\r\n    constructor(storage, cdr) {\r\n        this.storage = storage;\r\n        this.asyncPipe = new AsyncPipe(cdr);\r\n    }\r\n    /**\r\n     * @param {?} path\r\n     * @return {?}\r\n     */\r\n    transform(path) {\r\n        if (path !== this.path) {\r\n            this.path = path;\r\n            this.downloadUrl$ = this.storage.ref(path).getDownloadURL();\r\n        }\r\n        return this.asyncPipe.transform(this.downloadUrl$);\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnDestroy() {\r\n        this.asyncPipe.ngOnDestroy();\r\n    }\r\n}\r\nGetDownloadURLPipe.ɵfac = function GetDownloadURLPipe_Factory(t) { return new (t || GetDownloadURLPipe)(ɵngcc0.ɵɵdirectiveInject(AngularFireStorage), ɵngcc0.ɵɵinjectPipeChangeDetectorRef()); };\r\nGetDownloadURLPipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"getDownloadURL\", type: GetDownloadURLPipe, pure: false });\r\n/** @nocollapse */\r\nGetDownloadURLPipe.ctorParameters = () => [\r\n    { type: AngularFireStorage },\r\n    { type: ChangeDetectorRef }\r\n];\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GetDownloadURLPipe, [{\r\n        type: Pipe,\r\n        args: [{\r\n                name: 'getDownloadURL',\r\n                pure: false\r\n            }]\r\n    }], function () { return [{ type: AngularFireStorage }, { type: ɵngcc0.ChangeDetectorRef }]; }, null); })();\r\nif (false) {\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.asyncPipe;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.path;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.downloadUrl$;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    GetDownloadURLPipe.prototype.storage;\r\n}\r\nclass GetDownloadURLPipeModule {\r\n}\r\nGetDownloadURLPipeModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: GetDownloadURLPipeModule });\r\nGetDownloadURLPipeModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function GetDownloadURLPipeModule_Factory(t) { return new (t || GetDownloadURLPipeModule)(); } });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(GetDownloadURLPipeModule, { declarations: [GetDownloadURLPipe], exports: [GetDownloadURLPipe] }); })();\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GetDownloadURLPipeModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                declarations: [GetDownloadURLPipe],\r\n                exports: [GetDownloadURLPipe]\r\n            }]\r\n    }], null, null); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: storage.module.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nclass AngularFireStorageModule {\r\n}\r\nAngularFireStorageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireStorageModule });\r\nAngularFireStorageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireStorageModule_Factory(t) { return new (t || AngularFireStorageModule)(); }, providers: [AngularFireStorage], imports: [GetDownloadURLPipeModule] });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AngularFireStorageModule, { exports: [GetDownloadURLPipeModule] }); })();\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorageModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                exports: [GetDownloadURLPipeModule],\r\n                providers: [AngularFireStorage]\r\n            }]\r\n    }], null, null); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: public_api.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: angular-fire-storage.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n\r\nexport { AngularFireStorage, AngularFireStorageModule, BUCKET, GetDownloadURLPipe, GetDownloadURLPipeModule, MAX_OPERATION_RETRY_TIME, MAX_UPLOAD_RETRY_TIME, createStorageRef, createUploadTask, fromTask };\r\n\r\n//# sourceMappingURL=angular-fire-storage.js.map","export var CameraSource;\r\n(function (CameraSource) {\r\n    CameraSource[\"Prompt\"] = \"PROMPT\";\r\n    CameraSource[\"Camera\"] = \"CAMERA\";\r\n    CameraSource[\"Photos\"] = \"PHOTOS\";\r\n})(CameraSource || (CameraSource = {}));\r\nexport var CameraDirection;\r\n(function (CameraDirection) {\r\n    CameraDirection[\"Rear\"] = \"REAR\";\r\n    CameraDirection[\"Front\"] = \"FRONT\";\r\n})(CameraDirection || (CameraDirection = {}));\r\nexport var CameraResultType;\r\n(function (CameraResultType) {\r\n    CameraResultType[\"Uri\"] = \"uri\";\r\n    CameraResultType[\"Base64\"] = \"base64\";\r\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\r\n})(CameraResultType || (CameraResultType = {}));\r\nexport var FilesystemDirectory;\r\n(function (FilesystemDirectory) {\r\n    /**\r\n     * The Documents directory\r\n     * On iOS it's the app's documents directory.\r\n     * Use this directory to store user-generated content.\r\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\r\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\r\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\r\n     * in the `AndroidManifest.xml`\r\n     */\r\n    FilesystemDirectory[\"Documents\"] = \"DOCUMENTS\";\r\n    /**\r\n     * The Data directory\r\n     * On iOS it will use the Documents directory\r\n     * On Android it's the directory holding application files.\r\n     * Files will be deleted when the application is uninstalled.\r\n     */\r\n    FilesystemDirectory[\"Data\"] = \"DATA\";\r\n    /**\r\n     * The Cache directory\r\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files\r\n     * that your app can re-create easily.\r\n     */\r\n    FilesystemDirectory[\"Cache\"] = \"CACHE\";\r\n    /**\r\n     * The external directory\r\n     * On iOS it will use the Documents directory\r\n     * On Android it's the directory on the primary shared/external\r\n     * storage device where the application can place persistent files it owns.\r\n     * These files are internal to the applications, and not typically visible\r\n     * to the user as media.\r\n     * Files will be deleted when the application is uninstalled.\r\n     */\r\n    FilesystemDirectory[\"External\"] = \"EXTERNAL\";\r\n    /**\r\n     * The external storage directory\r\n     * On iOS it will use the Documents directory\r\n     * On Android it's the primary shared/external storage directory.\r\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\r\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\r\n     * in the `AndroidManifest.xml`\r\n     */\r\n    FilesystemDirectory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\r\n})(FilesystemDirectory || (FilesystemDirectory = {}));\r\nexport var FilesystemEncoding;\r\n(function (FilesystemEncoding) {\r\n    FilesystemEncoding[\"UTF8\"] = \"utf8\";\r\n    FilesystemEncoding[\"ASCII\"] = \"ascii\";\r\n    FilesystemEncoding[\"UTF16\"] = \"utf16\";\r\n})(FilesystemEncoding || (FilesystemEncoding = {}));\r\nexport var HapticsImpactStyle;\r\n(function (HapticsImpactStyle) {\r\n    HapticsImpactStyle[\"Heavy\"] = \"HEAVY\";\r\n    HapticsImpactStyle[\"Medium\"] = \"MEDIUM\";\r\n    HapticsImpactStyle[\"Light\"] = \"LIGHT\";\r\n})(HapticsImpactStyle || (HapticsImpactStyle = {}));\r\nexport var HapticsNotificationType;\r\n(function (HapticsNotificationType) {\r\n    HapticsNotificationType[\"SUCCESS\"] = \"SUCCESS\";\r\n    HapticsNotificationType[\"WARNING\"] = \"WARNING\";\r\n    HapticsNotificationType[\"ERROR\"] = \"ERROR\";\r\n})(HapticsNotificationType || (HapticsNotificationType = {}));\r\nexport var KeyboardStyle;\r\n(function (KeyboardStyle) {\r\n    KeyboardStyle[\"Dark\"] = \"DARK\";\r\n    KeyboardStyle[\"Light\"] = \"LIGHT\";\r\n})(KeyboardStyle || (KeyboardStyle = {}));\r\nexport var KeyboardResize;\r\n(function (KeyboardResize) {\r\n    KeyboardResize[\"Body\"] = \"body\";\r\n    KeyboardResize[\"Ionic\"] = \"ionic\";\r\n    KeyboardResize[\"Native\"] = \"native\";\r\n    KeyboardResize[\"None\"] = \"none\";\r\n})(KeyboardResize || (KeyboardResize = {}));\r\nexport var ActionSheetOptionStyle;\r\n(function (ActionSheetOptionStyle) {\r\n    ActionSheetOptionStyle[\"Default\"] = \"DEFAULT\";\r\n    ActionSheetOptionStyle[\"Destructive\"] = \"DESTRUCTIVE\";\r\n    ActionSheetOptionStyle[\"Cancel\"] = \"CANCEL\";\r\n})(ActionSheetOptionStyle || (ActionSheetOptionStyle = {}));\r\n//\r\nexport var PermissionType;\r\n(function (PermissionType) {\r\n    PermissionType[\"Camera\"] = \"camera\";\r\n    PermissionType[\"Photos\"] = \"photos\";\r\n    PermissionType[\"Geolocation\"] = \"geolocation\";\r\n    PermissionType[\"Notifications\"] = \"notifications\";\r\n    PermissionType[\"ClipboardRead\"] = \"clipboard-read\";\r\n    PermissionType[\"ClipboardWrite\"] = \"clipboard-write\";\r\n    PermissionType[\"Microphone\"] = \"microphone\";\r\n})(PermissionType || (PermissionType = {}));\r\nexport var PhotosAlbumType;\r\n(function (PhotosAlbumType) {\r\n    /**\r\n     * Album is a \"smart\" album (such as Favorites or Recently Added)\r\n     */\r\n    PhotosAlbumType[\"Smart\"] = \"smart\";\r\n    /**\r\n     * Album is a cloud-shared album\r\n     */\r\n    PhotosAlbumType[\"Shared\"] = \"shared\";\r\n    /**\r\n     * Album is a user-created album\r\n     */\r\n    PhotosAlbumType[\"User\"] = \"user\";\r\n})(PhotosAlbumType || (PhotosAlbumType = {}));\r\nexport var StatusBarStyle;\r\n(function (StatusBarStyle) {\r\n    /**\r\n     * Light text for dark backgrounds.\r\n     */\r\n    StatusBarStyle[\"Dark\"] = \"DARK\";\r\n    /**\r\n     * Dark text for light backgrounds.\r\n     */\r\n    StatusBarStyle[\"Light\"] = \"LIGHT\";\r\n})(StatusBarStyle || (StatusBarStyle = {}));\r\nexport var StatusBarAnimation;\r\n(function (StatusBarAnimation) {\r\n    /**\r\n     * No animation during show/hide.\r\n     */\r\n    StatusBarAnimation[\"None\"] = \"NONE\";\r\n    /**\r\n     * Slide animation during show/hide.\r\n     */\r\n    StatusBarAnimation[\"Slide\"] = \"SLIDE\";\r\n    /**\r\n     * Fade animation during show/hide.\r\n     */\r\n    StatusBarAnimation[\"Fade\"] = \"FADE\";\r\n})(StatusBarAnimation || (StatusBarAnimation = {}));\r\n//# sourceMappingURL=core-plugin-definitions.js.map","import { CapacitorWeb } from './web-runtime';\r\n// Create our default Capacitor instance, which will be\r\n// overridden on native platforms\r\nvar Capacitor = (function (globalThis) {\r\n    // Create a new CapacitorWeb instance if one doesn't already exist on globalThis\r\n    // Ensure the global is assigned the same Capacitor instance,\r\n    // then export Capacitor so it can be imported in other modules\r\n    return globalThis.Capacitor = (globalThis.Capacitor || new CapacitorWeb());\r\n})(\r\n// figure out the current globalThis, such as \"window\", \"self\" or \"global\"\r\n// ensure errors are not thrown in an node SSR environment or web worker\r\ntypeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {});\r\nvar Plugins = Capacitor.Plugins;\r\nexport { Capacitor, Plugins };\r\n//# sourceMappingURL=global.js.map","export * from './core-plugin-definitions';\r\nexport * from './global';\r\nexport * from './web-plugins';\r\nexport * from './web/index';\r\n//# sourceMappingURL=index.js.map","export var extend = function (target) {\r\n    var objs = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        objs[_i - 1] = arguments[_i];\r\n    }\r\n    objs.forEach(function (o) {\r\n        if (o && typeof (o) === 'object') {\r\n            for (var k in o) {\r\n                if (o.hasOwnProperty(k)) {\r\n                    target[k] = o[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return target;\r\n};\r\nexport var uuid4 = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n};\r\n//# sourceMappingURL=util.js.map","import { Plugins } from './global';\r\nimport { mergeWebPlugins, mergeWebPlugin } from './web/index';\r\nexport * from './web/accessibility';\r\nexport * from './web/app';\r\nexport * from './web/browser';\r\nexport * from './web/camera';\r\nexport * from './web/clipboard';\r\nexport * from './web/filesystem';\r\nexport * from './web/geolocation';\r\nexport * from './web/device';\r\nexport * from './web/local-notifications';\r\nexport * from './web/share';\r\nexport * from './web/modals';\r\nexport * from './web/motion';\r\nexport * from './web/network';\r\nexport * from './web/permissions';\r\nexport * from './web/splash-screen';\r\nexport * from './web/storage';\r\nexport * from './web/toast';\r\nmergeWebPlugins(Plugins);\r\nexport var registerWebPlugin = function (plugin) {\r\n    mergeWebPlugin(Plugins, plugin);\r\n};\r\n//# sourceMappingURL=web-plugins.js.map","var CapacitorWeb = /** @class */ (function () {\r\n    function CapacitorWeb() {\r\n        var _this = this;\r\n        this.platform = 'web';\r\n        this.isNative = false;\r\n        // Need to assign here to avoid having to define every plugin but still\r\n        // get the typed benefits of the provided plugins in PluginRegistry\r\n        this.Plugins = {};\r\n        // Gracefully degrade in non-Proxy supporting engines, e.g. IE11. This\r\n        // effectively means that trying to access an unavailable plugin will\r\n        // locally throw, but this is still better than throwing a syntax error.\r\n        if (typeof Proxy !== 'undefined') {\r\n            // Build a proxy for the Plugins object that returns the \"Noop Plugin\"\r\n            // if a plugin isn't available\r\n            this.Plugins = new Proxy(this.Plugins, {\r\n                get: function (target, prop) {\r\n                    if (typeof target[prop] === 'undefined') {\r\n                        var thisRef_1 = _this;\r\n                        return new Proxy({}, {\r\n                            get: function (_target, _prop) {\r\n                                if (typeof _target[_prop] === 'undefined') {\r\n                                    return thisRef_1.pluginMethodNoop.bind(thisRef_1, _target, _prop, prop);\r\n                                }\r\n                                else {\r\n                                    return _target[_prop];\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        return target[prop];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    CapacitorWeb.prototype.pluginMethodNoop = function (_target, _prop, pluginName) {\r\n        return Promise.reject(pluginName + \" does not have web implementation.\");\r\n    };\r\n    CapacitorWeb.prototype.getPlatform = function () {\r\n        return this.platform;\r\n    };\r\n    CapacitorWeb.prototype.isPluginAvailable = function (name) {\r\n        return this.Plugins.hasOwnProperty(name);\r\n    };\r\n    CapacitorWeb.prototype.convertFileSrc = function (filePath) {\r\n        return filePath;\r\n    };\r\n    CapacitorWeb.prototype.handleError = function (e) {\r\n        console.error(e);\r\n    };\r\n    return CapacitorWeb;\r\n}());\r\nexport { CapacitorWeb };\r\n//# sourceMappingURL=web-runtime.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar AccessibilityPluginWeb = /** @class */ (function (_super) {\r\n    __extends(AccessibilityPluginWeb, _super);\r\n    function AccessibilityPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Accessibility',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    AccessibilityPluginWeb.prototype.isScreenReaderEnabled = function () {\r\n        throw new Error('Feature not available in the browser');\r\n    };\r\n    AccessibilityPluginWeb.prototype.speak = function (options) {\r\n        if (!('speechSynthesis' in window)) {\r\n            return Promise.reject('Browser does not support the Speech Synthesis API');\r\n        }\r\n        var utterance = new SpeechSynthesisUtterance(options.value);\r\n        if (options.language) {\r\n            utterance.lang = options.language;\r\n        }\r\n        window.speechSynthesis.speak(utterance);\r\n        return Promise.resolve();\r\n    };\r\n    return AccessibilityPluginWeb;\r\n}(WebPlugin));\r\nexport { AccessibilityPluginWeb };\r\nvar Accessibility = new AccessibilityPluginWeb();\r\nexport { Accessibility };\r\n//# sourceMappingURL=accessibility.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar AppPluginWeb = /** @class */ (function (_super) {\r\n    __extends(AppPluginWeb, _super);\r\n    function AppPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'App',\r\n            platforms: ['web']\r\n        }) || this;\r\n        if (typeof document !== 'undefined') {\r\n            document.addEventListener('visibilitychange', _this.handleVisibilityChange.bind(_this), false);\r\n        }\r\n        return _this;\r\n    }\r\n    AppPluginWeb.prototype.exitApp = function () {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    AppPluginWeb.prototype.canOpenUrl = function (_options) {\r\n        return Promise.resolve({ value: true });\r\n    };\r\n    AppPluginWeb.prototype.openUrl = function (_options) {\r\n        return Promise.resolve({ completed: true });\r\n    };\r\n    AppPluginWeb.prototype.getLaunchUrl = function () {\r\n        return Promise.resolve({ url: '' });\r\n    };\r\n    AppPluginWeb.prototype.getState = function () {\r\n        return Promise.resolve({ isActive: document.hidden !== true });\r\n    };\r\n    AppPluginWeb.prototype.handleVisibilityChange = function () {\r\n        var data = {\r\n            isActive: document.hidden !== true\r\n        };\r\n        this.notifyListeners('appStateChange', data);\r\n    };\r\n    return AppPluginWeb;\r\n}(WebPlugin));\r\nexport { AppPluginWeb };\r\nvar App = new AppPluginWeb();\r\nexport { App };\r\n//# sourceMappingURL=app.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar BrowserPluginWeb = /** @class */ (function (_super) {\r\n    __extends(BrowserPluginWeb, _super);\r\n    function BrowserPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Browser',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    BrowserPluginWeb.prototype.open = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._lastWindow = window.open(options.url, options.windowName || '_blank');\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    BrowserPluginWeb.prototype.prefetch = function (_options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                // Does nothing\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    BrowserPluginWeb.prototype.close = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._lastWindow && this._lastWindow.close();\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    return BrowserPluginWeb;\r\n}(WebPlugin));\r\nexport { BrowserPluginWeb };\r\nvar Browser = new BrowserPluginWeb();\r\nexport { Browser };\r\n//# sourceMappingURL=browser.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { CameraResultType, CameraDirection, CameraSource } from '../core-plugin-definitions';\r\nvar CameraPluginWeb = /** @class */ (function (_super) {\r\n    __extends(CameraPluginWeb, _super);\r\n    function CameraPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Camera',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    CameraPluginWeb.prototype.getPhoto = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var cameraModal_1, e_1;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    if (!options.webUseInput) return [3 /*break*/, 1];\r\n                                    this.fileInputExperience(options, resolve);\r\n                                    return [3 /*break*/, 7];\r\n                                case 1:\r\n                                    if (!customElements.get('pwa-camera-modal')) return [3 /*break*/, 6];\r\n                                    cameraModal_1 = document.createElement('pwa-camera-modal');\r\n                                    document.body.appendChild(cameraModal_1);\r\n                                    _a.label = 2;\r\n                                case 2:\r\n                                    _a.trys.push([2, 4, , 5]);\r\n                                    return [4 /*yield*/, cameraModal_1.componentOnReady()];\r\n                                case 3:\r\n                                    _a.sent();\r\n                                    cameraModal_1.addEventListener('onPhoto', function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n                                        var photo, _a;\r\n                                        return __generator(this, function (_b) {\r\n                                            switch (_b.label) {\r\n                                                case 0:\r\n                                                    photo = e.detail;\r\n                                                    if (!(photo === null)) return [3 /*break*/, 1];\r\n                                                    reject('User cancelled photos app');\r\n                                                    return [3 /*break*/, 4];\r\n                                                case 1:\r\n                                                    if (!(photo instanceof Error)) return [3 /*break*/, 2];\r\n                                                    reject(photo.message);\r\n                                                    return [3 /*break*/, 4];\r\n                                                case 2:\r\n                                                    _a = resolve;\r\n                                                    return [4 /*yield*/, this._getCameraPhoto(photo, options)];\r\n                                                case 3:\r\n                                                    _a.apply(void 0, [_b.sent()]);\r\n                                                    _b.label = 4;\r\n                                                case 4:\r\n                                                    cameraModal_1.dismiss();\r\n                                                    document.body.removeChild(cameraModal_1);\r\n                                                    return [2 /*return*/];\r\n                                            }\r\n                                        });\r\n                                    }); });\r\n                                    cameraModal_1.present();\r\n                                    return [3 /*break*/, 5];\r\n                                case 4:\r\n                                    e_1 = _a.sent();\r\n                                    this.fileInputExperience(options, resolve);\r\n                                    return [3 /*break*/, 5];\r\n                                case 5: return [3 /*break*/, 7];\r\n                                case 6:\r\n                                    console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.\");\r\n                                    this.fileInputExperience(options, resolve);\r\n                                    _a.label = 7;\r\n                                case 7: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    CameraPluginWeb.prototype.fileInputExperience = function (options, resolve) {\r\n        var input = document.querySelector('#_capacitor-camera-input');\r\n        var cleanup = function () {\r\n            input.parentNode && input.parentNode.removeChild(input);\r\n        };\r\n        if (!input) {\r\n            input = document.createElement('input');\r\n            input.id = '_capacitor-camera-input';\r\n            input.type = 'file';\r\n            document.body.appendChild(input);\r\n        }\r\n        input.accept = 'image/*';\r\n        input.capture = true;\r\n        if (options.source === CameraSource.Photos || options.source === CameraSource.Prompt) {\r\n            input.removeAttribute('capture');\r\n        }\r\n        else if (options.direction === CameraDirection.Front) {\r\n            input.capture = 'user';\r\n        }\r\n        else if (options.direction === CameraDirection.Rear) {\r\n            input.capture = 'environment';\r\n        }\r\n        input.addEventListener('change', function (_e) {\r\n            var file = input.files[0];\r\n            var format = 'jpeg';\r\n            if (file.type === 'image/png') {\r\n                format = 'png';\r\n            }\r\n            else if (file.type === 'image/gif') {\r\n                format = 'gif';\r\n            }\r\n            if (options.resultType === CameraResultType.DataUrl || options.resultType === CameraResultType.Base64) {\r\n                var reader_1 = new FileReader();\r\n                reader_1.addEventListener('load', function () {\r\n                    if (options.resultType === CameraResultType.DataUrl) {\r\n                        resolve({\r\n                            dataUrl: reader_1.result,\r\n                            format: format\r\n                        });\r\n                    }\r\n                    else if (options.resultType === CameraResultType.Base64) {\r\n                        var b64 = reader_1.result.split(',')[1];\r\n                        resolve({\r\n                            base64String: b64,\r\n                            format: format\r\n                        });\r\n                    }\r\n                    cleanup();\r\n                });\r\n                reader_1.readAsDataURL(file);\r\n            }\r\n            else {\r\n                resolve({\r\n                    webPath: URL.createObjectURL(file),\r\n                    format: format\r\n                });\r\n                cleanup();\r\n            }\r\n        });\r\n        input.click();\r\n    };\r\n    CameraPluginWeb.prototype._getCameraPhoto = function (photo, options) {\r\n        return new Promise(function (resolve, reject) {\r\n            var reader = new FileReader();\r\n            var format = photo.type.split('/')[1];\r\n            if (options.resultType === CameraResultType.Uri) {\r\n                resolve({\r\n                    webPath: URL.createObjectURL(photo),\r\n                    format: format\r\n                });\r\n            }\r\n            else {\r\n                reader.readAsDataURL(photo);\r\n                reader.onloadend = function () {\r\n                    var r = reader.result;\r\n                    if (options.resultType === CameraResultType.DataUrl) {\r\n                        resolve({\r\n                            dataUrl: r,\r\n                            format: format\r\n                        });\r\n                    }\r\n                    else {\r\n                        resolve({\r\n                            base64String: r.split(',')[1],\r\n                            format: format\r\n                        });\r\n                    }\r\n                };\r\n                reader.onerror = function (e) {\r\n                    reject(e);\r\n                };\r\n            }\r\n        });\r\n    };\r\n    return CameraPluginWeb;\r\n}(WebPlugin));\r\nexport { CameraPluginWeb };\r\nvar Camera = new CameraPluginWeb();\r\nexport { Camera };\r\n//# sourceMappingURL=camera.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar ClipboardPluginWeb = /** @class */ (function (_super) {\r\n    __extends(ClipboardPluginWeb, _super);\r\n    function ClipboardPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Clipboard',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    ClipboardPluginWeb.prototype.write = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blob, clipboardItemInput, err_1;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!navigator.clipboard) {\r\n                            return [2 /*return*/, Promise.reject('Clipboard API not available in this browser')];\r\n                        }\r\n                        if (!(options.string !== undefined || options.url)) return [3 /*break*/, 2];\r\n                        if (!navigator.clipboard.writeText) {\r\n                            return [2 /*return*/, Promise.reject('Writting to clipboard not supported in this browser')];\r\n                        }\r\n                        return [4 /*yield*/, navigator.clipboard.writeText(options.string !== undefined ? options.string : options.url)];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 10];\r\n                    case 2:\r\n                        if (!options.image) return [3 /*break*/, 9];\r\n                        if (!navigator.clipboard.write) {\r\n                            return [2 /*return*/, Promise.reject('Setting images not supported in this browser')];\r\n                        }\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _b.trys.push([3, 7, , 8]);\r\n                        return [4 /*yield*/, fetch(options.image)];\r\n                    case 4: return [4 /*yield*/, (_b.sent()).blob()];\r\n                    case 5:\r\n                        blob = _b.sent();\r\n                        clipboardItemInput = new ClipboardItem((_a = {}, _a[blob.type] = blob, _a));\r\n                        return [4 /*yield*/, navigator.clipboard.write([clipboardItemInput])];\r\n                    case 6:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        err_1 = _b.sent();\r\n                        return [2 /*return*/, Promise.reject('Failed to write image')];\r\n                    case 8: return [3 /*break*/, 10];\r\n                    case 9: return [2 /*return*/, Promise.reject('Nothing to write')];\r\n                    case 10: return [2 /*return*/, Promise.resolve()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ClipboardPluginWeb.prototype.read = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var clipboardItems, type, clipboardBlob, data, err_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!navigator.clipboard) {\r\n                            return [2 /*return*/, Promise.reject('Clipboard API not available in this browser')];\r\n                        }\r\n                        if (!!navigator.clipboard.read) return [3 /*break*/, 1];\r\n                        if (!navigator.clipboard.readText) {\r\n                            return [2 /*return*/, Promise.reject('Reading from clipboard not supported in this browser')];\r\n                        }\r\n                        return [2 /*return*/, this.readText()];\r\n                    case 1:\r\n                        _a.trys.push([1, 5, , 6]);\r\n                        return [4 /*yield*/, navigator.clipboard.read()];\r\n                    case 2:\r\n                        clipboardItems = _a.sent();\r\n                        type = clipboardItems[0].types[0];\r\n                        return [4 /*yield*/, clipboardItems[0].getType(type)];\r\n                    case 3:\r\n                        clipboardBlob = _a.sent();\r\n                        return [4 /*yield*/, this._getBlobData(clipboardBlob, type)];\r\n                    case 4:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, Promise.resolve({ value: data, type: type })];\r\n                    case 5:\r\n                        err_2 = _a.sent();\r\n                        return [2 /*return*/, this.readText()];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ClipboardPluginWeb.prototype.readText = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var text;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, navigator.clipboard.readText()];\r\n                    case 1:\r\n                        text = _a.sent();\r\n                        return [2 /*return*/, Promise.resolve({ value: text, type: 'text/plain' })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ClipboardPluginWeb.prototype._getBlobData = function (clipboardBlob, type) {\r\n        return new Promise(function (resolve, reject) {\r\n            var reader = new FileReader();\r\n            if (type.includes('image')) {\r\n                reader.readAsDataURL(clipboardBlob);\r\n            }\r\n            else {\r\n                reader.readAsText(clipboardBlob);\r\n            }\r\n            reader.onloadend = function () {\r\n                var r = reader.result;\r\n                resolve(r);\r\n            };\r\n            reader.onerror = function (e) {\r\n                reject(e);\r\n            };\r\n        });\r\n    };\r\n    return ClipboardPluginWeb;\r\n}(WebPlugin));\r\nexport { ClipboardPluginWeb };\r\nvar Clipboard = new ClipboardPluginWeb();\r\nexport { Clipboard };\r\n//# sourceMappingURL=clipboard.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { uuid4 } from '../util';\r\nvar DevicePluginWeb = /** @class */ (function (_super) {\r\n    __extends(DevicePluginWeb, _super);\r\n    function DevicePluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Device',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    DevicePluginWeb.prototype.getInfo = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ua, uaFields;\r\n            return __generator(this, function (_a) {\r\n                ua = navigator.userAgent;\r\n                uaFields = this.parseUa(ua);\r\n                return [2 /*return*/, Promise.resolve({\r\n                        model: uaFields.model,\r\n                        platform: 'web',\r\n                        appVersion: '',\r\n                        appBuild: '',\r\n                        appId: '',\r\n                        appName: '',\r\n                        operatingSystem: uaFields.operatingSystem,\r\n                        osVersion: uaFields.osVersion,\r\n                        manufacturer: navigator.vendor,\r\n                        isVirtual: false,\r\n                        uuid: this.getUid()\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    DevicePluginWeb.prototype.getBatteryInfo = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var battery, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        battery = {};\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, navigator.getBattery()];\r\n                    case 2:\r\n                        battery = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/, Promise.resolve({\r\n                            batteryLevel: battery.level,\r\n                            isCharging: battery.charging\r\n                        })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DevicePluginWeb.prototype.getLanguageCode = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, {\r\n                        value: navigator.language\r\n                    }];\r\n            });\r\n        });\r\n    };\r\n    DevicePluginWeb.prototype.parseUa = function (_ua) {\r\n        var uaFields = {};\r\n        var start = _ua.indexOf('(') + 1;\r\n        var end = _ua.indexOf(') AppleWebKit');\r\n        if (_ua.indexOf(') Gecko') !== -1) {\r\n            end = _ua.indexOf(') Gecko');\r\n        }\r\n        var fields = _ua.substring(start, end);\r\n        if (_ua.indexOf('Android') !== -1) {\r\n            uaFields.model = fields.replace('; wv', '').split('; ').pop().split(' Build')[0];\r\n            uaFields.osVersion = fields.split('; ')[1];\r\n        }\r\n        else {\r\n            uaFields.model = fields.split('; ')[0];\r\n            if (navigator.oscpu) {\r\n                uaFields.osVersion = navigator.oscpu;\r\n            }\r\n            else {\r\n                if (_ua.indexOf('Windows') !== -1) {\r\n                    uaFields.osVersion = fields;\r\n                }\r\n                else {\r\n                    var lastParts = fields.split('; ').pop().replace(' like Mac OS X', '').split(' ');\r\n                    uaFields.osVersion = lastParts[lastParts.length - 1].replace(/_/g, '.');\r\n                }\r\n            }\r\n        }\r\n        if (/android/i.test(_ua)) {\r\n            uaFields.operatingSystem = 'android';\r\n        }\r\n        else if (/iPad|iPhone|iPod/.test(_ua) && !window.MSStream) {\r\n            uaFields.operatingSystem = 'ios';\r\n        }\r\n        else if (/Win/.test(_ua)) {\r\n            uaFields.operatingSystem = 'windows';\r\n        }\r\n        else if (/Mac/i.test(_ua)) {\r\n            uaFields.operatingSystem = 'mac';\r\n        }\r\n        else {\r\n            uaFields.operatingSystem = 'unknown';\r\n        }\r\n        return uaFields;\r\n    };\r\n    DevicePluginWeb.prototype.getUid = function () {\r\n        var uid = window.localStorage.getItem('_capuid');\r\n        if (uid) {\r\n            return uid;\r\n        }\r\n        uid = uuid4();\r\n        window.localStorage.setItem('_capuid', uid);\r\n        return uid;\r\n    };\r\n    return DevicePluginWeb;\r\n}(WebPlugin));\r\nexport { DevicePluginWeb };\r\nvar Device = new DevicePluginWeb();\r\nexport { Device };\r\n//# sourceMappingURL=device.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { FilesystemDirectory } from '../core-plugin-definitions';\r\nvar FilesystemPluginWeb = /** @class */ (function (_super) {\r\n    __extends(FilesystemPluginWeb, _super);\r\n    function FilesystemPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Filesystem',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.DEFAULT_DIRECTORY = FilesystemDirectory.Data;\r\n        _this.DB_VERSION = 1;\r\n        _this.DB_NAME = 'Disc';\r\n        _this._writeCmds = ['add', 'put', 'delete'];\r\n        return _this;\r\n    }\r\n    FilesystemPluginWeb.prototype.initDb = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this._db !== undefined) {\r\n                    return [2 /*return*/, this._db];\r\n                }\r\n                if (!('indexedDB' in window)) {\r\n                    throw new Error('This browser doesn\\'t support IndexedDB');\r\n                }\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        var request = indexedDB.open(_this.DB_NAME, _this.DB_VERSION);\r\n                        request.onupgradeneeded = FilesystemPluginWeb.doUpgrade;\r\n                        request.onsuccess = function () {\r\n                            _this._db = request.result;\r\n                            resolve(request.result);\r\n                        };\r\n                        request.onerror = function () { return reject(request.error); };\r\n                        request.onblocked = function () {\r\n                            console.warn('db blocked');\r\n                        };\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb.doUpgrade = function (event) {\r\n        var eventTarget = event.target;\r\n        var db = eventTarget.result;\r\n        switch (event.oldVersion) {\r\n            case 0:\r\n            case 1:\r\n            default:\r\n                if (db.objectStoreNames.contains('FileStorage')) {\r\n                    db.deleteObjectStore('FileStorage');\r\n                }\r\n                var store = db.createObjectStore('FileStorage', { keyPath: 'path' });\r\n                store.createIndex('by_folder', 'folder');\r\n        }\r\n    };\r\n    FilesystemPluginWeb.prototype.dbRequest = function (cmd, args) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var readFlag;\r\n            return __generator(this, function (_a) {\r\n                readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\r\n                return [2 /*return*/, this.initDb()\r\n                        .then(function (conn) {\r\n                        return new Promise(function (resolve, reject) {\r\n                            var tx = conn.transaction(['FileStorage'], readFlag);\r\n                            var store = tx.objectStore('FileStorage');\r\n                            var req = store[cmd].apply(store, args);\r\n                            req.onsuccess = function () { return resolve(req.result); };\r\n                            req.onerror = function () { return reject(req.error); };\r\n                        });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb.prototype.dbIndexRequest = function (indexName, cmd, args) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var readFlag;\r\n            return __generator(this, function (_a) {\r\n                readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\r\n                return [2 /*return*/, this.initDb()\r\n                        .then(function (conn) {\r\n                        return new Promise(function (resolve, reject) {\r\n                            var tx = conn.transaction(['FileStorage'], readFlag);\r\n                            var store = tx.objectStore('FileStorage');\r\n                            var index = store.index(indexName);\r\n                            var req = index[cmd].apply(index, args);\r\n                            req.onsuccess = function () { return resolve(req.result); };\r\n                            req.onerror = function () { return reject(req.error); };\r\n                        });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb.prototype.getPath = function (directory, uriPath) {\r\n        directory = directory || this.DEFAULT_DIRECTORY;\r\n        var cleanedUriPath = uriPath !== undefined ? uriPath.replace(/^[/]+|[/]+$/g, '') : '';\r\n        var fsPath = '/' + directory;\r\n        if (uriPath !== '')\r\n            fsPath += '/' + cleanedUriPath;\r\n        return fsPath;\r\n    };\r\n    FilesystemPluginWeb.prototype.clear = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var conn, tx, store;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.initDb()];\r\n                    case 1:\r\n                        conn = _a.sent();\r\n                        tx = conn.transaction(['FileStorage'], 'readwrite');\r\n                        store = tx.objectStore('FileStorage');\r\n                        store.clear();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Read a file from disk\r\n     * @param options options for the file read\r\n     * @return a promise that resolves with the read file data result\r\n     */\r\n    FilesystemPluginWeb.prototype.readFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (entry === undefined)\r\n                            throw Error('File does not exist.');\r\n                        return [2 /*return*/, { data: entry.content }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Write a file to disk in the specified location on device\r\n     * @param options options for the file write\r\n     * @return a promise that resolves with the file write result\r\n     */\r\n    FilesystemPluginWeb.prototype.writeFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, data, doRecursive, occupiedEntry, encoding, parentPath, parentEntry, subDirIndex, parentArgPath, now, pathObj;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        data = options.data;\r\n                        doRecursive = options.recursive;\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        occupiedEntry = _a.sent();\r\n                        if (occupiedEntry && occupiedEntry.type === 'directory')\r\n                            throw ('The supplied path is a directory.');\r\n                        encoding = options.encoding;\r\n                        parentPath = path.substr(0, path.lastIndexOf('/'));\r\n                        return [4 /*yield*/, this.dbRequest('get', [parentPath])];\r\n                    case 2:\r\n                        parentEntry = _a.sent();\r\n                        if (!(parentEntry === undefined)) return [3 /*break*/, 4];\r\n                        subDirIndex = parentPath.indexOf('/', 1);\r\n                        if (!(subDirIndex !== -1)) return [3 /*break*/, 4];\r\n                        parentArgPath = parentPath.substr(subDirIndex);\r\n                        return [4 /*yield*/, this.mkdir({ path: parentArgPath, directory: options.directory, recursive: doRecursive })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        now = Date.now();\r\n                        pathObj = {\r\n                            path: path,\r\n                            folder: parentPath,\r\n                            type: 'file',\r\n                            size: data.length,\r\n                            ctime: now,\r\n                            mtime: now,\r\n                            content: !encoding && data.indexOf(',') >= 0 ? data.split(',')[1] : data,\r\n                        };\r\n                        return [4 /*yield*/, this.dbRequest('put', [pathObj])];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {\r\n                                uri: pathObj.path\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Append to a file on disk in the specified location on device\r\n     * @param options options for the file append\r\n     * @return a promise that resolves with the file write result\r\n     */\r\n    FilesystemPluginWeb.prototype.appendFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, data, parentPath, now, ctime, occupiedEntry, parentEntry, subDirIndex, parentArgPath, pathObj;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        data = options.data;\r\n                        parentPath = path.substr(0, path.lastIndexOf('/'));\r\n                        now = Date.now();\r\n                        ctime = now;\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        occupiedEntry = _a.sent();\r\n                        if (occupiedEntry && occupiedEntry.type === 'directory')\r\n                            throw ('The supplied path is a directory.');\r\n                        return [4 /*yield*/, this.dbRequest('get', [parentPath])];\r\n                    case 2:\r\n                        parentEntry = _a.sent();\r\n                        if (!(parentEntry === undefined)) return [3 /*break*/, 4];\r\n                        subDirIndex = parentPath.indexOf('/', 1);\r\n                        if (!(subDirIndex !== -1)) return [3 /*break*/, 4];\r\n                        parentArgPath = parentPath.substr(subDirIndex);\r\n                        return [4 /*yield*/, this.mkdir({ path: parentArgPath, directory: options.directory, recursive: true })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        if (occupiedEntry !== undefined) {\r\n                            data = occupiedEntry.content + data;\r\n                            ctime = occupiedEntry.ctime;\r\n                        }\r\n                        pathObj = {\r\n                            path: path,\r\n                            folder: parentPath,\r\n                            type: 'file',\r\n                            size: data.length,\r\n                            ctime: ctime,\r\n                            mtime: now,\r\n                            content: data\r\n                        };\r\n                        return [4 /*yield*/, this.dbRequest('put', [pathObj])];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Delete a file from disk\r\n     * @param options options for the file delete\r\n     * @return a promise that resolves with the deleted file data result\r\n     */\r\n    FilesystemPluginWeb.prototype.deleteFile = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry, entries;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (entry === undefined)\r\n                            throw Error('File does not exist.');\r\n                        return [4 /*yield*/, this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)])];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (entries.length !== 0)\r\n                            throw Error('Folder is not empty.');\r\n                        return [4 /*yield*/, this.dbRequest('delete', [path])];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Create a directory.\r\n     * @param options options for the mkdir\r\n     * @return a promise that resolves with the mkdir result\r\n     */\r\n    FilesystemPluginWeb.prototype.mkdir = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, doRecursive, parentPath, depth, parentEntry, occupiedEntry, parentArgPath, now, pathObj;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        doRecursive = options.recursive;\r\n                        parentPath = path.substr(0, path.lastIndexOf('/'));\r\n                        depth = (path.match(/\\//g) || []).length;\r\n                        return [4 /*yield*/, this.dbRequest('get', [parentPath])];\r\n                    case 1:\r\n                        parentEntry = _a.sent();\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 2:\r\n                        occupiedEntry = _a.sent();\r\n                        if (depth === 1)\r\n                            throw Error('Cannot create Root directory');\r\n                        if (occupiedEntry !== undefined)\r\n                            throw Error('Current directory does already exist.');\r\n                        if (!doRecursive && depth !== 2 && parentEntry === undefined)\r\n                            throw Error('Parent directory must exist');\r\n                        if (!(doRecursive && depth !== 2 && parentEntry === undefined)) return [3 /*break*/, 4];\r\n                        parentArgPath = parentPath.substr(parentPath.indexOf('/', 1));\r\n                        return [4 /*yield*/, this.mkdir({\r\n                                path: parentArgPath,\r\n                                directory: options.directory,\r\n                                recursive: doRecursive\r\n                            })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        now = Date.now();\r\n                        pathObj = { path: path, folder: parentPath, type: 'directory', size: 0, ctime: now, mtime: now };\r\n                        return [4 /*yield*/, this.dbRequest('put', [pathObj])];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Remove a directory\r\n     * @param options the options for the directory remove\r\n     */\r\n    FilesystemPluginWeb.prototype.rmdir = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, directory, recursive, fullPath, entry, readDirResult, _i, _a, entry_1, entryPath, entryObj;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        path = options.path, directory = options.directory, recursive = options.recursive;\r\n                        fullPath = this.getPath(directory, path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [fullPath])];\r\n                    case 1:\r\n                        entry = _b.sent();\r\n                        if (entry === undefined)\r\n                            throw Error('Folder does not exist.');\r\n                        if (entry.type !== 'directory')\r\n                            throw Error('Requested path is not a directory');\r\n                        return [4 /*yield*/, this.readdir({ path: path, directory: directory })];\r\n                    case 2:\r\n                        readDirResult = _b.sent();\r\n                        if (readDirResult.files.length !== 0 && !recursive)\r\n                            throw Error('Folder is not empty');\r\n                        _i = 0, _a = readDirResult.files;\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        if (!(_i < _a.length)) return [3 /*break*/, 9];\r\n                        entry_1 = _a[_i];\r\n                        entryPath = path + \"/\" + entry_1;\r\n                        return [4 /*yield*/, this.stat({ path: entryPath, directory: directory })];\r\n                    case 4:\r\n                        entryObj = _b.sent();\r\n                        if (!(entryObj.type === 'file')) return [3 /*break*/, 6];\r\n                        return [4 /*yield*/, this.deleteFile({ path: entryPath, directory: directory })];\r\n                    case 5:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 6: return [4 /*yield*/, this.rmdir({ path: entryPath, directory: directory, recursive: recursive })];\r\n                    case 7:\r\n                        _b.sent();\r\n                        _b.label = 8;\r\n                    case 8:\r\n                        _i++;\r\n                        return [3 /*break*/, 3];\r\n                    case 9: return [4 /*yield*/, this.dbRequest('delete', [fullPath])];\r\n                    case 10:\r\n                        _b.sent();\r\n                        return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Return a list of files from the directory (not recursive)\r\n     * @param options the options for the readdir operation\r\n     * @return a promise that resolves with the readdir directory listing result\r\n     */\r\n    FilesystemPluginWeb.prototype.readdir = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry, entries, names;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (options.path !== '' && entry === undefined)\r\n                            throw Error('Folder does not exist.');\r\n                        return [4 /*yield*/, this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)])];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        names = entries.map(function (e) {\r\n                            return e.substring(path.length + 1);\r\n                        });\r\n                        return [2 /*return*/, { files: names }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Return full File URI for a path and directory\r\n     * @param options the options for the stat operation\r\n     * @return a promise that resolves with the file stat result\r\n     */\r\n    FilesystemPluginWeb.prototype.getUri = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (!(entry === undefined)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.dbRequest('get', [path + '/'])];\r\n                    case 2:\r\n                        entry = (_a.sent());\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        if (entry === undefined)\r\n                            throw Error('Entry does not exist.');\r\n                        return [2 /*return*/, {\r\n                                uri: entry.path\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Return data about a file\r\n     * @param options the options for the stat operation\r\n     * @return a promise that resolves with the file stat result\r\n     */\r\n    FilesystemPluginWeb.prototype.stat = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, entry;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = this.getPath(options.directory, options.path);\r\n                        return [4 /*yield*/, this.dbRequest('get', [path])];\r\n                    case 1:\r\n                        entry = _a.sent();\r\n                        if (!(entry === undefined)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.dbRequest('get', [path + '/'])];\r\n                    case 2:\r\n                        entry = (_a.sent());\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        if (entry === undefined)\r\n                            throw Error('Entry does not exist.');\r\n                        return [2 /*return*/, {\r\n                                type: entry.type,\r\n                                size: entry.size,\r\n                                ctime: entry.ctime,\r\n                                mtime: entry.mtime,\r\n                                uri: entry.path\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Rename a file or directory\r\n     * @param options the options for the rename operation\r\n     * @return a promise that resolves with the rename result\r\n     */\r\n    FilesystemPluginWeb.prototype.rename = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._copy(options, true)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Copy a file or directory\r\n     * @param options the options for the copy operation\r\n     * @return a promise that resolves with the copy result\r\n     */\r\n    FilesystemPluginWeb.prototype.copy = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._copy(options, false)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Function that can perform a copy or a rename\r\n     * @param options the options for the rename operation\r\n     * @param doRename whether to perform a rename or copy operation\r\n     * @return a promise that resolves with the result\r\n     */\r\n    FilesystemPluginWeb.prototype._copy = function (options, doRename) {\r\n        if (doRename === void 0) { doRename = false; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var to, from, fromDirectory, toDirectory, fromPath, toPath, toObj, e_1, toPathComponents, toPath_1, toParentDirectory, fromObj, updateTime, _a, file, e_2, contents, _i, contents_1, filename;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        to = options.to, from = options.from, fromDirectory = options.directory, toDirectory = options.toDirectory;\r\n                        if (!to || !from) {\r\n                            throw Error('Both to and from must be provided');\r\n                        }\r\n                        // If no \"to\" directory is provided, use the \"from\" directory\r\n                        if (!toDirectory) {\r\n                            toDirectory = fromDirectory;\r\n                        }\r\n                        fromPath = this.getPath(fromDirectory, from);\r\n                        toPath = this.getPath(toDirectory, to);\r\n                        // Test that the \"to\" and \"from\" locations are different\r\n                        if (fromPath === toPath) {\r\n                            return [2 /*return*/, {}];\r\n                        }\r\n                        if (toPath.startsWith(fromPath)) {\r\n                            throw Error('To path cannot contain the from path');\r\n                        }\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 6]);\r\n                        return [4 /*yield*/, this.stat({\r\n                                path: to,\r\n                                directory: toDirectory\r\n                            })];\r\n                    case 2:\r\n                        toObj = _b.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 3:\r\n                        e_1 = _b.sent();\r\n                        toPathComponents = to.split('/');\r\n                        toPathComponents.pop();\r\n                        toPath_1 = toPathComponents.join('/');\r\n                        if (!(toPathComponents.length > 0)) return [3 /*break*/, 5];\r\n                        return [4 /*yield*/, this.stat({\r\n                                path: toPath_1,\r\n                                directory: toDirectory,\r\n                            })];\r\n                    case 4:\r\n                        toParentDirectory = _b.sent();\r\n                        if (toParentDirectory.type !== 'directory') {\r\n                            throw new Error('Parent directory of the to path is a file');\r\n                        }\r\n                        _b.label = 5;\r\n                    case 5: return [3 /*break*/, 6];\r\n                    case 6:\r\n                        // Cannot overwrite a directory\r\n                        if (toObj && toObj.type === 'directory') {\r\n                            throw new Error('Cannot overwrite a directory with a file');\r\n                        }\r\n                        return [4 /*yield*/, this.stat({\r\n                                path: from,\r\n                                directory: fromDirectory,\r\n                            })];\r\n                    case 7:\r\n                        fromObj = _b.sent();\r\n                        updateTime = function (path, ctime, mtime) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var fullPath, entry;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        fullPath = this.getPath(toDirectory, path);\r\n                                        return [4 /*yield*/, this.dbRequest('get', [fullPath])];\r\n                                    case 1:\r\n                                        entry = _a.sent();\r\n                                        entry.ctime = ctime;\r\n                                        entry.mtime = mtime;\r\n                                        return [4 /*yield*/, this.dbRequest('put', [entry])];\r\n                                    case 2:\r\n                                        _a.sent();\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        }); };\r\n                        _a = fromObj.type;\r\n                        switch (_a) {\r\n                            case 'file': return [3 /*break*/, 8];\r\n                            case 'directory': return [3 /*break*/, 15];\r\n                        }\r\n                        return [3 /*break*/, 28];\r\n                    case 8: return [4 /*yield*/, this.readFile({\r\n                            path: from,\r\n                            directory: fromDirectory\r\n                        })];\r\n                    case 9:\r\n                        file = _b.sent();\r\n                        if (!doRename) return [3 /*break*/, 11];\r\n                        return [4 /*yield*/, this.deleteFile({\r\n                                path: from,\r\n                                directory: fromDirectory\r\n                            })];\r\n                    case 10:\r\n                        _b.sent();\r\n                        _b.label = 11;\r\n                    case 11: \r\n                    // Write the file to the new location\r\n                    return [4 /*yield*/, this.writeFile({\r\n                            path: to,\r\n                            directory: toDirectory,\r\n                            data: file.data\r\n                        })];\r\n                    case 12:\r\n                        // Write the file to the new location\r\n                        _b.sent();\r\n                        if (!doRename) return [3 /*break*/, 14];\r\n                        return [4 /*yield*/, updateTime(to, fromObj.ctime, fromObj.mtime)];\r\n                    case 13:\r\n                        _b.sent();\r\n                        _b.label = 14;\r\n                    case 14: \r\n                    // Resolve promise\r\n                    return [2 /*return*/, {}];\r\n                    case 15:\r\n                        if (toObj) {\r\n                            throw Error('Cannot move a directory over an existing object');\r\n                        }\r\n                        _b.label = 16;\r\n                    case 16:\r\n                        _b.trys.push([16, 20, , 21]);\r\n                        // Create the to directory\r\n                        return [4 /*yield*/, this.mkdir({\r\n                                path: to,\r\n                                directory: toDirectory,\r\n                                recursive: false,\r\n                            })];\r\n                    case 17:\r\n                        // Create the to directory\r\n                        _b.sent();\r\n                        if (!doRename) return [3 /*break*/, 19];\r\n                        return [4 /*yield*/, updateTime(to, fromObj.ctime, fromObj.mtime)];\r\n                    case 18:\r\n                        _b.sent();\r\n                        _b.label = 19;\r\n                    case 19: return [3 /*break*/, 21];\r\n                    case 20:\r\n                        e_2 = _b.sent();\r\n                        return [3 /*break*/, 21];\r\n                    case 21: return [4 /*yield*/, this.readdir({\r\n                            path: from,\r\n                            directory: fromDirectory,\r\n                        })];\r\n                    case 22:\r\n                        contents = (_b.sent()).files;\r\n                        _i = 0, contents_1 = contents;\r\n                        _b.label = 23;\r\n                    case 23:\r\n                        if (!(_i < contents_1.length)) return [3 /*break*/, 26];\r\n                        filename = contents_1[_i];\r\n                        // Move item from the from directory to the to directory\r\n                        return [4 /*yield*/, this._copy({\r\n                                from: from + \"/\" + filename,\r\n                                to: to + \"/\" + filename,\r\n                                directory: fromDirectory,\r\n                                toDirectory: toDirectory,\r\n                            }, doRename)];\r\n                    case 24:\r\n                        // Move item from the from directory to the to directory\r\n                        _b.sent();\r\n                        _b.label = 25;\r\n                    case 25:\r\n                        _i++;\r\n                        return [3 /*break*/, 23];\r\n                    case 26:\r\n                        if (!doRename) return [3 /*break*/, 28];\r\n                        return [4 /*yield*/, this.rmdir({\r\n                                path: from,\r\n                                directory: fromDirectory\r\n                            })];\r\n                    case 27:\r\n                        _b.sent();\r\n                        _b.label = 28;\r\n                    case 28: return [2 /*return*/, {}];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FilesystemPluginWeb._debug = true;\r\n    return FilesystemPluginWeb;\r\n}(WebPlugin));\r\nexport { FilesystemPluginWeb };\r\nvar Filesystem = new FilesystemPluginWeb();\r\nexport { Filesystem };\r\n//# sourceMappingURL=filesystem.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { extend } from '../util';\r\nvar GeolocationPluginWeb = /** @class */ (function (_super) {\r\n    __extends(GeolocationPluginWeb, _super);\r\n    function GeolocationPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Geolocation',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    GeolocationPluginWeb.prototype.getCurrentPosition = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            return _this.requestPermissions().then(function (_result) {\r\n                window.navigator.geolocation.getCurrentPosition(function (pos) {\r\n                    resolve(pos);\r\n                }, function (err) {\r\n                    reject(err);\r\n                }, extend({\r\n                    enableHighAccuracy: true,\r\n                    timeout: 10000,\r\n                    maximumAge: 0\r\n                }, options));\r\n            });\r\n        });\r\n    };\r\n    GeolocationPluginWeb.prototype.watchPosition = function (options, callback) {\r\n        var id = window.navigator.geolocation.watchPosition(function (pos) {\r\n            callback(pos);\r\n        }, function (err) {\r\n            callback(null, err);\r\n        }, extend({\r\n            enableHighAccuracy: true,\r\n            timeout: 10000,\r\n            maximumAge: 0\r\n        }, options));\r\n        return \"\" + id;\r\n    };\r\n    GeolocationPluginWeb.prototype.clearWatch = function (options) {\r\n        window.navigator.geolocation.clearWatch(parseInt(options.id, 10));\r\n        return Promise.resolve();\r\n    };\r\n    return GeolocationPluginWeb;\r\n}(WebPlugin));\r\nexport { GeolocationPluginWeb };\r\nvar Geolocation = new GeolocationPluginWeb();\r\nexport { Geolocation };\r\n//# sourceMappingURL=geolocation.js.map","var WebPluginRegistry = /** @class */ (function () {\r\n    function WebPluginRegistry() {\r\n        this.plugins = {};\r\n        this.loadedPlugins = {};\r\n    }\r\n    WebPluginRegistry.prototype.addPlugin = function (plugin) {\r\n        this.plugins[plugin.config.name] = plugin;\r\n    };\r\n    WebPluginRegistry.prototype.getPlugin = function (name) {\r\n        return this.plugins[name];\r\n    };\r\n    WebPluginRegistry.prototype.loadPlugin = function (name) {\r\n        var plugin = this.getPlugin(name);\r\n        if (!plugin) {\r\n            console.error(\"Unable to load web plugin \" + name + \", no such plugin found.\");\r\n            return;\r\n        }\r\n        plugin.load();\r\n    };\r\n    WebPluginRegistry.prototype.getPlugins = function () {\r\n        var p = [];\r\n        for (var name_1 in this.plugins) {\r\n            p.push(this.plugins[name_1]);\r\n        }\r\n        return p;\r\n    };\r\n    return WebPluginRegistry;\r\n}());\r\nexport { WebPluginRegistry };\r\nvar WebPlugins = new WebPluginRegistry();\r\nexport { WebPlugins };\r\nvar WebPlugin = /** @class */ (function () {\r\n    function WebPlugin(config, pluginRegistry) {\r\n        this.config = config;\r\n        this.loaded = false;\r\n        this.listeners = {};\r\n        this.windowListeners = {};\r\n        if (!pluginRegistry) {\r\n            WebPlugins.addPlugin(this);\r\n        }\r\n        else {\r\n            pluginRegistry.addPlugin(this);\r\n        }\r\n    }\r\n    WebPlugin.prototype.addWindowListener = function (handle) {\r\n        window.addEventListener(handle.windowEventName, handle.handler);\r\n        handle.registered = true;\r\n    };\r\n    WebPlugin.prototype.removeWindowListener = function (handle) {\r\n        if (!handle) {\r\n            return;\r\n        }\r\n        window.removeEventListener(handle.windowEventName, handle.handler);\r\n        handle.registered = false;\r\n    };\r\n    WebPlugin.prototype.addListener = function (eventName, listenerFunc) {\r\n        var _this = this;\r\n        var listeners = this.listeners[eventName];\r\n        if (!listeners) {\r\n            this.listeners[eventName] = [];\r\n        }\r\n        this.listeners[eventName].push(listenerFunc);\r\n        // If we haven't added a window listener for this event and it requires one,\r\n        // go ahead and add it\r\n        var windowListener = this.windowListeners[eventName];\r\n        if (windowListener && !windowListener.registered) {\r\n            this.addWindowListener(windowListener);\r\n        }\r\n        return {\r\n            remove: function () {\r\n                _this.removeListener(eventName, listenerFunc);\r\n            }\r\n        };\r\n    };\r\n    WebPlugin.prototype.removeListener = function (eventName, listenerFunc) {\r\n        var listeners = this.listeners[eventName];\r\n        if (!listeners) {\r\n            return;\r\n        }\r\n        var index = listeners.indexOf(listenerFunc);\r\n        this.listeners[eventName].splice(index, 1);\r\n        // If there are no more listeners for this type of event,\r\n        // remove the window listener\r\n        if (!this.listeners[eventName].length) {\r\n            this.removeWindowListener(this.windowListeners[eventName]);\r\n        }\r\n    };\r\n    WebPlugin.prototype.removeAllListeners = function () {\r\n        this.listeners = {};\r\n        for (var listener in this.windowListeners) {\r\n            this.removeWindowListener(this.windowListeners[listener]);\r\n        }\r\n        this.windowListeners = {};\r\n    };\r\n    WebPlugin.prototype.notifyListeners = function (eventName, data) {\r\n        var listeners = this.listeners[eventName];\r\n        if (listeners) {\r\n            listeners.forEach(function (listener) { return listener(data); });\r\n        }\r\n    };\r\n    WebPlugin.prototype.hasListeners = function (eventName) {\r\n        return !!this.listeners[eventName].length;\r\n    };\r\n    WebPlugin.prototype.registerWindowListener = function (windowEventName, pluginEventName) {\r\n        var _this = this;\r\n        this.windowListeners[pluginEventName] = {\r\n            registered: false,\r\n            windowEventName: windowEventName,\r\n            pluginEventName: pluginEventName,\r\n            handler: function (event) {\r\n                _this.notifyListeners(pluginEventName, event);\r\n            }\r\n        };\r\n    };\r\n    WebPlugin.prototype.requestPermissions = function () {\r\n        if (Capacitor.isNative) {\r\n            return Capacitor.nativePromise(this.config.name, 'requestPermissions', {});\r\n        }\r\n        else {\r\n            return Promise.resolve({ results: [] });\r\n        }\r\n    };\r\n    WebPlugin.prototype.load = function () {\r\n        this.loaded = true;\r\n    };\r\n    return WebPlugin;\r\n}());\r\nexport { WebPlugin };\r\nvar shouldMergeWebPlugin = function (plugin) {\r\n    return plugin.config.platforms && plugin.config.platforms.indexOf(Capacitor.platform) >= 0;\r\n};\r\n/**\r\n * For all our known web plugins, merge them into the global plugins\r\n * registry if they aren't already existing. If they don't exist, that\r\n * means there's no existing native implementation for it.\r\n * @param knownPlugins the Capacitor.Plugins global registry.\r\n */\r\nexport var mergeWebPlugins = function (knownPlugins) {\r\n    var plugins = WebPlugins.getPlugins();\r\n    for (var _i = 0, plugins_1 = plugins; _i < plugins_1.length; _i++) {\r\n        var plugin = plugins_1[_i];\r\n        mergeWebPlugin(knownPlugins, plugin);\r\n    }\r\n};\r\nexport var mergeWebPlugin = function (knownPlugins, plugin) {\r\n    // If we already have a plugin registered (meaning it was defined in the native layer),\r\n    // then we should only overwrite it if the corresponding web plugin activates on\r\n    // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\r\n    if (knownPlugins.hasOwnProperty(plugin.config.name) && !shouldMergeWebPlugin(plugin)) {\r\n        return;\r\n    }\r\n    knownPlugins[plugin.config.name] = plugin;\r\n};\r\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar LocalNotificationsPluginWeb = /** @class */ (function (_super) {\r\n    __extends(LocalNotificationsPluginWeb, _super);\r\n    function LocalNotificationsPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'LocalNotifications',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.pending = [];\r\n        return _this;\r\n    }\r\n    LocalNotificationsPluginWeb.prototype.createChannel = function (channel) {\r\n        throw new Error('Feature not available in the browser. ' + channel.id);\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.deleteChannel = function (channel) {\r\n        throw new Error('Feature not available in the browser. ' + channel.id);\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.listChannels = function () {\r\n        throw new Error('Feature not available in the browser');\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.sendPending = function () {\r\n        var _this = this;\r\n        var toRemove = [];\r\n        var now = +new Date;\r\n        this.pending.forEach(function (localNotification) {\r\n            if (localNotification.schedule && localNotification.schedule.at) {\r\n                if (+localNotification.schedule.at <= now) {\r\n                    _this.buildNotification(localNotification);\r\n                    toRemove.push(localNotification);\r\n                }\r\n            }\r\n        });\r\n        console.log('Sent pending, removing', toRemove);\r\n        this.pending = this.pending.filter(function (localNotification) { return !toRemove.find(function (ln) { return ln === localNotification; }); });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.sendNotification = function (localNotification) {\r\n        var _this = this;\r\n        var l = localNotification;\r\n        if (localNotification.schedule && localNotification.schedule.at) {\r\n            var diff = +localNotification.schedule.at - +new Date;\r\n            this.pending.push(l);\r\n            setTimeout(function () {\r\n                _this.sendPending();\r\n            }, diff);\r\n            return;\r\n        }\r\n        this.buildNotification(localNotification);\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.buildNotification = function (localNotification) {\r\n        var l = localNotification;\r\n        return new Notification(l.title, {\r\n            body: l.body\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.schedule = function (options) {\r\n        var _this = this;\r\n        var notifications = [];\r\n        options.notifications.forEach(function (notification) {\r\n            notifications.push(_this.sendNotification(notification));\r\n        });\r\n        return Promise.resolve({\r\n            notifications: options.notifications.map(function (notification) { return { id: '' + notification.id }; })\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.getPending = function () {\r\n        return Promise.resolve({\r\n            notifications: this.pending.map(function (localNotification) {\r\n                return {\r\n                    id: '' + localNotification.id\r\n                };\r\n            })\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.registerActionTypes = function (_options) {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.cancel = function (pending) {\r\n        console.log('Cancel these', pending);\r\n        this.pending = this.pending.filter(function (localNotification) { return !pending.notifications.find(function (ln) { return ln.id === '' + localNotification.id; }); });\r\n        return Promise.resolve();\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.areEnabled = function () {\r\n        return Promise.resolve({\r\n            value: Notification.permission === 'granted'\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.requestPermission = function () {\r\n        return new Promise(function (resolve) {\r\n            Notification.requestPermission(function (result) {\r\n                var granted = true;\r\n                if (result === 'denied' || result === 'default') {\r\n                    granted = false;\r\n                }\r\n                resolve({ granted: granted });\r\n            });\r\n        });\r\n    };\r\n    LocalNotificationsPluginWeb.prototype.requestPermissions = function () {\r\n        return new Promise(function (resolve, reject) {\r\n            Notification.requestPermission(function (result) {\r\n                if (result === 'denied' || result === 'default') {\r\n                    reject(result);\r\n                    return;\r\n                }\r\n                resolve({\r\n                    results: [result]\r\n                });\r\n            });\r\n        });\r\n    };\r\n    return LocalNotificationsPluginWeb;\r\n}(WebPlugin));\r\nexport { LocalNotificationsPluginWeb };\r\nvar LocalNotifications = new LocalNotificationsPluginWeb();\r\nexport { LocalNotifications };\r\n//# sourceMappingURL=local-notifications.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar ModalsPluginWeb = /** @class */ (function (_super) {\r\n    __extends(ModalsPluginWeb, _super);\r\n    function ModalsPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Modals',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    ModalsPluginWeb.prototype.alert = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                window.alert(options.message);\r\n                return [2 /*return*/, Promise.resolve()];\r\n            });\r\n        });\r\n    };\r\n    ModalsPluginWeb.prototype.prompt = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var val;\r\n            return __generator(this, function (_a) {\r\n                val = window.prompt(options.message, options.inputText || '');\r\n                return [2 /*return*/, Promise.resolve({\r\n                        value: val,\r\n                        cancelled: val === null\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    ModalsPluginWeb.prototype.confirm = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var val;\r\n            return __generator(this, function (_a) {\r\n                val = window.confirm(options.message);\r\n                return [2 /*return*/, Promise.resolve({\r\n                        value: val\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    ModalsPluginWeb.prototype.showActions = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, _reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var actionSheet;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            actionSheet = document.querySelector('pwa-action-sheet');\r\n                            if (!actionSheet) {\r\n                                actionSheet = document.createElement('pwa-action-sheet');\r\n                                document.body.appendChild(actionSheet);\r\n                            }\r\n                            actionSheet.header = options.title;\r\n                            actionSheet.cancelable = false;\r\n                            actionSheet.options = options.options;\r\n                            actionSheet.addEventListener('onSelection', function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var selection;\r\n                                return __generator(this, function (_a) {\r\n                                    selection = e.detail;\r\n                                    resolve({\r\n                                        index: selection\r\n                                    });\r\n                                    return [2 /*return*/];\r\n                                });\r\n                            }); });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    return ModalsPluginWeb;\r\n}(WebPlugin));\r\nexport { ModalsPluginWeb };\r\nvar Modals = new ModalsPluginWeb();\r\nexport { Modals };\r\n//# sourceMappingURL=modals.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar MotionPluginWeb = /** @class */ (function (_super) {\r\n    __extends(MotionPluginWeb, _super);\r\n    function MotionPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Motion'\r\n        }) || this;\r\n        _this.registerWindowListener('devicemotion', 'accel');\r\n        _this.registerWindowListener('deviceorientation', 'orientation');\r\n        return _this;\r\n    }\r\n    return MotionPluginWeb;\r\n}(WebPlugin));\r\nexport { MotionPluginWeb };\r\nvar Motion = new MotionPluginWeb();\r\nexport { Motion };\r\n//# sourceMappingURL=motion.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar NetworkPluginWeb = /** @class */ (function (_super) {\r\n    __extends(NetworkPluginWeb, _super);\r\n    function NetworkPluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Network',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.listenerFunction = null;\r\n        return _this;\r\n    }\r\n    NetworkPluginWeb.prototype.getStatus = function () {\r\n        return new Promise(function (resolve, reject) {\r\n            if (!window.navigator) {\r\n                reject('Network info not available');\r\n                return;\r\n            }\r\n            var connected = window.navigator.onLine;\r\n            var connection = window.navigator.connection || window.navigator.mozConnection || window.navigator.webkitConnection;\r\n            var connectionType = connection ? (connection.type || connection.effectiveType) : 'wifi';\r\n            resolve({\r\n                connected: connected,\r\n                connectionType: connected ? connectionType : 'none'\r\n            });\r\n        });\r\n    };\r\n    NetworkPluginWeb.prototype.addListener = function (eventName, listenerFunc) {\r\n        var thisRef = this;\r\n        var connection = window.navigator.connection || window.navigator.mozConnection || window.navigator.webkitConnection;\r\n        var connectionType = connection ? (connection.type || connection.effectiveType) : 'wifi';\r\n        var onlineBindFunc = listenerFunc.bind(thisRef, { connected: true, connectionType: connectionType });\r\n        var offlineBindFunc = listenerFunc.bind(thisRef, { connected: false, connectionType: 'none' });\r\n        if (eventName.localeCompare('networkStatusChange') === 0) {\r\n            window.addEventListener('online', onlineBindFunc);\r\n            window.addEventListener('offline', offlineBindFunc);\r\n            return {\r\n                remove: function () {\r\n                    window.removeEventListener('online', onlineBindFunc);\r\n                    window.removeEventListener('offline', offlineBindFunc);\r\n                }\r\n            };\r\n        }\r\n    };\r\n    return NetworkPluginWeb;\r\n}(WebPlugin));\r\nexport { NetworkPluginWeb };\r\nvar Network = new NetworkPluginWeb();\r\nexport { Network };\r\n//# sourceMappingURL=network.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nimport { PermissionType } from '../core-plugin-definitions';\r\nvar PermissionsPluginWeb = /** @class */ (function (_super) {\r\n    __extends(PermissionsPluginWeb, _super);\r\n    function PermissionsPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Permissions'\r\n        }) || this;\r\n    }\r\n    PermissionsPluginWeb.prototype.query = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var navigator, name, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        navigator = window.navigator;\r\n                        if (!navigator.permissions) {\r\n                            return [2 /*return*/, Promise.reject('This browser does not support the Permissions API')];\r\n                        }\r\n                        name = options.name === PermissionType.Photos ? 'camera' : options.name;\r\n                        return [4 /*yield*/, navigator.permissions.query({ name: name })];\r\n                    case 1:\r\n                        ret = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                state: ret.state\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return PermissionsPluginWeb;\r\n}(WebPlugin));\r\nexport { PermissionsPluginWeb };\r\nvar Permissions = new PermissionsPluginWeb();\r\nexport { Permissions };\r\n//# sourceMappingURL=permissions.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar SharePluginWeb = /** @class */ (function (_super) {\r\n    __extends(SharePluginWeb, _super);\r\n    function SharePluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Share',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    SharePluginWeb.prototype.share = function (options) {\r\n        if (!navigator.share) {\r\n            return Promise.reject('Web Share API not available');\r\n        }\r\n        return navigator.share({\r\n            title: options.title,\r\n            text: options.text,\r\n            url: options.url\r\n        });\r\n    };\r\n    return SharePluginWeb;\r\n}(WebPlugin));\r\nexport { SharePluginWeb };\r\nvar Share = new SharePluginWeb();\r\nexport { Share };\r\n//# sourceMappingURL=share.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar SplashScreenPluginWeb = /** @class */ (function (_super) {\r\n    __extends(SplashScreenPluginWeb, _super);\r\n    function SplashScreenPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'SplashScreen',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    SplashScreenPluginWeb.prototype.show = function (_options, _callback) {\r\n        return Promise.resolve();\r\n    };\r\n    SplashScreenPluginWeb.prototype.hide = function (_options, _callback) {\r\n        return Promise.resolve();\r\n    };\r\n    return SplashScreenPluginWeb;\r\n}(WebPlugin));\r\nexport { SplashScreenPluginWeb };\r\nvar SplashScreen = new SplashScreenPluginWeb();\r\nexport { SplashScreen };\r\n//# sourceMappingURL=splash-screen.js.map","import { __extends } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar StoragePluginWeb = /** @class */ (function (_super) {\r\n    __extends(StoragePluginWeb, _super);\r\n    function StoragePluginWeb() {\r\n        var _this = _super.call(this, {\r\n            name: 'Storage',\r\n            platforms: ['web']\r\n        }) || this;\r\n        _this.KEY_PREFIX = '_cap_';\r\n        return _this;\r\n    }\r\n    StoragePluginWeb.prototype.get = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            resolve({\r\n                value: window.localStorage.getItem(_this.makeKey(options.key))\r\n            });\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.set = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            window.localStorage.setItem(_this.makeKey(options.key), options.value);\r\n            resolve();\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.remove = function (options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            window.localStorage.removeItem(_this.makeKey(options.key));\r\n            resolve();\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.keys = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            resolve({\r\n                keys: Object.keys(localStorage).filter(function (k) { return _this.isKey(k); }).map(function (k) { return _this.getKey(k); })\r\n            });\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.clear = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _reject) {\r\n            Object.keys(localStorage)\r\n                .filter(function (k) { return _this.isKey(k); })\r\n                .forEach(function (k) { return window.localStorage.removeItem(k); });\r\n            resolve();\r\n        });\r\n    };\r\n    StoragePluginWeb.prototype.makeKey = function (key) {\r\n        return this.KEY_PREFIX + key;\r\n    };\r\n    StoragePluginWeb.prototype.isKey = function (key) {\r\n        return key.indexOf(this.KEY_PREFIX) === 0;\r\n    };\r\n    StoragePluginWeb.prototype.getKey = function (key) {\r\n        return key.substr(this.KEY_PREFIX.length);\r\n    };\r\n    return StoragePluginWeb;\r\n}(WebPlugin));\r\nexport { StoragePluginWeb };\r\nvar Storage = new StoragePluginWeb();\r\nexport { Storage };\r\n//# sourceMappingURL=storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { WebPlugin } from './index';\r\nvar ToastPluginWeb = /** @class */ (function (_super) {\r\n    __extends(ToastPluginWeb, _super);\r\n    function ToastPluginWeb() {\r\n        return _super.call(this, {\r\n            name: 'Toast',\r\n            platforms: ['web']\r\n        }) || this;\r\n    }\r\n    ToastPluginWeb.prototype.show = function (options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var duration, toast;\r\n            return __generator(this, function (_a) {\r\n                duration = 2000;\r\n                if (options.duration) {\r\n                    duration = options.duration === 'long' ? 3500 : 2000;\r\n                }\r\n                toast = document.createElement('pwa-toast');\r\n                toast.duration = duration;\r\n                toast.message = options.text;\r\n                document.body.appendChild(toast);\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return ToastPluginWeb;\r\n}(WebPlugin));\r\nexport { ToastPluginWeb };\r\nvar Toast = new ToastPluginWeb();\r\nexport { Toast };\r\n//# sourceMappingURL=toast.js.map","import firebase from '@firebase/app';\r\nimport { __extends, __awaiter, __generator, __assign, __spreadArrays } from 'tslib';\r\nimport { FirebaseError } from '@firebase/util';\r\nimport { Component } from '@firebase/component';\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\r\n\r\nvar FirebaseStorageError = /** @class */ (function (_super) {\r\n    __extends(FirebaseStorageError, _super);\r\n    function FirebaseStorageError(code, message) {\r\n        var _this = _super.call(this, prependCode(code), \"Firebase Storage: \" + message + \" (\" + prependCode(code) + \")\") || this;\r\n        _this.customData = { serverResponse: null };\r\n        // Without this, `instanceof FirebaseStorageError`, in tests for example,\r\n        // returns false.\r\n        Object.setPrototypeOf(_this, FirebaseStorageError.prototype);\r\n        return _this;\r\n    }\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.code;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            if (this.customData.serverResponse) {\r\n                return this.message + \"\\n\" + this.customData.serverResponse;\r\n            }\r\n            else {\r\n                return this.message;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.customData.serverResponse;\r\n        },\r\n        set: function (serverResponse) {\r\n            this.customData.serverResponse = serverResponse;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}(FirebaseError));\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error',\r\n    UNSUPPORTED_ENVIRONMENT: 'unsupported-environment'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction noDefaultBucket() {\r\n    return new FirebaseStorageError(Code.NO_DEFAULT_BUCKET, 'No default bucket ' +\r\n        \"found. Did you set the '\" +\r\n        CONFIG_STORAGE_BUCKET_KEY +\r\n        \"' property when initializing the app?\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, message);\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name - The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format - The format that was not valid.\r\n * @param message - A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message - A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (headers !== undefined) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (body !== undefined) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (this.xhr_.upload != null) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (this.xhr_.upload != null) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return typeof p === 'object' && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\r\nfunction validateNumber(argument, minValue, maxValue, value) {\r\n    if (value < minValue) {\r\n        throw new FirebaseStorageError(Code.INVALID_ARGUMENT, \"Invalid value for '\" + argument + \"'. Expected \" + minValue + \" or greater.\");\r\n    }\r\n    if (value > maxValue) {\r\n        throw new FirebaseStorageError(Code.INVALID_ARGUMENT, \"Invalid value for '\" + argument + \"'. Expected \" + maxValue + \" or less.\");\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw new FirebaseStorageError(Code.UNSUPPORTED_ENVIRONMENT, \"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy - If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var firebaseStorageHost = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var firebaseStoragePath = '(/([^?#]*).*)?$';\r\n        var firebaseStorageRegExp = new RegExp(\"^https?://\" + firebaseStorageHost + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + firebaseStoragePath, 'i');\r\n        var firebaseStorageIndices = { bucket: 1, path: 3 };\r\n        var cloudStorageHost = '(?:storage.googleapis.com|storage.cloud.google.com)';\r\n        var cloudStoragePath = '([^?#]*)';\r\n        var cloudStorageRegExp = new RegExp(\"^https?://\" + cloudStorageHost + \"/\" + bucketDomain + \"/\" + cloudStoragePath, 'i');\r\n        var cloudStorageIndices = { bucket: 1, path: 2 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            {\r\n                regex: firebaseStorageRegExp,\r\n                indices: firebaseStorageIndices,\r\n                postModify: httpModify\r\n            },\r\n            {\r\n                regex: cloudStorageRegExp,\r\n                indices: cloudStorageIndices,\r\n                postModify: httpModify\r\n            }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (size !== undefined) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, service) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return service.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(service, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, service);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(service, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(service, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(service, bucket, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = service.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = service.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(service, bucket, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(service, bucket, resource);\r\n}\r\n\r\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(service, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(service, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(service, bucket) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(service, bucket, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(service, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(service, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.serverResponse = err.serverResponse;\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.serverResponse = err.serverResponse;\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(service, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(service, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, listHandler(service, location.bucket), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(service, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(service, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(service, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(service, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = service.maxOperationRetryTime;\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(service, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str = str + Math.random().toString().slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(service, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = service.maxUploadRetryTime;\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(service, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, service, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(service, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) || error != null || complete != null;\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error;\r\n            this.complete = complete;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next;\r\n            this.error = observer.error;\r\n            this.complete = observer.complete;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\r\n\r\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref - The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob - The blob to upload.\r\n     */\r\n    function UploadTask(ref, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        /**\r\n         * @internal\r\n         */\r\n        this._transferred = 0;\r\n        this._needToFetchStatus = false;\r\n        this._needToFetchMetadata = false;\r\n        this._observers = [];\r\n        this._error = undefined;\r\n        this._uploadUrl = undefined;\r\n        this._request = undefined;\r\n        this._chunkMultiplier = 1;\r\n        this._resolve = undefined;\r\n        this._reject = undefined;\r\n        this._ref = ref;\r\n        this._blob = blob;\r\n        this._metadata = metadata;\r\n        this._mappings = getMappings();\r\n        this._resumable = this._shouldDoResumable(this._blob);\r\n        this._state = InternalTaskState.RUNNING;\r\n        this._errorHandler = function (error) {\r\n            _this._request = undefined;\r\n            _this._chunkMultiplier = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this._needToFetchStatus = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this._error = error;\r\n                _this._transition(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this._metadataErrorHandler = function (error) {\r\n            _this._request = undefined;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this._error = error;\r\n                _this._transition(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this._promise = new Promise(function (resolve, reject) {\r\n            _this._resolve = resolve;\r\n            _this._reject = reject;\r\n            _this._start();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this._promise.then(null, function () { });\r\n    }\r\n    UploadTask.prototype._makeProgressCallback = function () {\r\n        var _this = this;\r\n        var sizeBefore = this._transferred;\r\n        return function (loaded) { return _this._updateProgress(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype._shouldDoResumable = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype._start = function () {\r\n        if (this._state !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this._request !== undefined) {\r\n            return;\r\n        }\r\n        if (this._resumable) {\r\n            if (this._uploadUrl === undefined) {\r\n                this._createResumable();\r\n            }\r\n            else {\r\n                if (this._needToFetchStatus) {\r\n                    this._fetchStatus();\r\n                }\r\n                else {\r\n                    if (this._needToFetchMetadata) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this._fetchMetadata();\r\n                    }\r\n                    else {\r\n                        this._continueUpload();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._oneShotUpload();\r\n        }\r\n    };\r\n    UploadTask.prototype._resolveToken = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this._ref.storage.getAuthToken().then(function (authToken) {\r\n            switch (_this._state) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this._transition(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this._transition(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype._createResumable = function () {\r\n        var _this = this;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this._ref.storage, _this._ref._location, _this._mappings, _this._blob, _this._metadata);\r\n            var createRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this._request = undefined;\r\n                _this._uploadUrl = url;\r\n                _this._needToFetchStatus = false;\r\n                _this.completeTransitions_();\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._fetchStatus = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this._uploadUrl;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this._ref.storage, _this._ref._location, url, _this._blob);\r\n            var statusRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this._request = undefined;\r\n                _this._updateProgress(status.current);\r\n                _this._needToFetchStatus = false;\r\n                if (status.finalized) {\r\n                    _this._needToFetchMetadata = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._continueUpload = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this._chunkMultiplier;\r\n        var status = new ResumableUploadStatus(this._transferred, this._blob.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this._uploadUrl;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this._ref._location, _this._ref.storage, url, _this._blob, chunkSize, _this._mappings, status, _this._makeProgressCallback());\r\n            }\r\n            catch (e) {\r\n                _this._error = e;\r\n                _this._transition(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this._increaseMultiplier();\r\n                _this._request = undefined;\r\n                _this._updateProgress(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this._metadata = newStatus.metadata;\r\n                    _this._transition(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._increaseMultiplier = function () {\r\n        var currentSize = resumableUploadChunkSize * this._chunkMultiplier;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this._chunkMultiplier *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype._fetchMetadata = function () {\r\n        var _this = this;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = getMetadata(_this._ref.storage, _this._ref._location, _this._mappings);\r\n            var metadataRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this._request = undefined;\r\n                _this._metadata = metadata;\r\n                _this._transition(InternalTaskState.SUCCESS);\r\n            }, _this._metadataErrorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._oneShotUpload = function () {\r\n        var _this = this;\r\n        this._resolveToken(function (authToken) {\r\n            var requestInfo = multipartUpload(_this._ref.storage, _this._ref._location, _this._mappings, _this._blob, _this._metadata);\r\n            var multipartRequest = _this._ref.storage.makeRequest(requestInfo, authToken);\r\n            _this._request = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this._request = undefined;\r\n                _this._metadata = metadata;\r\n                _this._updateProgress(_this._blob.size());\r\n                _this._transition(InternalTaskState.SUCCESS);\r\n            }, _this._errorHandler);\r\n        });\r\n    };\r\n    UploadTask.prototype._updateProgress = function (transferred) {\r\n        var old = this._transferred;\r\n        this._transferred = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this._transferred !== old) {\r\n            this._notifyObservers();\r\n        }\r\n    };\r\n    UploadTask.prototype._transition = function (state) {\r\n        if (this._state === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this._state = state;\r\n                if (this._request !== undefined) {\r\n                    this._request.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this._state = state;\r\n                if (this._request !== undefined) {\r\n                    this._request.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this._state === InternalTaskState.PAUSED;\r\n                this._state = state;\r\n                if (wasPaused) {\r\n                    this._notifyObservers();\r\n                    this._start();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this._error = canceled();\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this._state = state;\r\n                this._notifyObservers();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this._state) {\r\n            case InternalTaskState.PAUSING:\r\n                this._transition(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this._transition(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this._start();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this._state);\r\n            return new UploadTaskSnapshot(this._transferred, this._blob.size(), externalState, this._metadata, this, this._ref);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type - The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        var _this = this;\r\n        var observer = new Observer(nextOrObserver, error, completed);\r\n        this._addObserver(observer);\r\n        return function () {\r\n            _this._removeObserver(observer);\r\n        };\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled - The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected - The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this._promise.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype._addObserver = function (observer) {\r\n        this._observers.push(observer);\r\n        this._notifyObserver(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype._removeObserver = function (observer) {\r\n        var i = this._observers.indexOf(observer);\r\n        if (i !== -1) {\r\n            this._observers.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype._notifyObservers = function () {\r\n        var _this = this;\r\n        this._finishPromise();\r\n        var observers = this._observers.slice();\r\n        observers.forEach(function (observer) {\r\n            _this._notifyObserver(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype._finishPromise = function () {\r\n        if (this._resolve !== undefined) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this._state)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this._resolve.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this._reject;\r\n                    async(toCall.bind(null, this._error))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this._resolve = undefined;\r\n                this._reject = undefined;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype._notifyObserver = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this._state);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this._error))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this._error))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @returns True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        var valid = this._state === InternalTaskState.PAUSED ||\r\n            this._state === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this._transition(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @returns True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        var valid = this._state === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this._transition(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @returns True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        var valid = this._state === InternalTaskState.RUNNING ||\r\n            this._state === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this._transition(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location - An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(_service, location) {\r\n        this._service = _service;\r\n        if (location instanceof Location) {\r\n            this._location = location;\r\n        }\r\n        else {\r\n            this._location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @returns The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        return 'gs://' + this._location.bucket + '/' + this._location.path;\r\n    };\r\n    Reference.prototype.newRef = function (service, location) {\r\n        return new Reference(service, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @returns An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this._location.bucket, '');\r\n            return this.newRef(this._service, location);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this._location.bucket;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this._location.path;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this._location.path);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this._service;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        get: function () {\r\n            var newPath = parent(this._location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this._location.bucket, newPath);\r\n            return new Reference(this._service, location);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Reference.prototype._throwIfRoot = function (name) {\r\n        if (this._location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\r\n/**\r\n * Uploads a blob to this object's location.\r\n * @public\r\n * @param ref - Storage Reference where data should be uploaded.\r\n * @param data - The data to upload.\r\n * @param metadata - Metadata for the newly uploaded string.\r\n * @returns An UploadTask that lets you control and\r\n *     observe the upload.\r\n */\r\nfunction uploadBytesResumable(ref, data, metadata) {\r\n    if (metadata === void 0) { metadata = null; }\r\n    ref._throwIfRoot('uploadBytesResumable');\r\n    return new UploadTask(ref, new FbsBlob(data), metadata);\r\n}\r\n/**\r\n * Uploads a string to this object's location.\r\n * @public\r\n * @param ref - Storage Reference where string should be uploaded.\r\n * @param value - The string to upload.\r\n * @param format - The format of the string to upload.\r\n * @param metadata - Metadata for the newly uploaded object.\r\n * @returns An UploadTask that lets you control and\r\n *     observe the upload.\r\n */\r\nfunction uploadString(ref, value, format, metadata) {\r\n    if (format === void 0) { format = StringFormat.RAW; }\r\n    ref._throwIfRoot('putString');\r\n    var data = dataFromString(format, value);\r\n    var metadataClone = __assign({}, metadata);\r\n    if (metadataClone['contentType'] == null && data.contentType != null) {\r\n        metadataClone['contentType'] = data.contentType;\r\n    }\r\n    return new UploadTask(ref, new FbsBlob(data.data, true), metadataClone);\r\n}\r\n/**\r\n * List all items (files) and prefixes (folders) under this storage reference.\r\n *\r\n * This is a helper method for calling list() repeatedly until there are\r\n * no more results. The default pagination size is 1000.\r\n *\r\n * Note: The results may not be consistent if objects are changed while this\r\n * operation is running.\r\n *\r\n * Warning: listAll may potentially consume too many resources if there are\r\n * too many results.\r\n * @public\r\n * @param ref - Storage Reference to get list from.\r\n *\r\n * @returns A Promise that resolves with all the items and prefixes under\r\n *      the current storage reference. `prefixes` contains references to\r\n *      sub-directories and `items` contains references to objects in this\r\n *      folder. `nextPageToken` is never returned.\r\n */\r\nfunction listAll(ref) {\r\n    var accumulator = {\r\n        prefixes: [],\r\n        items: []\r\n    };\r\n    return listAllHelper(ref, accumulator).then(function () { return accumulator; });\r\n}\r\n/**\r\n * Separated from listAll because async functions can't use \"arguments\".\r\n * @internal\r\n * @param ref\r\n * @param accumulator\r\n * @param pageToken\r\n */\r\nfunction listAllHelper(ref, accumulator, pageToken) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var opt, nextPage;\r\n        var _a, _b;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    opt = {\r\n                        // maxResults is 1000 by default.\r\n                        pageToken: pageToken\r\n                    };\r\n                    return [4 /*yield*/, list$1(ref, opt)];\r\n                case 1:\r\n                    nextPage = _c.sent();\r\n                    (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                    (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                    if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, listAllHelper(ref, accumulator, nextPage.nextPageToken)];\r\n                case 2:\r\n                    _c.sent();\r\n                    _c.label = 3;\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * List items (files) and prefixes (folders) under this storage reference.\r\n *\r\n * List API is only available for Firebase Rules Version 2.\r\n *\r\n * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n * delimited folder structure.\r\n * Refer to GCS's List API if you want to learn more.\r\n *\r\n * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n * support objects whose paths end with \"/\" or contain two consecutive\r\n * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n * list() may fail if there are too many unsupported objects in the bucket.\r\n * @public\r\n *\r\n * @param ref - Storage Reference to get list from.\r\n * @param options - See ListOptions for details.\r\n * @returns A Promise that resolves with the items and prefixes.\r\n *      `prefixes` contains references to sub-folders and `items`\r\n *      contains references to objects in this folder. `nextPageToken`\r\n *      can be used to get the rest of the results.\r\n */\r\nfunction list$1(ref, options) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, op, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (options != null) {\r\n                        if (typeof options.maxResults === 'number') {\r\n                            validateNumber('options.maxResults', \r\n                            /* minValue= */ 1, \r\n                            /* maxValue= */ 1000, options.maxResults);\r\n                        }\r\n                    }\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    op = options || {};\r\n                    requestInfo = list(ref.storage, ref._location, \r\n                    /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * A promise that resolves with the metadata for this object. If this\r\n * object doesn't exist or metadata cannot be retreived, the promise is\r\n * rejected.\r\n * @public\r\n * @param ref - Storage Reference to get metadata from.\r\n */\r\nfunction getMetadata$1(ref) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('getMetadata');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = getMetadata(ref.storage, ref._location, getMappings());\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Updates the metadata for this object.\r\n * @public\r\n * @param ref - Storage Reference to update metadata for.\r\n * @param metadata - The new metadata for the object.\r\n *     Only values that have been explicitly set will be changed. Explicitly\r\n *     setting a value to null will remove the metadata.\r\n * @returns A promise that resolves\r\n *     with the new metadata for this object.\r\n *     See `firebaseStorage.Reference.prototype.getMetadata`\r\n */\r\nfunction updateMetadata$1(ref, metadata) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('updateMetadata');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = updateMetadata(ref.storage, ref._location, metadata, getMappings());\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns the download URL for the given Reference.\r\n * @public\r\n * @returns A promise that resolves with the download\r\n *     URL for this object.\r\n */\r\nfunction getDownloadURL(ref) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('getDownloadURL');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = getDownloadUrl(ref.storage, ref._location, getMappings());\r\n                    return [2 /*return*/, ref.storage\r\n                            .makeRequest(requestInfo, authToken)\r\n                            .getPromise()\r\n                            .then(function (url) {\r\n                            if (url === null) {\r\n                                throw noDownloadURL();\r\n                            }\r\n                            return url;\r\n                        })];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Deletes the object at this location.\r\n * @public\r\n * @param ref - Storage Reference for object to delete.\r\n * @returns A promise that resolves if the deletion succeeds.\r\n */\r\nfunction deleteObject$1(ref) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var authToken, requestInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ref._throwIfRoot('deleteObject');\r\n                    return [4 /*yield*/, ref.storage.getAuthToken()];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    requestInfo = deleteObject(ref.storage, ref._location);\r\n                    return [2 /*return*/, ref.storage.makeRequest(requestInfo, authToken).getPromise()];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns reference for object obtained by appending `childPath` to `ref`.\r\n * @internal\r\n *\r\n * @param ref - Storage Reference to get child of.\r\n * @param childPath - Child path from provided ref.\r\n * @returns A reference to the object obtained by\r\n * appending childPath, removing any duplicate, beginning, or trailing\r\n * slashes.\r\n */\r\nfunction getChild(ref, childPath) {\r\n    var newPath = child(ref._location.path, childPath);\r\n    var location = new Location(ref._location.bucket, newPath);\r\n    return new Reference(ref.storage, location);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar UploadTaskSnapshotCompat = /** @class */ (function () {\r\n    function UploadTaskSnapshotCompat(_delegate, task, ref) {\r\n        this._delegate = _delegate;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"bytesTransferred\", {\r\n        get: function () {\r\n            return this._delegate.bytesTransferred;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"metadata\", {\r\n        get: function () {\r\n            return this._delegate.metadata;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"state\", {\r\n        get: function () {\r\n            return this._delegate.state;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UploadTaskSnapshotCompat.prototype, \"totalBytes\", {\r\n        get: function () {\r\n            return this._delegate.totalBytes;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return UploadTaskSnapshotCompat;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar UploadTaskCompat = /** @class */ (function () {\r\n    function UploadTaskCompat(_delegate, _ref) {\r\n        this._delegate = _delegate;\r\n        this._ref = _ref;\r\n        this.cancel = this._delegate.cancel.bind(this._delegate);\r\n        this.catch = this._delegate.catch.bind(this._delegate);\r\n        this.pause = this._delegate.pause.bind(this._delegate);\r\n        this.resume = this._delegate.resume.bind(this._delegate);\r\n        this._snapshot = new UploadTaskSnapshotCompat(this._delegate.snapshot, this, this._ref);\r\n    }\r\n    Object.defineProperty(UploadTaskCompat.prototype, \"snapshot\", {\r\n        get: function () {\r\n            return this._snapshot;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    UploadTaskCompat.prototype.then = function (onFulfilled, onRejected) {\r\n        var _this = this;\r\n        return this._delegate.then(function (snapshot) {\r\n            if (onFulfilled) {\r\n                return onFulfilled(new UploadTaskSnapshotCompat(snapshot, _this, _this._ref));\r\n            }\r\n        }, onRejected);\r\n    };\r\n    UploadTaskCompat.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        var _this = this;\r\n        var wrappedNextOrObserver = undefined;\r\n        if (!!nextOrObserver) {\r\n            if (typeof nextOrObserver === 'function') {\r\n                wrappedNextOrObserver = function (taskSnapshot) {\r\n                    return nextOrObserver(new UploadTaskSnapshotCompat(taskSnapshot, _this, _this._ref));\r\n                };\r\n            }\r\n            else {\r\n                wrappedNextOrObserver = {\r\n                    next: !!nextOrObserver.next\r\n                        ? function (taskSnapshot) {\r\n                            return nextOrObserver.next(new UploadTaskSnapshotCompat(taskSnapshot, _this, _this._ref));\r\n                        }\r\n                        : undefined,\r\n                    complete: nextOrObserver.complete || undefined,\r\n                    error: nextOrObserver.error || undefined\r\n                };\r\n            }\r\n        }\r\n        return this._delegate.on(type, wrappedNextOrObserver, error || undefined, completed || undefined);\r\n    };\r\n    return UploadTaskCompat;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ListResultCompat = /** @class */ (function () {\r\n    function ListResultCompat(_delegate, _service) {\r\n        this._delegate = _delegate;\r\n        this._service = _service;\r\n    }\r\n    Object.defineProperty(ListResultCompat.prototype, \"prefixes\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this._delegate.prefixes.map(function (ref) { return new ReferenceCompat(ref, _this._service); });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListResultCompat.prototype, \"items\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this._delegate.items.map(function (ref) { return new ReferenceCompat(ref, _this._service); });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListResultCompat.prototype, \"nextPageToken\", {\r\n        get: function () {\r\n            return this._delegate.nextPageToken || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ListResultCompat;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *  http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ReferenceCompat = /** @class */ (function () {\r\n    function ReferenceCompat(_delegate, storage) {\r\n        this._delegate = _delegate;\r\n        this.storage = storage;\r\n    }\r\n    Object.defineProperty(ReferenceCompat.prototype, \"name\", {\r\n        get: function () {\r\n            return this._delegate.name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferenceCompat.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this._delegate.bucket;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferenceCompat.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this._delegate.fullPath;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ReferenceCompat.prototype.toString = function () {\r\n        return this._delegate.toString();\r\n    };\r\n    /**\r\n     * @returns A reference to the object obtained by\r\n     * appending childPath, removing any duplicate, beginning, or trailing\r\n     * slashes.\r\n     */\r\n    ReferenceCompat.prototype.child = function (childPath) {\r\n        var reference = getChild(this._delegate, childPath);\r\n        return new ReferenceCompat(reference, this.storage);\r\n    };\r\n    Object.defineProperty(ReferenceCompat.prototype, \"root\", {\r\n        get: function () {\r\n            return new ReferenceCompat(this._delegate.root, this.storage);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferenceCompat.prototype, \"parent\", {\r\n        /**\r\n         * @returns A reference to the parent of the\r\n         * current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var reference = this._delegate.parent;\r\n            if (reference == null) {\r\n                return null;\r\n            }\r\n            return new ReferenceCompat(reference, this.storage);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data - The blob to upload.\r\n     * @returns An UploadTask that lets you control and\r\n     * observe the upload.\r\n     */\r\n    ReferenceCompat.prototype.put = function (data, metadata) {\r\n        this._throwIfRoot('put');\r\n        return new UploadTaskCompat(uploadBytesResumable(this._delegate, data, metadata), this);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value - The string to upload.\r\n     * @param format - The format of the string to upload.\r\n     * @returns An UploadTask that lets you control and\r\n     * observe the upload.\r\n     */\r\n    ReferenceCompat.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        this._throwIfRoot('putString');\r\n        return new UploadTaskCompat(uploadString(this._delegate, value, format, metadata), this);\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @returns A Promise that resolves with all the items and prefixes under\r\n     *  the current storage reference. `prefixes` contains references to\r\n     *  sub-directories and `items` contains references to objects in this\r\n     *  folder. `nextPageToken` is never returned.\r\n     */\r\n    ReferenceCompat.prototype.listAll = function () {\r\n        var _this = this;\r\n        return listAll(this._delegate).then(function (r) { return new ListResultCompat(r, _this.storage); });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure. Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options - See ListOptions for details.\r\n     * @returns A Promise that resolves with the items and prefixes.\r\n     * `prefixes` contains references to sub-folders and `items`\r\n     * contains references to objects in this folder. `nextPageToken`\r\n     * can be used to get the rest of the results.\r\n     */\r\n    ReferenceCompat.prototype.list = function (options) {\r\n        var _this = this;\r\n        return list$1(this._delegate, options).then(function (r) { return new ListResultCompat(r, _this.storage); });\r\n    };\r\n    /**\r\n     * A promise that resolves with the metadata for this object. If this\r\n     * object doesn't exist or metadata cannot be retreived, the promise is\r\n     * rejected.\r\n     */\r\n    ReferenceCompat.prototype.getMetadata = function () {\r\n        return getMetadata$1(this._delegate);\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata - The new metadata for the object.\r\n     * Only values that have been explicitly set will be changed. Explicitly\r\n     * setting a value to null will remove the metadata.\r\n     * @returns A promise that resolves\r\n     * with the new metadata for this object.\r\n     * @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    ReferenceCompat.prototype.updateMetadata = function (metadata) {\r\n        return updateMetadata$1(this._delegate, metadata);\r\n    };\r\n    /**\r\n     * @returns A promise that resolves with the download\r\n     * URL for this object.\r\n     */\r\n    ReferenceCompat.prototype.getDownloadURL = function () {\r\n        return getDownloadURL(this._delegate);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @returns A promise that resolves if the deletion succeeds.\r\n     */\r\n    ReferenceCompat.prototype.delete = function () {\r\n        this._throwIfRoot('delete');\r\n        return deleteObject$1(this._delegate);\r\n    };\r\n    ReferenceCompat.prototype._throwIfRoot = function (name) {\r\n        if (this._delegate._location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return ReferenceCompat;\r\n}());\r\n\r\n/**\r\n * A request whose promise always fails.\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncallback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough - True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.serverResponse = xhr.getResponseText();\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled - Defaults to false.\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\nfunction addGmpidHeader_(headers, appId) {\r\n    if (appId) {\r\n        headers['X-Firebase-GMPID'] = appId;\r\n    }\r\n}\r\nfunction makeRequest(requestInfo, appId, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addGmpidHeader_(headers, appId);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\r\n\r\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isUrl(path) {\r\n    return /^[A-Za-z]+:\\/\\//.test(path);\r\n}\r\n/**\r\n * Returns a firebaseStorage.Reference for the given url.\r\n */\r\nfunction refFromURL(service, url) {\r\n    return new Reference(service, url);\r\n}\r\n/**\r\n * Returns a firebaseStorage.Reference for the given path in the default\r\n * bucket.\r\n */\r\nfunction refFromPath(ref, path) {\r\n    if (ref instanceof StorageService) {\r\n        var service = ref;\r\n        if (service._bucket == null) {\r\n            throw noDefaultBucket();\r\n        }\r\n        var reference = new Reference(service, service._bucket);\r\n        if (path != null) {\r\n            return refFromPath(reference, path);\r\n        }\r\n        else {\r\n            return reference;\r\n        }\r\n    }\r\n    else {\r\n        // ref is a Reference\r\n        if (path !== undefined) {\r\n            if (path.includes('..')) {\r\n                throw invalidArgument('`path` param cannot contain \"..\"');\r\n            }\r\n            return getChild(ref, path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    }\r\n}\r\nfunction ref(serviceOrRef, pathOrUrl) {\r\n    if (pathOrUrl && isUrl(pathOrUrl)) {\r\n        if (serviceOrRef instanceof StorageService) {\r\n            return refFromURL(serviceOrRef, pathOrUrl);\r\n        }\r\n        else {\r\n            throw invalidArgument('To use ref(service, url), the first argument must be a Storage instance.');\r\n        }\r\n    }\r\n    else {\r\n        return refFromPath(serviceOrRef, pathOrUrl);\r\n    }\r\n}\r\nfunction extractBucket(config) {\r\n    var bucketString = config === null || config === void 0 ? void 0 : config[CONFIG_STORAGE_BUCKET_KEY];\r\n    if (bucketString == null) {\r\n        return null;\r\n    }\r\n    return Location.makeFromBucketSpec(bucketString);\r\n}\r\n/**\r\n * A service that provides Firebase Storage Reference instances.\r\n * @param opt_url - gs:// url to a custom Storage Bucket\r\n */\r\nvar StorageService = /** @class */ (function () {\r\n    function StorageService(app, \r\n    /**\r\n     * @internal\r\n     */\r\n    _authProvider, \r\n    /**\r\n     * @internal\r\n     */\r\n    _pool, \r\n    /**\r\n     * @internal\r\n     */\r\n    _url) {\r\n        this.app = app;\r\n        this._authProvider = _authProvider;\r\n        this._pool = _pool;\r\n        this._url = _url;\r\n        /**\r\n         * @internal\r\n         */\r\n        this._bucket = null;\r\n        this._appId = null;\r\n        this._deleted = false;\r\n        this._maxOperationRetryTime = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this._maxUploadRetryTime = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this._requests = new Set();\r\n        if (_url != null) {\r\n            this._bucket = Location.makeFromBucketSpec(_url);\r\n        }\r\n        else {\r\n            this._bucket = extractBucket(this.app.options);\r\n        }\r\n    }\r\n    Object.defineProperty(StorageService.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this._maxUploadRetryTime;\r\n        },\r\n        set: function (time) {\r\n            validateNumber('time', \r\n            /* minValue=*/ 0, \r\n            /* maxValue= */ Number.POSITIVE_INFINITY, time);\r\n            this._maxUploadRetryTime = time;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StorageService.prototype, \"maxOperationRetryTime\", {\r\n        get: function () {\r\n            return this._maxOperationRetryTime;\r\n        },\r\n        set: function (time) {\r\n            validateNumber('time', \r\n            /* minValue=*/ 0, \r\n            /* maxValue= */ Number.POSITIVE_INFINITY, time);\r\n            this._maxOperationRetryTime = time;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StorageService.prototype.getAuthToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var auth, tokenData;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        auth = this._authProvider.getImmediate({ optional: true });\r\n                        if (!auth) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, auth.getToken()];\r\n                    case 1:\r\n                        tokenData = _a.sent();\r\n                        if (tokenData !== null) {\r\n                            return [2 /*return*/, tokenData.accessToken];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     * @internal\r\n     */\r\n    StorageService.prototype._delete = function () {\r\n        this._deleted = true;\r\n        this._requests.forEach(function (request) { return request.cancel(); });\r\n        this._requests.clear();\r\n        return Promise.resolve();\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this StorageService\r\n     * at the given Location.\r\n     */\r\n    StorageService.prototype.makeStorageReference = function (loc) {\r\n        return new Reference(this, loc);\r\n    };\r\n    /**\r\n     * @internal\r\n     * @param requestInfo - HTTP RequestInfo object\r\n     * @param authToken - Firebase auth token\r\n     */\r\n    StorageService.prototype.makeRequest = function (requestInfo, authToken) {\r\n        var _this = this;\r\n        if (!this._deleted) {\r\n            var request_1 = makeRequest(requestInfo, this._appId, authToken, this._pool);\r\n            this._requests.add(request_1);\r\n            // Request removes itself from set when complete.\r\n            request_1.getPromise().then(function () { return _this._requests.delete(request_1); }, function () { return _this._requests.delete(request_1); });\r\n            return request_1;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    return StorageService;\r\n}());\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n */\r\nvar StorageServiceCompat = /** @class */ (function () {\r\n    function StorageServiceCompat(app, _delegate) {\r\n        var _this = this;\r\n        this.app = app;\r\n        this._delegate = _delegate;\r\n        this.INTERNAL = {\r\n            /**\r\n             * Called when the associated app is deleted.\r\n             */\r\n            delete: function () {\r\n                return _this._delegate._delete();\r\n            }\r\n        };\r\n    }\r\n    Object.defineProperty(StorageServiceCompat.prototype, \"maxOperationRetryTime\", {\r\n        get: function () {\r\n            return this._delegate.maxOperationRetryTime;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StorageServiceCompat.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this._delegate.maxUploadRetryTime;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    StorageServiceCompat.prototype.ref = function (path) {\r\n        if (isUrl(path)) {\r\n            throw invalidArgument('ref() expected a child path but got a URL, use refFromURL instead.');\r\n        }\r\n        return new ReferenceCompat(ref(this._delegate, path), this);\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    StorageServiceCompat.prototype.refFromURL = function (url) {\r\n        if (!isUrl(url)) {\r\n            throw invalidArgument('refFromURL() expected a full URL but got a child path, use ref() instead.');\r\n        }\r\n        try {\r\n            Location.makeFromUrl(url);\r\n        }\r\n        catch (e) {\r\n            throw invalidArgument('refFromUrl() expected a valid full URL but got an invalid one.');\r\n        }\r\n        return new ReferenceCompat(ref(this._delegate, url), this);\r\n    };\r\n    StorageServiceCompat.prototype.setMaxUploadRetryTime = function (time) {\r\n        this._delegate.maxUploadRetryTime = time;\r\n    };\r\n    StorageServiceCompat.prototype.setMaxOperationRetryTime = function (time) {\r\n        this._delegate.maxOperationRetryTime = time;\r\n    };\r\n    return StorageServiceCompat;\r\n}());\r\n\r\nvar name = \"@firebase/storage\";\r\nvar version = \"0.4.2\";\r\n\r\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(container, url) {\r\n    // Dependencies\r\n    // TODO: This should eventually be 'app-compat'\r\n    var app = container.getProvider('app').getImmediate();\r\n    var authProvider = container.getProvider('auth-internal');\r\n    // TODO: get StorageService instance from component framework instead\r\n    // of creating a new one.\r\n    var storageServiceCompat = new StorageServiceCompat(app, new StorageService(app, authProvider, new XhrIoPool(), url));\r\n    return storageServiceCompat;\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: StorageService,\r\n        Reference: ReferenceCompat\r\n    };\r\n    instance.INTERNAL.registerComponent(new Component(STORAGE_TYPE, factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterStorage(firebase);\r\n\r\nexport { registerStorage };\r\n//# sourceMappingURL=index.esm.js.map\r\n","import '@firebase/storage';\r\n//# sourceMappingURL=index.esm.js.map\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Profile</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-grid class=\\\"ion-margin-horizontal\\\" *ngIf=\\\"userData\\\">\\r\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n      <ion-col size=\\\"7\\\" size-sm=\\\"2\\\">\\r\\n        <ion-row class=\\\"ion-align-items-end ion-justify-content-end\\\">\\r\\n          <ion-fab-button color=\\\"primary\\\" style=\\\"position: absolute; z-index: 1\\\" (click)=\\\"presentImageActionSheet()\\\">\\r\\n            <ion-icon name=\\\"camera\\\"></ion-icon>\\r\\n          </ion-fab-button>\\r\\n          <input type=\\\"file\\\" *ngIf=\\\"isDesktop\\\" #filePicker (change)=\\\"onFileChoose($event)\\\"/>\\r\\n          <ion-img src=\\\"assets/images/avatar.png\\\" style=\\\"object-fit: contain; width: 100%;\\\" *ngIf=\\\"!imageUrl\\\"></ion-img>\\r\\n          <img id=\\\"profilePicture\\\" src=\\\"{{imageUrl}}\\\" class=\\\"circle-image\\\" *ngIf=\\\"imageUrl\\\" (load)=\\\"imageLoaded()\\\">\\r\\n        </ion-row>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\" size-sm=\\\"6\\\" offset-sm=\\\"3\\\">\\r\\n        <ion-text class=\\\"ion-text-center\\\">\\r\\n          <h2 class=\\\"text-bold ion-no-margin ion-margin-top\\\">\\r\\n            <b>{{userData.nama}}</b>\\r\\n          </h2>\\r\\n          <h4 class=\\\"ion-no-margin ion-padding-bottom\\\">\\r\\n            <b>{{userData.email}}</b>\\r\\n          </h4>\\r\\n        </ion-text>\\r\\n\\r\\n         <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n            <ion-col size=\\\"12\\\">\\r\\n              <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"doLogout()\\\">\\r\\n              Logout\\r\\n              </ion-button>\\r\\n            </ion-col>\\r\\n         </ion-row>\\r\\n\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProfilePage } from './profile.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfilePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProfilePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProfilePageRoutingModule } from './profile-routing.module';\r\n\r\nimport { ProfilePage } from './profile.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProfilePageRoutingModule\r\n  ],\r\n  declarations: [ProfilePage]\r\n})\r\nexport class ProfilePageModule {}\r\n","export default \".circle-image {\\n  border-radius: 50%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\ninput[type=file] {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGtCQUFBO0VBQ0Esb0JBQUE7S0FBQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7QUFBRjs7QUFHQTtFQUNFLGFBQUE7QUFBRiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgXHJcbi5jaXJjbGUtaW1hZ2V7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwiZmlsZVwiXXtcclxuICBkaXNwbGF5OiBub25lO1xyXG59Il19 */\";","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {AngularFireStorage} from '@angular/fire/storage';\r\nimport {Router} from '@angular/router';\r\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\r\nimport {ActionSheetController, AlertController, LoadingController, Platform, ToastController} from '@ionic/angular';\r\nimport {Camera, CameraResultType, CameraSource, Capacitor} from '@capacitor/core';\r\nimport {finalize} from 'rxjs/operators';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { AngularFirestore  } from \"@angular/fire/firestore\";\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.page.html',\r\n  styleUrls: ['./profile.page.scss'],\r\n})\r\nexport class ProfilePage implements OnInit {\r\n  private id: string;\r\n  private locId: any[] = [];\r\n  private userData: any;\r\n  private userLocations: any[] = [];\r\n  private isDesktop: boolean;\r\n  private downloadURL: any;\r\n  private imageFile: any;\r\n  private base64Image: any;\r\n  private isCamera: boolean = null;\r\n  private imageUrl: SafeResourceUrl;\r\n  @ViewChild('filePicker', { static: false }) filePickerRef: ElementRef<HTMLInputElement>;\r\n\r\n  constructor(public ngroute: Router,\r\n    private firebaseAuthService: AuthService,\r\n    private firebaseDB: AngularFirestore,\r\n      private alertCtrl: AlertController,\r\n      private toastCtrl: ToastController,\r\n      private actionSheetCtrl: ActionSheetController,\r\n      private loadingCtrl: LoadingController,\r\n      private router: Router,\r\n      private platform: Platform,\r\n      private sanitizer: DomSanitizer,\r\n      private storage: AngularFireStorage\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n      if ((this.platform.is('mobile') && this.platform.is('hybrid')) || this.platform.is('desktop')){\r\n        this.isDesktop = true;\r\n      }\r\n      this.firebaseAuthService.userDetails().subscribe(res => {\r\n        if (res !== null){\r\n          this.id = res.uid;\r\n          this.getUserData();\r\n          console.log(this.id);\r\n        }\r\n      }, err => {\r\n        console.log(err);\r\n      });\r\n    }\r\n\r\n  async doLogout(){\r\n    this.firebaseAuthService.signOut()\r\n    .then(res => {\r\n      console.log(res);\r\n      this.ngroute.navigate(['login']);\r\n    }).catch(error => {\r\n    console.log(error);\r\n    });\r\n  }\r\n\r\n\r\n  getUserData(){\r\n    this.firebaseDB.doc('Users/' + this.id).valueChanges().subscribe(data => {\r\n      this.userData = data;\r\n      console.log(this.userData);\r\n      if (this.userData.profilePic){\r\n        this.imageUrl = this.userData.profilePic;\r\n      }\r\n    });\r\n  }\r\n\r\n  async getPicture(type: string){\r\n    if (!Capacitor.isPluginAvailable('Camera') || (this.isDesktop && type === 'gallery')){\r\n      this.filePickerRef.nativeElement.click();\r\n      return;\r\n    }\r\n\r\n    const image = await Camera.getPhoto({\r\n      quality: 100,\r\n      width: 500,\r\n      height: 500,\r\n      allowEditing: false,\r\n      resultType: CameraResultType.Base64,\r\n      source: CameraSource.Prompt\r\n    });\r\n\r\n    this.imageUrl = this.sanitizer.bypassSecurityTrustResourceUrl(image && ('data:image/png;base64,' + image.base64String));\r\n    this.isCamera = true;\r\n    this.base64Image = image.base64String;\r\n\r\n    this.uploadImage();\r\n  }\r\n\r\n  onFileChoose(event){\r\n    const file = event.target.files[0];\r\n    const pattern = /image-*/;\r\n    const reader = new FileReader();\r\n\r\n    if (!file.type.match(pattern)){\r\n      console.log('File format not supported');\r\n      this.imageFile = null;\r\n      return;\r\n    }\r\n\r\n    reader.onload = () => {\r\n      this.imageUrl = reader.result.toString();\r\n    };\r\n    reader.readAsDataURL(file);\r\n    this.isCamera = false;\r\n    this.imageFile = file;\r\n\r\n    this.uploadImage();\r\n  }\r\n\r\n  async presentImageActionSheet(){\r\n    const actionSheet = await this.actionSheetCtrl.create({\r\n      animated: true,\r\n      mode: 'ios',\r\n      buttons: [\r\n        {\r\n          text: 'Camera',\r\n          icon: 'camera-outline',\r\n          handler: () => {\r\n            this.getPicture('camera');\r\n          }\r\n        },\r\n        {\r\n          text: 'Gallery',\r\n          icon: 'image-outline',\r\n          handler: () => {\r\n            this.getPicture('gallery');\r\n          }\r\n        }]\r\n    });\r\n\r\n    await actionSheet.present();\r\n  }\r\n\r\n  async presentLoading(){\r\n    const loading = await this.loadingCtrl.create({\r\n      message: 'Please wait...',\r\n      duration: 3000\r\n    });\r\n    await loading.present();\r\n\r\n    const {role, data} = await loading.onDidDismiss();\r\n    console.log('Loading dismissed!');\r\n  }\r\n\r\n  async presentToast(tm: string, cm: string) {\r\n    const toast = await this.toastCtrl.create({\r\n      message: tm,\r\n      duration: 3000,\r\n      color: cm,\r\n    });\r\n    await toast.present();\r\n  }\r\n\r\n  uploadImage(){\r\n    this.presentLoading().then(() => {\r\n      const n = Date.now();\r\n      const filePath = `Profil/${n}`;\r\n      const fileRef = this.storage.ref(filePath);\r\n      let task;\r\n      if (this.isCamera){\r\n        task = fileRef.putString(this.base64Image, 'base64', { contentType: 'image/png' });\r\n      }\r\n      else{\r\n        task = this.storage.upload(`Profil/${n}`, this.imageFile);\r\n      }\r\n      task.snapshotChanges()\r\n          .pipe(\r\n              finalize(() => {\r\n                fileRef.getDownloadURL().subscribe(url => {\r\n                  if (url) {\r\n                    this.downloadURL = url;\r\n                    this.userData.imageUrl = this.downloadURL;\r\n                    const refPath = 'Users/' + this.id;\r\n                    this.firebaseDB.doc(refPath).update({\r\n                      profilePic: this.userData.imageUrl,\r\n                    });\r\n                  }\r\n                });\r\n              })\r\n          ).subscribe();\r\n      this.getUserData();\r\n      const msg = 'Image have been uploaded';\r\n      const clr = 'success';\r\n      this.presentToast(msg, clr);\r\n    });\r\n  }\r\n\r\n  imageLoaded(){\r\n    setTimeout(() => {\r\n      const profileWidth = document.getElementById('profilePicture').offsetWidth;\r\n      document.getElementById('profilePicture').style.height = profileWidth + 'px';\r\n    }, 10);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}